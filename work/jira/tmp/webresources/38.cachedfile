WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'viewissue/attachmentsblock.soy' */
// This file was automatically generated from attachmentsblock.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ViewIssue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ViewIssue == 'undefined') { JIRA.Templates.ViewIssue = {}; }


JIRA.Templates.ViewIssue.renderAttachments = function(opt_data, opt_ignored) {
  return '' + ((opt_data.viewMode == 'list') ? JIRA.Templates.ViewIssue.fileAttachments(opt_data) : JIRA.Templates.ViewIssue.galleryAttachments(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachments';
}


JIRA.Templates.ViewIssue.fileAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="file_attachments" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var fileAttachmentList14 = opt_data.attachments;
  var fileAttachmentListLen14 = fileAttachmentList14.length;
  for (var fileAttachmentIndex14 = 0; fileAttachmentIndex14 < fileAttachmentListLen14; fileAttachmentIndex14++) {
    var fileAttachmentData14 = fileAttachmentList14[fileAttachmentIndex14];
    output += JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(opt_data, {fileAttachment: fileAttachmentData14}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachments';
}


JIRA.Templates.ViewIssue.galleryAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var imageAttachmentList25 = opt_data.attachments;
  var imageAttachmentListLen25 = imageAttachmentList25.length;
  for (var imageAttachmentIndex25 = 0; imageAttachmentIndex25 < imageAttachmentListLen25; imageAttachmentIndex25++) {
    var imageAttachmentData25 = imageAttachmentList25[imageAttachmentIndex25];
    output += JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(opt_data, {imageAttachment: imageAttachmentData25}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.galleryAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.galleryAttachments';
}


JIRA.Templates.ViewIssue.fileAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment' + ((! opt_data.fileAttachment.latest) ? ' earlier-version' : '') + '" data-attachment-id="' + soy.$$escapeHtml(opt_data.fileAttachment.id) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.fileAttachment}) + '>' + ((opt_data.fileAttachment.expandable) ? JIRA.Templates.ViewIssue.zipFileAttachment(opt_data) : '<div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachment';
}


JIRA.Templates.ViewIssue.zipFileAttachment = function(opt_data, opt_ignored) {
  return '<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>' + soy.$$escapeHtml('\u0421\u043a\u0440\u044b\u0442\u044c') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="' + soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/wait.gif" /></div>' + soy.$$escapeHtml('\u0418\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435 \u0430\u0440\u0445\u0438\u0432\u0430 ...') + '</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>' + soy.$$escapeHtml('\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.zipFileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.zipFileAttachment';
}


JIRA.Templates.ViewIssue.imageAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.imageAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.imageAttachment}) + '><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + ((opt_data.imageAttachment.thumbnailUrl != null) ? '<img class="attachment-thumb-img" loading="lazy" src="' + soy.$$escapeHtml('' + opt_data.imageAttachment.thumbnailUrl) + '" alt="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '" />' : JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype: opt_data.imageAttachment.mimeType})) + '</a></div><dl ' + ((! opt_data.imageAttachment.latest) ? 'class="earlier-version"' : '') + '><dt>' + ((opt_data.imageAttachment.deletable) ? '<span class="blender blender-delete"></span><div class="attachment-delete"><a title="' + soy.$$escapeHtml('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '" aria-label="' + soy.$$escapeHtml(AJS.format('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435\xa0\u2014 {0}',opt_data.imageAttachment.fileName)) + '" id="del_' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '</span></a></div>' : '<span class="blender"></span>') + '<a  href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" class="attachment-title" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '</a></dt><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.imageAttachment.fileSize) + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.imageAttachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + '</time></dd></dl></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.imageAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.imageAttachment';
}


JIRA.Templates.ViewIssue.renderAttachmentInfo = function(opt_data, opt_ignored) {
  return '<dt class="attachment-title"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '" title="' + ((opt_data.attachment.latest) ? soy.$$escapeHtml('\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439') + ' ' : '') + ' ' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + ((opt_data.attachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName) : '') + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.attachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.attachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment(opt_data) + '>' + soy.$$escapeHtml(opt_data.attachment.fileName) + '</a></dt><dd class="attachment-delete">' + ((opt_data.attachment.deletable) ? '<a title="' + soy.$$escapeHtml('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '" aria-label="' + soy.$$escapeHtml(AJS.format('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435\xa0\u2014 {0}',opt_data.attachment.fileName)) + '" id="del_' + soy.$$escapeHtml(opt_data.attachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.attachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '</span></a>' : '<span class="icon"></span>') + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.attachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + '</time></dd><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.attachment.fileSize) + '</dd><dd class="attachment-author">' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName ? opt_data.attachment.authorDisplayName : '') + '</dd>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentInfo.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentInfo';
}


JIRA.Templates.ViewIssue.renderAttachmentData = function(opt_data, opt_ignored) {
  return 'data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '"' + ((opt_data.attachment.expandable) ? 'data-attachment-type="expandable"' : (opt_data.attachment.imageFileType) ? 'data-attachment-type="image" data-attachment-thumbnail="' + soy.$$escapeHtml(opt_data.attachment.thumbnailUrl != null) + '"' : 'data-attachment-type="file"');
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentData.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentData';
}


JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileIconUrl__soy290 = '' + JIRA.Templates.ViewIssue.matchFileIconUrl(opt_data);
  var fileIconAlt__soy292 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<img src="' + soy.$$escapeHtml(fileIconUrl__soy290) + '" height="16" width="16" border="0" alt="' + soy.$$escapeHtml(fileIconAlt__soy292) + '" role="presentation">';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon';
}


JIRA.Templates.ViewIssue.matchFileIconUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/attach/' + JIRA.Templates.ViewIssue.matchFileIcon(opt_data);
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconUrl.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconUrl';
}


JIRA.Templates.ViewIssue.matchFileIcon = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'pdf.gif';
      break;
    case 'image/gif':
      output += 'image.gif';
      break;
    case 'image/png':
      output += 'image.gif';
      break;
    case 'image/jpeg':
      output += 'image.gif';
      break;
    case 'text/xml':
      output += 'xml.gif';
      break;
    case 'text/html':
      output += 'html.gif';
      break;
    case 'text/plain':
      output += 'text.gif';
      break;
    case 'application/zip':
      output += 'zip.gif';
      break;
    case 'application/x-gzip-compressed':
      output += 'zip.gif';
      break;
    case 'application/msword':
      output += 'word.gif';
      break;
    case 'application/msword-template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-excel':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'powerpoint.gif';
      break;
    case 'text/x-java':
      output += 'java.gif';
      break;
    case 'text/x-java-source':
      output += 'java.gif';
      break;
    case 'application/x-java-archive':
      output += 'java.gif';
      break;
    default:
      output += 'file.gif';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIcon';
}


JIRA.Templates.ViewIssue.matchFileIconAlt = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += soy.$$escapeHtml('PDF \u0444\u0430\u0439\u043b');
      break;
    case 'image/gif':
      output += soy.$$escapeHtml('GIF \u0444\u0430\u0439\u043b');
      break;
    case 'image/png':
      output += soy.$$escapeHtml('PNG \u0444\u0430\u0439\u043b');
      break;
    case 'image/jpeg':
      output += soy.$$escapeHtml('JPEG \u0444\u0430\u0439\u043b');
      break;
    case 'text/xml':
      output += soy.$$escapeHtml('XML \u0444\u0430\u0439\u043b');
      break;
    case 'text/html':
      output += soy.$$escapeHtml('HTML \u0444\u0430\u0439\u043b');
      break;
    case 'text/plain':
      output += soy.$$escapeHtml('\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b');
      break;
    case 'application/zip':
      output += soy.$$escapeHtml('ZIP \u0430\u0440\u0445\u0438\u0432');
      break;
    case 'application/x-gzip-compressed':
      output += soy.$$escapeHtml('GZip \u0430\u0440\u0445\u0438\u0432');
      break;
    case 'application/msword':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/msword-template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-powerpoint':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'text/x-java':
      output += soy.$$escapeHtml('\u0424\u0430\u0439\u043b \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430 Java');
      break;
    case 'text/x-java-source':
      output += soy.$$escapeHtml('\u0424\u0430\u0439\u043b \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430 Java');
      break;
    case 'application/x-java-archive':
      output += soy.$$escapeHtml('\u0424\u0430\u0439\u043b \u0430\u0440\u0445\u0438\u0432\u0430 Java');
      break;
    default:
      output += soy.$$escapeHtml('\u0424\u0430\u0439\u043b');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconAlt.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconAlt';
}


JIRA.Templates.ViewIssue.renderAttachmentIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy448 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  var fileIconAlt__soy450 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<span class="aui-icon aui-icon-small attachment-icon ' + soy.$$escapeHtml(fileClass__soy448) + '" title="' + soy.$$escapeHtml(fileIconAlt__soy450) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentIcon';
}


JIRA.Templates.ViewIssue.renderThumbnailIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy458 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  output += (fileClass__soy458 == 'aui-iconfont-image') ? '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" class="no-image"><defs><path d="M39 0c4.9705627 0 9 4.02943725 9 9 0 4.9705627-4.0294373 9-9 9s-9-4.0294373-9-9c0-4.97056275 4.0294373-9 9-9zm4.1553041 4.84471837c-.4595944-.45962449-1.2024684-.45962449-1.6620628 0l-2.4930944 2.49325714-2.4942697-2.49325714c-.4584191-.45962449-1.2024684-.45962449-1.6620629 0-.4584191.45844898-.4584191 1.20254694 0 1.66217143l2.4930943 2.49325714-2.4930943 2.49325716c-.4584191.4596245-.4584191 1.2025469 0 1.6621714.2303849.2292245.5301205.3444245.8310314.3444245.300911 0 .6018219-.1152.8310315-.3444245l2.4942697-2.4932571 2.4930944 2.4932571c.2292095.2292245.5301204.3444245.8310314.3444245.300911 0 .6018219-.1152.8310314-.3444245.4595945-.4596245.4595945-1.2025469 0-1.6621714l-2.4930943-2.49325716 2.4930943-2.49325714c.4595945-.45962449.4595945-1.20372245 0-1.66217143z" id="a"/></defs><g fill-rule="evenodd"><path d="M27 9c0 6.627417 5.372583 12 12 12 2.1861601 0 4.2357797-.5845995 6.0010592-1.6059991L45 38.982424C45 42.3058395 42.3088196 45 38.982424 45H9.01757598C5.69416054 45 3 42.3088196 3 38.982424V9.01757598C3 5.69416054 5.69118038 3 9.01757598 3l19.58867952-.00150229C27.5846974 4.76387737 27 6.81365699 27 9zm6.6773881 15l-9.2173637 9.1911941-4.4147772-4.4022429L8 40.8h30l.1762728-.0050927C39.75108 40.7036609 41 39.3976809 41 37.8v-6.4981782L33.6773881 24zM15 10.5c-2.4852814 0-4.5 2.0147186-4.5 4.5s2.0147186 4.5 4.5 4.5 4.5-2.0147186 4.5-4.5-2.0147186-4.5-4.5-4.5z"/><use xlink:href="#a"/></g></svg>' : '<span class="aui-icon aui-icon-large attachment-thumbnail-icon ' + soy.$$escapeHtml(fileClass__soy458) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderThumbnailIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderThumbnailIcon';
}


JIRA.Templates.ViewIssue.matchFileClass = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'aui-iconfont-file-pdf';
      break;
    case 'image/gif':
      output += 'aui-iconfont-image';
      break;
    case 'image/png':
      output += 'aui-iconfont-image';
      break;
    case 'image/jpeg':
      output += 'aui-iconfont-image';
      break;
    case 'text/xml':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/html':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/plain':
      output += 'aui-iconfont-file-txt';
      break;
    case 'application/zip':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/x-gzip-compressed':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/msword':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/msword-template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-excel':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'text/x-java':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/x-java-source':
      output += 'aui-iconfont-file-code';
      break;
    case 'application/x-java-archive':
      output += 'aui-iconfont-file-zip';
      break;
    default:
      output += 'aui-iconfont-devtools-file';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileClass.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileClass';
}


JIRA.Templates.ViewIssue.tagAttachment = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id, title: opt_data.attachment.fileName, mimeType: opt_data.attachment.mimeType, isImage: opt_data.attachment.thumbnailUrl != null, thumbnailUrl: opt_data.attachment.thumbnailUrl});
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.tagAttachment';
}


JIRA.Templates.ViewIssue.tagFilePreview = function(opt_data, opt_ignored) {
  var output = '';
  var previewType__soy545 = '' + ((opt_data.isImage || opt_data.mimeType != null && ('' + opt_data.mimeType).indexOf('image/') != -1) ? 'image' : (opt_data.mimeType == 'application/pdf') ? 'document' : 'unknown');
  output += (previewType__soy545 != 'unknown') ? ' file-preview-id="' + soy.$$escapeHtml(opt_data.id) + '" file-preview-title="' + soy.$$escapeHtml(opt_data.title) + '" file-preview-type="' + soy.$$escapeHtml(previewType__soy545) + '"' + ((opt_data.thumbnailUrl != null) ? 'file-preview-url="' + soy.$$escapeHtml('' + opt_data.thumbnailUrl) + '"' : '') : '';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagFilePreview.soyTemplateName = 'JIRA.Templates.ViewIssue.tagFilePreview';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'viewissue/attachment-default.js' */
!function(){"use strict";require(["wrm/context-path"],(function(n){document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementsByClassName("attachment-thumb-img");Array.from(t).forEach((function(t){t.addEventListener("error",(function(){t.onerror=null;t.src=n()+"/images/icons/attach/noimage.png"}))}))}))}))}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/i18n.js' */
define("dndattachment/i18n",["require"],function(c){var a=c("jira/util/formatter"),b={"dnd.attachment.unsupported.browser":"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u043d\u0438\u0435 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432:","dnd.attachment.file.is.too.large":"\u0424\u0430\u0439\u043b \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c ({0}).","dnd.attachment.upload.in.progress":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435.","dnd.attachment.not.uploaded":function(d){return a.format("\u0424\u0430\u0439\u043b \u0022{0}\u0022 \u043d\u0435 \u0431\u044b\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d",d)},"dnd.attachment.unauthorized":"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b, \u0432\u0440\u0435\u043c\u044f \u0441\u0435\u0430\u043d\u0441\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u043e\u0441\u044c \u0438\u043b\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e.",
"dnd.attachment.internal.server.error":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0432\u0430\u0448\u0435\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.","dnd.attachment.upload.aborted":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u044b\u043b\u0430 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430.","dnd.attachment.upload.remove":"\u0423\u0431\u0440\u0430\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435"};return function(a){if(b[a])return b[a];throw"Unknown key: "+a;}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var d={};return{createAttachment:function(a,b,c,d){return{id:a,name:b,type:c,file:d}},getAttachment:function(a,b){return d[a]||this.createAttachment(a,b)},putAttachment:function(a,b,c){c=c||{};return d[a]=this.createAttachment(a,c.name||b.name,c.type||b.type,b)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/Parser.js' */
define("dndattachment/Parser",["require"],function(b){function c(d){d=a(d).find("*[duiType]:not(.-dui-type-parsed)").add(d.filter("*[duiType]:not(.-dui-type-parsed)")).addClass("-dui-type-parsed").map(function(d,c){var e=new f;b([a(c).attr("duiType")],function(a){"function"==typeof a?e.resolve(new a(c)):e.reject()});return e});return a.when.apply(window,a.makeArray(d))}var g=b("jira/util/events"),h=b("jira/util/events/types"),f=b("jira/jquery/deferred"),a=b("jquery");g.bind(h.NEW_CONTENT_ADDED,function(a,
b,f){c(b)});a.isReady?c(a("body")):a(function(){c(a("body"))});return{parse:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'templates/IssueDropZone.soy' */
// This file was automatically generated from IssueDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.IssueDropZone = function(opt_data, opt_ignored) {
  return '<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> ' + soy.$$escapeHtml('\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c, \u0438\u043b\u0438') + ' <button type="button" id="attachment-browse-button" class="issue-drop-zone__button"> ' + soy.$$escapeHtml('\u043e\u0431\u0437\u043e\u0440') + '.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple aria-hidden="true" aria-labelledby="attachment-browse-button" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.IssueDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.IssueDropZone';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["require"],function(c){var g=c("jira/util/formatter"),p=c("jira/util/logger"),v=c("jira/analytics"),w=c("jira/ajs/ajax/smart-ajax"),x=c("jira/issue"),h=c("jira/jquery/plugins/isdirty"),q=c("jira/util/data/meta"),y=c("jira/lib/class"),f=c("underscore"),k=c("jira/jquery/deferred"),e=c("jquery"),l=c("jira/flag"),z=c("dndattachment/Parser"),r=c("dndattachment/templates"),A=c("dndattachment/util/DataTransfer"),m=["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0432\u0430\u0448\u0435\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443."];
return y.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(a){this.$node=e(a);this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone");this.uploadLimit=this.$node.data("upload-limit");this.uploadSize=this.$node.data("upload-size");this.formToken=this.$node.data("form-token");this.attachFileUrl=contextPath+"/secure/AttachFile.jspa";this.pendingQueue=[];this.render();this.queueEvent("init")},queueTask:function(a){this.pendingQueue.push(a);
a.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(a),1)}.bind(this));this.markDirty(!0);e.when.apply(window,this.pendingQueue).always(f.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(r.IssueDropZone({}));this.fileInput=this.$node.find(".issue-drop-zone__file");this.fileButton=this.$node.find("button.issue-drop-zone__button");this.connectListeners();p.trace("jira.issue.dnd.issuedropzone.render")},connectListeners:function(){this.fileInput.change(function(a){this.handleFilesReceived(this.fileInput[0].files);
this.queueEvent("fileInput",{count:this.fileInput[0].files.length});this.fileInput.attr("value",null)}.bind(this));this.fileButton.click(function(a){a.preventDefault();this.fileInput.click()}.bind(this));var a=0<this.$node.parents(".issue-drop-zone").length?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=a.find("\x3e*").andSelf();this.$dropTarget.on("dragover dragenter drop",function(b){b.preventDefault();b.stopPropagation();a.addClass("dragover");"drop"==b.type&&(a.removeClass("dragover"),
e(document).trigger("dropHandled"),(new A(b.dataTransfer)).getFiles().then(function(a){this.handleFilesReceived(a);this.queueEvent("fileDrop",{count:a.length})}.bind(this)))}.bind(this));this.$dropTarget.on("dragleave",function(){a.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(a,b){a.data("upload-size",this.uploadSize).data("file",b).data("form-token",this.formToken)},createUploadProgressBar:function(a){var b=e('\x3cdiv duiType\x3d"'+this.progressBarType+'" class\x3d"upload-progress-bar"\x3e\x3c/div\x3e');
this.configureUploadProgressBar(b,a);return z.parse(b).done(function(a){this.placeUploadProgressBar(b,a);this.handleNewProgressBar(a)}.bind(this))},placeUploadProgressBar:function(a){return a.insertAfter(this.$node)},handleNewProgressBar:function(a){},handleFilesReceived:function(a){this.uploadFiles(a)},getSuccessfulUploads:function(a){return f.filter(a,function(a){return"resolved"===a.result.state()})},uploadFiles:function(a){var b=new k,c=[],B=q.get("issue-key"),h=q.get("viewissue-permlink"),m=
e("#summary-val input").attr("value")||e("#summary-val").text(),t=r.SuccessMessageLink({issueLink:h,issueKey:B,issueSummary:m}),u=f.map(a,function(a){var d=new k;this.createUploadProgressBar(a).then(function(n){this.trigger("progressBarInserted",n);c.push(n);n.uploadFile(a,this.uploadLimit).then(d.resolve.bind(d),d.resolve.bind(d)).done(function(){this.trigger("uploadFinished",n)}.bind(this)).fail(function(){b.reject(arguments)})}.bind(this));return d}.bind(this));a=e.when.apply(window,u);a.done(function(){var a=
f.filter(1==u.length?[arguments]:arguments,function(a){return a&&a[0]&&a[0].id}).map(function(a){return a[0].id});if(0!=a.length){if(this.showFlagsForCreateDialogUploads){var d=this.getSuccessfulUploads(c);1==d.length?(d=d[0].getFileName(),l.showSuccessMsg("",g.format("\u0424\u0430\u0439\u043b {0} \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d \u043a \u044d\u0442\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0435.",d))):1<d.length&&l.showSuccessMsg("",g.format("\u0424\u0430\u0439\u043b\u044b {0} \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u044b \u043a \u044d\u0442\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0435.",d.length))}this.commitUpload(a).done(function(){f.delay(function(){c.some(function(a){a.getAutoDestroy()&&
(a.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),5E3);var a=this.getSuccessfulUploads(c);if(1==a.length){var d=a[0].getFileName();l.showSuccessMsg("",g.format("\u0424\u0430\u0439\u043b {0} \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d \u043a {1}.",d,t))}else 1<a.length&&l.showSuccessMsg("",g.format("\u0424\u0430\u0439\u043b\u044b {0} \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u044b \u043a {1}.",a.length,t));b.resolve(f.map(a,function(a){return a.file.name}))}.bind(this)).fail(function(a,d){b.reject(a,d);a&&a.forEach(function(a){c.forEach(function(b){b.reportError(a)})});
d&&c.forEach(function(a){var b=d["#"+a.getFileID()]||d[a.getFileName()];b&&a.reportError(b)});p.trace("jira.issue.dnd.commit.fail")})}}.bind(this));this.queueTask(a);return b},loadAttachments:function(a){a.forEach(function(a){this.createUploadProgressBar(a.file).then(function(b){b.setFileID(a.id);b.setFileName(a.name);b.setFileSize(a.size);b.setProgress(1);b.setFinished();this.trigger("uploadFinished",b)}.bind(this))},this)},commitUpload:function(a){return new k},attachFile:function(a){var b=new k;
w.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:x.getIssueId(),filetoconvert:a,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(b.resolve.bind(b)).fail(function(a){try{var c=JSON.parse(a.responseText);b.reject(c.errorMessages||m,c.errors)}catch(C){b.reject(m)}});return b},markDirty:function(a){this.$node.addClass(h.ClassNames.SANCTIONED);this.$node.toggleClass(h.ClassNames.EXEMPT,!a);this.$node.attr("value",!1);this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==
this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(a,b){v.send({name:"issue.dnd.attachment."+this.eventGroup+"."+a,data:b||{}})}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["require"],function(c){var n=c("jira/libs/parse-uri"),h=c("jira/util/logger"),k=c("jira/util/events/types"),p=c("jira/util/events/reasons"),q=c("underscore"),r=c("jira/jquery/deferred"),t=c("dndattachment/dropzones/IssueDropZone"),f=c("jira/util/events"),u=c("dndattachment/util/events/types"),d=c("jquery"),m=c("dndattachment/templates"),v=c("dndattachment/util/DataTransfer"),l=c("dndattachment/ctrlv/utility"),w=c("jira/dialog/dialog-stack"),x=
function(){var a=n(window.location);return a.protocol+"://"+a.authority}();return t.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments);this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment";f.bind(k.PANEL_REFRESHED,this.panelRefreshed.bind(this));this.connectContainer()},connectContainer:function(){this.$pagePanel=d("div.aui-page-panel");this.$containerNode=this.getContainerNode();
this.$dragoverDropzone=d(m.dropzone());this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border");this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info");this.$dragoverDropzone.appendTo(this.$containerNode);this.onDragOverDropHandler=this.onDragOverDrop.bind(this);this.onDragLeaveHandler=this.onDragLeave.bind(this);this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler);this.$containerNode.on("dragleave",this.onDragLeaveHandler);
this.$windowMask=d(m.windowDropzoneMask());this.$body=d(document.body);this.$body.append(this.$windowMask);this.$body.on("dragenter",q.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1}));this.$body.on("dragleave",this.onBodyDragLeave.bind(this));this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this));this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this));this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this));this.$auiSidebar=d(".aui-sidebar-body");
this._disconnectListenersFromParentDropzone();this.onContentAddedHandler=this.onContentAdded.bind(this);f.bind(k.NEW_CONTENT_ADDED,this.onContentAddedHandler)},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter");d(document).off("dragover dragenter")},_risePagePanel:function(){this._pagePanelZIndex=this.$pagePanel.css("z-index");this.$pagePanel.css("z-index","auto")},_releasePagePanel:function(){this.$pagePanel.css("z-index",this._pagePanelZIndex)},
disconnectContainer:function(){this.$dragoverDropzone.remove();this.$windowMask.remove();this.$body.removeClass("attachments-drop-zone__dragover");this.$body.off("dragenter",this.onBodyDragEnter.bind(this));this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler);this.$containerNode.off("dragleave",this.onDragLeaveHandler);f.unbind(k.NEW_CONTENT_ADDED,this.onContentAddedHandler)},isAttached:function(){return d.contains(document,this.$node[0])},onContentAdded:function(){this.isAttached()||
this.disconnectContainer()},getContainerNode:function(){var a=d(d(".issue-container")[0]);"static"===a.css("position")&&a.css("position","relative");return a},canDoFullPageDrop:function(){if(w.current)return h.trace("jira.issue.dnd.dropnotallowed"),!1;h.trace("jira.issue.dnd.dropallowed");return!0},onDragOverDrop:function(a){this.isAttached()?l.dragEventContainsFiles(a)&&this.canDoFullPageDrop()&&(a.preventDefault(),a.originalEvent&&(a.originalEvent.dataTransfer.dropEffect="copy"),h.trace("jira.issue.dnd.dragover"),
this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"drop"==a.type&&(this.removeAllDragoverClasses(this.$containerNode),this._releasePagePanel(),d(document).trigger("dropHandled"),(new v(a.dataTransfer)).getFiles().then(function(a){this.handleFilesReceived(a);this.queueEvent("fileDrop",{count:a.length})}.bind(this)))):
this.disconnectContainer()},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var a=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var b=this.$dragoverBorder.parent().offset().left;a>b?this.$dragoverBorder.css({left:a-b}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0});this._risePagePanel()}},_repositionStickyInfoBox:function(){var a=
this.$containerNode.scrollParent().scrollTop()+10,b=this.$containerNode.offset().top;a=0===(this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0)?a>=b?a-b:10:a;this.$dragoverInfo.css({top:a})},onBodyDragEnter:function(a){l.dragEventContainsFiles(a)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(a){l.dragEventContainsFiles(a)&&
(a.preventDefault(),a.originalEvent&&(a.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(a){a.preventDefault();this.removeAllDragoverClasses()},removeAllDragoverClasses:function(a){a&&a.removeClass("attachments-drop-zone__dragover-fade");
this.$body.removeClass("attachments-drop-zone__window-dragover");this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(a){var b=d("textarea.wiki-textfield:visible:focus"),e=0<b.length,g=d(".jira-editor-container iframe:visible:focus");f.trigger(u.ATTACHMENT_FOR_PAGE_RECEIVED,{files:a,isWikiTextfieldFocused:e,wikiTextfield:b[0],isRichEditorFieldFocused:0<g.length,richEditorField:g[0]})},render:function(){this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent");
this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails");return this._super.apply(this,arguments)},panelRefreshed:function(a,b,e,g){g.find(this.$node).is("*")&&(this.getViewMode(),e=e.find("\x3e.mod-content"),e.addClass("issue-drop-zone"),this.$node.prependTo(e),this.render(),a=g.find(".attachments-upload-progress-bar"),a.data("viewMode",this.getViewMode()).each(function(a,b){d(b).prop("_instance").render()}),a.each(function(a,b){this.insertProgressBar(d(b))}.bind(this)),this._disconnectListenersFromParentDropzone())},
getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var a="asc"==this.getSortOrder()?1:-1,b="fileName"==this.getSortBy()?function(a){return a.find(".attachment-title").text()}:function(a){return(new Date(a.find("*[datetime]").attr("datetime"))).getTime()},e="fileName"==this.getSortBy()&&String.prototype.localeCompare?
function(a,b){return a.localeCompare(b)}:function(a,b){return a<b?-1:a>b?1:0};return function(d,c){d=b(d);c=b(c);return a*e(d,c)}},commitUpload:function(a){var b=new r;this.attachFile(a).then(b.resolve.bind(b),b.reject.bind(b));b.then(function(b){var c=d(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:x+contextPath,issue:{id:JIRA.Issues.Api.getSelectedIssueId()},attachments:b,viewMode:this.getViewMode()})).find(".attachment-content");b.forEach(function(b,d){b=c[d];this.$listNode.find('\x3e*[data-file-id\x3d"'+
a[d]+'"]').replaceWith(b)},this);f.trigger(k.NEW_CONTENT_ADDED,[this.$listNode,p.panelRefreshed]);h.trace("jira.issue.dnd.attached")}.bind(this));this.queueTask(b);this.queueEvent("commitUpload",{count:a.length});return b},configureUploadProgressBar:function(a){this._super.apply(this,arguments);a.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(a,b){b.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp();this.insertProgressBar(a);b.bind("onDestroy",
function(){var b=a.parents(".item-attachments");0==b.find(".attachments-upload-progress-bar, .attachment-content").length&&b.remove()});return a},insertProgressBar:function(a){var b=this.getSortComparator();this.$listNode.children().toArray().some(function(c){if(1>b(a,d(c)))return a.insertBefore(c),!0})||a.appendTo(this.$listNode)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["require"],function(d){function h(a,b){m.send({name:"issue.dnd.attachment.uploadprogress."+a,data:b||{}})}var m=d("jira/analytics"),n=d("jira/util/formatter"),k=d("jira/util/logger"),p=d("jira/issue"),l=d("jira/attachment/inline-attach"),q=d("jira/lib/class"),r=d("wrm/context-path"),g=d("jira/jquery/deferred"),e=d("jquery"),f=d("dndattachment/i18n"),t=d("dndattachment/TemporaryAttachments"),u=d("dndattachment/templates"),v=d("dndattachment/util/Configuration"),
w=d("dndattachment/util/FileSizeUtil"),x=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],y=v.getWRM("thumbnail-mime-types").split(",");return q.extend({autoDestroy:!0,init:function(a){this.result=new g;this.$node=e(a);this.file=this.$node.data("file");this.uploadSize=this.$node.data("upload-size");this.formToken=this.$node.data("form-token");this.$node.prop("_instance",this);this.render()},render:function(){this.$node.html(u.UploadProgressBar({isImageType:this.isImageType()}));
this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file));this.progress&&this.updateProgress();this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy();h("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},
{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL);this.$node.remove();k.trace("jira.issue.dnd.progressbar.removed");this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(a){this.autoDestroy=a},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(a){a={filename:a.name,size:a.size,atl_token:atl_token(),formToken:this.formToken};Object.assign(a,
this.getEntityParams());return a},getEntityParams:function(){var a={},b=p.getIssueId(),c=this.$node.parents("form").find('*[name\x3d"pid"]').attr("value");c?a.projectId=c:b&&(a.issueId=b);return a},setFile:function(a){this.file=a},setFileID:function(a){this.fileID=a;this.$node.attr("data-file-id",a)},getFileID:function(){return this.fileID},setFileName:function(a){this.$node.find(".upload-progress-bar__file-name").text(a)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},
setFileNameIcon:function(a){this.$node.find(".upload-progress-bar__control .aui-icon").append(" "+a)},setFileSize:function(a){0<=a&&this.$node.find(".upload-progress-bar__file-size").html(w.format(a))},uploadFile:function(a,b){this.setFile(a);var c=this.result;this.monitorUpload(c);c.fail(this.reportError.bind(this));if(a.size>b)return c.reject(f("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),c;b='\\/":?*\x3c|\x3e'.split("");for(var d=0;d<b.length;d++){var e=b[d];if(a.name&&
a.name.includes(e))return c.reject(n.format("{0} \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b\u0027\u0027{1}\u0027\u0027. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u0443\u0439\u0442\u0435 \u0444\u0430\u0439\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443.",a.name,e),!0),c}this.upload=new l.AjaxUpload({file:a,params:this.getUploadParams(a),url:l.AjaxPresenter.DEFAULT_URL,progress:function(b){c.notify(b/a.size)},success:function(b,d){void 0!==b.id&&void 0!==b.name?(c.notify(1),c.resolve(b,d,a)):c.reject(b,d,a)},error:function(a,b){c.reject(f("dnd.attachment.internal.server.error"),b)},abort:function(){c.reject(f("dnd.attachment.upload.aborted"),"abort")}});this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){c.reject(f("dnd.attachment.unauthorized"),
401)});this.$node.find(".upload-progress-bar__control\x3e*").on("click",function(){this.upload.abort();c.reject()}.bind(this));c.done(function(a){t.putAttachment(a.id,this.file,{name:a.name});this.setFile(this.file);this.setFileName(a.name);this.setFileNameIcon(a.name);this.setFileID(a.id);k.trace("jira.issue.dnd.uploaded")}.bind(this));return c},monitorUpload:function(a){a.progress(this.setProgress.bind(this));a.done(this.setFinished.bind(this));a.fail(this.setFailed.bind(this))},setProgress:function(a){this.progress=
a;this.updateProgress()},updateProgress:function(){var a=this.$node.find(".upload-progress-bar__progress-bar");a.toggleClass("UploadProgressBar_progressUnknown",!1===this.progress);0<=this.progress&&a.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished");this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog");this.finished=
!0;this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed");this.failed=this.finished=!0;this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file?y.includes(this.file.type):!1},getThumbnailSrc:function(a){this.isImageType()&&(this.objectURL=window.URL.createObjectURL(a));return this.objectURL||
JIRA.Templates.ViewIssue.matchFileIconUrl({baseurl:r(),mimetype:a.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(a){a=this.getThumbnailSrc(a);var b=this.getThumbnailNode();b.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");return e("\x3cimg/\x3e").attr("src",a).appendTo(b)},reportError:function(a,
b){"object"==typeof a&&a.errorMessage&&(a=a.errorMessage);this.$node.addClass("upload-progress-bar__upload-error");this.$node.removeClass("upload-progress-bar__upload-finished");this.$node.find(".upload-progress-bar__bar").css("width","100%");this.showErrorMessage(a,b);this.setAutoDestroy(!1);h("error",{message:a})},showErrorMessage:function(a){this.$node.find(".upload-progress-bar__error-message").text(a)},setIcon:function(a){var b=this.$node.find(".upload-progress-bar__control button .aui-icon");
if(!x.some(function(c){b.toggleClass(c,c==a);return c==a}))throw"Unknown icon";},checkSession:function(){var a=new g;e.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){a.resolve()}).fail(function(){this.checkPermissions().done(function(b){a.resolve()}).fail(function(){a.reject()})}.bind(this));return a},checkPermissions:function(){var a=new g;e.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:this.getEntityParams()}).done(function(b){b.permissions.CREATE_ATTACHMENT.havePermission?
a.resolve():a.reject()}).fail(function(){a.reject()});return a}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["require"],function(a){var b=a("dndattachment/progressbars/UploadProgressBar"),e=a("jira/flag"),c=a("jquery"),f=a("dndattachment/aui/escape-html"),g=a("dndattachment/templates"),h=a("dndattachment/i18n");return b.extend({render:function(){this.$node.html(g.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar");this.$node.toggleClass("attachment-content",
!this.isImageType());this.afterRender()},loadThumbnail:function(a){return"gallery"==this.$node.data("viewMode")?b.prototype.isImageType.call(this)?this._super.apply(this,arguments):c(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:a.type})).appendTo(this.getThumbnailNode()):c(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:a.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(a,b){if("abort"!=b){var d=e.showErrorMsg(h("dnd.attachment.not.uploaded")(this.getFileName()),
f(a));c(d).on("aui-flag-close",function(){this.destroy()}.bind(this));this.bind("onDestroy",function(){d.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/AttachmentsDropZone.soy' */
// This file was automatically generated from AttachmentsDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.dropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzoneMask';
}


JIRA.Templates.DnDAttachmentPlugin.dropzone = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>' + soy.$$escapeHtml('\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0438\u0445 \u043a \u0437\u0430\u043f\u0440\u043e\u0441\u0443') + '</p></div></div></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzone';
}


JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__window-dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/UploadProgressBar.soy' */
// This file was automatically generated from UploadProgressBar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443') + '</span></button></div><div class="upload-progress-bar__error-message"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isImageType) ? '<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c') + '</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>' : '<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c') + '</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>');
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">' + soy.$$escapeHtml('\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438') + '</span></div><div class="upload-progress-bar__error-text">' + soy.$$escapeHtml('\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c') + '</div></div><div class="upload-progress-bar__upload-mask"></div><div class="upload-progress-bar__control"><button type="button" class="aui-button"><span class="aui-icon aui-iconfont-close-dialog"><div class="button-text" aria-label="' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443') + ' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.issueLink) + '">' + soy.$$escapeHtml(opt_data.issueKey) + ' - ' + soy.$$escapeHtml(opt_data.issueSummary) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["require"],function(b){var h=b("jira/util/logger"),k=b("jira/util/events/types"),c=b("underscore"),m=b("jira/jquery/deferred");b("dndattachment/Parser");var l=b("dndattachment/dropzones/IssueDropZone"),d=b("jquery"),f=b("dndattachment/aui/dialog2"),n=b("dndattachment/i18n"),p=b("dndattachment/util/DataTransfer"),q=b("dndattachment/ctrlv/utility"),g=b("jira/util/events");return l.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,
arguments);this.progressBars=[];this.bind("uploadFinished",this.onUploadFinished.bind(this));this.$containerNode=this.getContainerNode();this.$formNode=this.$node.parents("form");this.formToken=this.$formNode.find('input[name\x3d"formToken"]').attr("value");this.$inputNode=d('\x3cinput name\x3d"dnd-dropzone" type\x3d"hidden" /\x3e').insertAfter(this.$node);this.$fieldNode=this.$node.parents(".field-group");this.$fieldNode.addClass("long-field");this.connectContainer()},onUploadFinished:function(a,
e){var b=d('\x3cinput type\x3d"checkbox" name\x3d"filetoconvert"/\x3e').addClass("upload-progress-bar__checkbox").attr("value",e.fileID).attr("id","filetoconvert-"+e.fileID).prop("checked",!0).insertBefore(e.$node);e.bind("onBeforeDestroy",function(){b.prop("checked",!1).prop("value",null)});setTimeout(function(){e.$node.addClass("upload-progress-bar__upload-ready");e.setIcon("aui-iconfont-close-dialog")},1E3);h.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(a){this.queueEvent("commitUpload",
{count:a.length});return new m},getContainerNode:function(){return this.$node.parents(".jira-dialog-core-content")},connectContainer:function(){this.$dragoverMask=d('\x3cdiv class\x3d"attach-files-drop-zone__dragover-mask" /\x3e');this.$dragoverMask.appendTo(this.$containerNode);this.$body=d(document.body);this.onDragOverDropHandler=this.onDragOverDrop.bind(this);this.onDragLeaveHandler=this.onDragLeave.bind(this);this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this);this.$containerNode.on("dragover drop",
this.onDragOverDropHandler);this.$containerNode.on("dragleave",this.onDragLeaveHandler);this.$body.on("dragover drop",this.onBodyDragOverDropHandler);this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this);this.$formNode.on("before-submit",this.onBeforeSubmitHandler);this.onContentAddedHandler=this.onContentAdded.bind(this);g.bind(k.NEW_CONTENT_ADDED,this.onContentAddedHandler);g.bind("Dialog.hide",this.onDialogHide.bind(this));if(f)f.on("hide",this.onDialogHide.bind(this))},disconnectContainer:function(){this.$dragoverMask.remove();
this.$containerNode.removeClass("attach-files-drop-zone__dragover");this.$containerNode.off("dragover drop",this.onDragOverDropHandler);this.$containerNode.off("dragleave",this.onDragLeaveHandler);this.$formNode.off("before-submit",this.onBeforeSubmitHandler);g.unbind(k.NEW_CONTENT_ADDED,this.onContentAddedHandler);g.unbind("Dialog.hide",this.onDialogHide.bind(this));f&&f.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return d.contains(document,this.$node[0])},onContentAdded:function(){this.isAttached()||
this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(a){a.preventDefault();a.originalEvent&&(a.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(a){this.isAttached()?q.dragEventContainsFiles(a)&&(a.preventDefault(),a.stopPropagation(),a.originalEvent&&(a.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"drop"==a.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),
d(document).trigger("dropHandled"),(new p(a.dataTransfer)).getFiles().then(function(a){this.handleFilesReceived(a);this.queueEvent("fileDrop",{count:a.length})}.bind(this)))):this.disconnectContainer()},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(a){this.isDirty&&(a.preventDefault(),a={},a[this.$inputNode.attr("name")]=n("dnd.attachment.upload.in.progress"),JIRA.applyErrorsToForm(this.$formNode,a),this.$formNode.find(".error").toArray().some(function(a){a.scrollIntoView()}))},
markDirty:function(a){l.prototype.markDirty.apply(this,arguments);this.isDirty=a;h.trace(a?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(a){this.progressBars.push(a);a.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",a);this.progressBars=c.filter(this.progressBars,function(b){return b!==a});0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this));a.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},
this));a.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this));a.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this));this.trigger("progressBarStarted")},filesStillUploading:function(){return 0<c.filter(this.progressBars,function(a){return!a.isFinished()}).length},anyFilesFailed:function(){return 0<c.filter(this.progressBars,function(a){return a.isFailed()}).length}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["require"],function(b){var d=b("jira/jquery/deferred");return b("dndattachment/dropzones/FormDropZone").extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments);this.bind("progressBarInserted",function(b,c){var a=new d;this.queueTask(a);c.result.done(a.resolve.bind(a));c.bind("onBeforeDestroy",function(){a.resolve()})}.bind(this))},checkMarkDirty:function(){1>=this.pendingQueue.length&&this.markDirty(!1)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["require"],function(a){var b=a("underscore"),c=a("jquery");return a("dndattachment/dropzones/FormDropZone").extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",showFlagsForCreateDialogUploads:!0,getContainerNode:function(){return c(this.$node.parents(".jira-dialog-core-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0]||this.$node.parents("form.dnd-attachment-support")[0])},
handleNewProgressBar:function(a){this._super.apply(this,arguments);a.bind("onDestroy onFinished",b.bind(function(){this.filesStillUploading()||this.$formNode.find(":input[name\x3d'"+this.$inputNode.attr("name")+"']").last().closest(".field-group, .group").find(".error").remove()},this))}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["require"],function(a){var e=a("jquery"),b=a("dndattachment/progressbars/UploadProgressBar");return b.extend({getProjectId:function(){return this.$node.parents("form").find("*[name\x3dpid]").val()},getUploadParams:function(d){var c=b.prototype.getUploadParams.apply(this,arguments);this.getProjectId()&&(c.projectId=this.getProjectId());return c},loadThumbnail:function(d){if(this.isImageType())return this._super.apply(this,arguments);var c=
this.getThumbnailNode();c.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var a="aui-iconfont-devtools-file",b="File";"object"===typeof d&&(a=JIRA.Templates.ViewIssue.matchFileClass({mimetype:d.type}),b=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:d.type}));return e('\x3cspan class\x3d"aui-icon aui-icon-large"/\x3e').addClass(a).attr("title",b).appendTo(c)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'templates/AttachFilesDropZone.soy' */
// This file was automatically generated from AttachFilesDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'templates/CreateIssueDropZone.soy' */
// This file was automatically generated from CreateIssueDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>' + ((opt_data.description) ? '<div class="description">' + soy.$$filterNoAutoescape(opt_data.description) + '</div>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'js/initIssueDropZone.js' */
define("dndattachment/init","jira/util/events jira/util/events/types jira/dialog/dialog-register jira/dialog/dialog-stack underscore dndattachment/Parser jquery dndattachment/dropzones/IssueDropZone dndattachment/upload/handler dndattachment/upload/default/executor dndattachment/TemporaryAttachments dndattachment/templates dndattachment/util/Configuration dndattachment/util/FileSizeUtil".split(" "),function(k,t,l,u,v,m,c,d,f,w,x,n,y,p){function g(a,b){a=a.find(".field-group.file-input-list");if(0!=
a.size()&&!(0<a.find('*[duiType*\x3d"'+b+'"]').length)){var z=a.find("input[name\x3dfiletoconvert]:checked").map(function(a,b){return x.getAttachment(b.value,c(b).siblings("label").text())}).toArray(),d=a.find(".description:last-child").html();a.empty();b=c(n[b]({uploadLimit:p.format(e),jiraAttachmentSize:e,description:d}));m.parse(b.appendTo(a)).then(function(a){null!=a&&a.loadAttachments(z)})}}function q(a,b){var c=function(){g(a.$popupContent,b)};if(a.$popup&&a.$popup.is(":visible"))c();else a.onContentReady(c)}
function r(a){var b=a&&"attachmentmodule"==a.attr("id")&&c(".mod-content:not(.issue-drop-zone)",a);b&&0<b.size()&&0!=a.find("#add-attachments-link").length&&(b.addClass("issue-drop-zone"),a=c(n.AttachmentsDropZone({uploadLimit:p.format(e),jiraAttachmentSize:e})),m.parse(a.prependTo(b)).then(function(a){h&&h.disconnectContainer();h=a;f.setAttachmentDropZone(a)}))}var e=y.getWRM("upload-limit"),h;d=function(){l.attachFile&&q(l.attachFile,"AttachFilesDropZone");var a=["create-issue-dialog","create-subtask-dialog",
"edit-issue-dialog"],b=function(b,c,d){v.contains(a,c.attr("id"))&&q(d,"CreateIssueDropZone")};k.bind("Dialog.show",b);const d=u.current;d&&b(null,d.$popup,d);k.bind(t.NEW_CONTENT_ADDED,function(a,b,c){g(b,"CreateIssueDropZone");r(b)});b=c("form#issue-create, form#issue-edit, form.dnd-attachment-support");0<b.size()&&g(b,"CreateIssueDropZone");f.initialize();f.registerExecutor(w);r(c("#attachmentmodule"));c(document).on("dragover dragenter",function(){c("body").addClass("issue-drop-zone-document__dragover")});
c(document).on("dragleave drop dropHandled",function(){c("body").removeClass("issue-drop-zone-document__dragover")})};c.isReady?d():c(d);c.event.props.push("dataTransfer")});require("dndattachment/init");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:constants', location = 'js/editor-constants.js' */
define("jira/editor/constants",[],function(){return{EventSources:{SHORTCUT:"shortcut",BUTTON:"button",UNKNOWN:"unknown"},EventTypes:{ADD:"add",UNDO:"undo",REDO:"redo",CLEAR:"clear"},Context:{DIALOG:"dialog",COMMENT:"comment",UNKNOWN:"unknown"},Modes:{TEXT:"source",VISUAL:"wysiwyg"},SupportedImagesRegexp:/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i,LEFT_WHITESPACE_MATCHER:/^\s+/,RIGHT_WHITESPACE_MATCHER:/\s+$/,CLASS_COVER:"richeditor-cover",CLASS_LOADING:"richeditor-loading",EVENT_CHANGE:"richeditor:change",
EVENT_OPERATION:"toolbar-operation",EVENT_OPERATION_COLOR:"toolbar-operation-color",EVENT_OPERATION_ATTACHMENT:"toolbar-operation-attachment"}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-thumbnails', location = '/js/Thumbnails.js' */
define("wiki-edit/thumbnails",["wrm/data"],function(f){var b=f.claim("com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-thumbnails.thumbnails-allowed");return{isThumbnailable:function(c,d){var e=!0;null!=b&&(e=!!b);if(!e)return!1;var a;d&&(a=d.data("attachment-thumbnail"));return null==a?!!c.match(/\.(jpg|jpeg|pjpeg|png)$/i):a?!c.match(/\.gif$/i):!1}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:height-helper', location = 'js/height-helper-heights.js' */
define("jira/editor/height-helper-heights",[],function(){return{FULL_ISSUE_DETAILS:{min:219,max:629},FULL_ISSUE_DETAILS_STICKY_FOOTER:{min:174,max:400},SD_COMMENT:{min:220,max:629},SD_COMMENT_STICKY_FOOTER:{min:220,max:400},BOARD_BACKLOG_ISSUE_DETAILS:{min:219,max:629},DIALOG_ISSUE_DETAILS:{min:174,max:369},COMMENT:{min:174,max:629},COMMENT_STICKY_FOOTER:{min:174,max:400},BOARD_BACKLOG_COMMENT_STICKY_FOOTER:{min:156,max:156}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:height-helper', location = 'js/height-helper.js' */
define("jira/editor/height-helper",["jquery","jira/editor/height-helper-heights"],function(c,b){return function(f){this.element=f;this.getMinHeight=function(){return this._getLocation().min};this.getMaxHeight=function(){return this._getLocation().max};this.setHeights=function(a,d){d=d||0;a=a?c(a):c(this.element);a.css("height","");a.removeAttr("rows");var e=this._getLocation();a.css("min-height",e.min+d+"px");a.css("max-height",e.max+d+"px")};this._getLocation=function(){return this._isDialog()?b.DIALOG_ISSUE_DETAILS:
this._isBoard()&&this._isComment()&&this._isStickyFooterEnabled()?b.BOARD_BACKLOG_COMMENT_STICKY_FOOTER:this._isBoard()?b.BOARD_BACKLOG_ISSUE_DETAILS:this._isComment()?this._isStickyFooterEnabled()?b.COMMENT_STICKY_FOOTER:b.COMMENT:this._isSDComment()?this._isStickyFooterEnabled()?b.SD_COMMENT_STICKY_FOOTER:b.SD_COMMENT:this._isStickyFooterEnabled()?b.FULL_ISSUE_DETAILS_STICKY_FOOTER:b.FULL_ISSUE_DETAILS};this._isComment=function(){return 0<c(this.element).closest(".comment-input").length};this._isSDComment=
function(){return 0<c(this.element).closest("sd-comment").length};this._isDialog=function(){return 0<c(this.element).closest(".jira-dialog, .jira-dialog2").length};this._isBoard=function(){return 0<c(this.element).closest(".ghx-detail-view").length};this._isStickyFooterEnabled=function(){const a=c(this.element).closest("#addcomment")[0];return a?"true"===a.dataset.stickyCommentEnabled:!1}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/templates/wiki-editor.soy' */
// This file was automatically generated from wiki-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Plugins.WikiEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Plugins == 'undefined') { JIRA.Templates.Plugins = {}; }
if (typeof JIRA.Templates.Plugins.WikiEditor == 'undefined') { JIRA.Templates.Plugins.WikiEditor = {}; }


JIRA.Templates.Plugins.WikiEditor.renderEditor = function(opt_data, opt_ignored) {
  var output = '';
  var auiAlignmentContainer__soy3 = opt_data.containerSelector ? 'data-aui-alignment-container=' + opt_data.containerSelector : '';
  output += '<div id="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="' + soy.$$escapeHtml('\u0410\u0431\u0437\u0430\u0446') + '">' + soy.$$escapeHtml('\u0410\u0431\u0437\u0430\u0446') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 3') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 3') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 4') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 4') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 5') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 5') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 6') + '">' + soy.$$escapeHtml('\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 6') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="' + soy.$$escapeHtml('\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439') + '">' + soy.$$escapeHtml('\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="' + soy.$$escapeHtml('\u0426\u0438\u0442\u0430\u0442\u0430 \u0430\u0431\u0437\u0430\u0446\u0430') + '">' + soy.$$escapeHtml('\u0426\u0438\u0442\u0430\u0442\u0430 \u0430\u0431\u0437\u0430\u0446\u0430') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="' + soy.$$escapeHtml('\u0426\u0438\u0442\u0430\u0442\u0430 \u0431\u043b\u043e\u043a\u0430') + '">' + soy.$$escapeHtml('\u0426\u0438\u0442\u0430\u0442\u0430 \u0431\u043b\u043e\u043a\u0430') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="' + soy.$$escapeHtml('\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+S)">' + soy.$$escapeHtml('\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">' + soy.$$escapeHtml('\u041f\u043e\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">' + soy.$$escapeHtml('\u041d\u0430\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">' + soy.$$escapeHtml('\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="monospace-inline">' + soy.$$escapeHtml('\u041c\u043e\u043d\u043e\u0448\u0438\u043d\u043d\u044b\u0439') + '</a></li></ul></div><div class="aui-dropdown2-section" hidden><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="clear-format">' + soy.$$escapeHtml('\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="' + soy.$$escapeHtml('\u0412\u043d\u0435\u0448\u043d\u044f\u044f \u0441\u0432\u044f\u0437\u044c') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)">' + soy.$$escapeHtml('\u0412\u043d\u0435\u0448\u043d\u044f\u044f \u0441\u0432\u044f\u0437\u044c') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">' + soy.$$escapeHtml('\u041f\u043e\u0447\u0442\u043e\u0432\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">' + soy.$$escapeHtml('\u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 \u0441\u0441\u044b\u043b\u043a\u0438') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;' + soy.$$escapeHtml('\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440') + '</a></li></ul></div></div><div id="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">';
  var colors__soy83 = [{hex: '172B4D', name: '\u0427\u0435\u0440\u043d\u044b\u0439'}, {hex: '505F79', name: '\u0422\u0435\u043c\u043d\u043e-\u0441\u0435\u0440\u044b\u0439'}, {hex: 'C1C7D0', name: '\u0421\u0432\u0435\u0442\u043b\u043e-\u0441\u0435\u0440\u044b\u0439'}, {hex: '0747A6', name: '\u0421\u0438\u043d\u0438\u0439'}, {hex: '4C9AFF', name: '\u0413\u043e\u043b\u0443\u0431\u043e\u0439'}, {hex: '00875A', name: '\u0417\u0435\u043b\u0435\u043d\u044b\u0439'}, {hex: '57D9A3', name: '\u0421\u0430\u043b\u0430\u0442\u043e\u0432\u044b\u0439'}, {hex: 'DE350B', name: '\u041a\u0440\u0430\u0441\u043d\u044b\u0439'}, {hex: 'FF8B00', name: '\u0422\u0435\u043c\u043d\u043e-\u043e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439'}, {hex: 'FFAB00', name: '\u0421\u0432\u0435\u0442\u043b\u043e-\u043e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439'}, {hex: '403294', name: '\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439'}, {hex: 'FFBDAD', name: '\u041f\u0435\u0440\u0441\u0438\u043a\u043e\u0432\u044b\u0439'}];
  output += '<div class="aui-dropdown2-section"><ul>';
  var colorList85 = colors__soy83;
  var colorListLen85 = colorList85.length;
  for (var colorIndex85 = 0; colorIndex85 < colorListLen85; colorIndex85++) {
    var colorData85 = colorList85[colorIndex85];
    output += '<li><a href="#" class="wiki-edit-tooltip" aria-label="' + soy.$$escapeHtml(colorData85.name) + '" title="' + soy.$$escapeHtml(colorData85.name) + '" style="background-color: #' + soy.$$escapeHtml(colorData85.hex) + '" data-operation="color" data-color="#' + soy.$$escapeHtml(colorData85.hex) + '">&nbsp;</a></li>';
  }
  output += '</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/smile.png" alt="' + soy.$$escapeHtml('smile') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/sad.png" alt="' + soy.$$escapeHtml('sad') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/tongue.png" alt="' + soy.$$escapeHtml('tongue') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/biggrin.png" alt="' + soy.$$escapeHtml('biggrin') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/wink.png" alt="' + soy.$$escapeHtml('wink') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_up.png" alt="' + soy.$$escapeHtml('thumbs up') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_down.png" alt="' + soy.$$escapeHtml('\u043f\u0430\u043b\u0435\u0446 \u0432\u043d\u0438\u0437') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/information.png" alt="' + soy.$$escapeHtml('\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/check.png" alt="' + soy.$$escapeHtml('\u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/error.png" alt="' + soy.$$escapeHtml('\u043e\u0448\u0438\u0431\u043a\u0430') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/warning.png" alt="' + soy.$$escapeHtml('\u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/add.png" alt="' + soy.$$escapeHtml('\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/forbidden.png" alt="' + soy.$$escapeHtml('\u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/help_16.png" alt="' + soy.$$escapeHtml('\u043f\u043e\u043c\u043e\u0449\u044c') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb_on.png" alt="' + soy.$$escapeHtml('\u043b\u0430\u043c\u043f\u043e\u0447\u043a\u0430 \u0433\u043e\u0440\u0438\u0442') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb.png" alt="' + soy.$$escapeHtml('lightbulb') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.png" alt="' + soy.$$escapeHtml('\u0436\u0435\u043b\u0442\u0430\u044f \u0437\u0432\u0435\u0437\u0434\u0430') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_red.png" alt="' + soy.$$escapeHtml('star red') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_green.png" alt="' + soy.$$escapeHtml('star green') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_blue.png" alt="' + soy.$$escapeHtml('star blue') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.png" alt="' + soy.$$escapeHtml('\u0436\u0435\u043b\u0442\u0430\u044f \u0437\u0432\u0435\u0437\u0434\u0430') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag.png" alt="' + soy.$$escapeHtml('\u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c') + '" loading="lazy" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag_grey.png" alt="' + soy.$$escapeHtml('\u0441\u043d\u044f\u0442\u044c \u043e\u0442\u043c\u0435\u0442\u043a\u0443') + '" loading="lazy" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">' + soy.$$escapeHtml('\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">' + soy.$$escapeHtml('\u0422\u0430\u0431\u043b\u0438\u0446\u0430') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">' + soy.$$escapeHtml('\u041a\u043e\u0434') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">' + soy.$$escapeHtml('\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">' + soy.$$escapeHtml('\u041f\u0430\u043d\u0435\u043b\u044c') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">' + soy.$$escapeHtml('\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0435\u0439\u043a\u0430') + '</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">' + soy.$$escapeHtml('\u0420\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0447\u0438') + '</a></li></ul></div>' + ((opt_data.helpData.showHelp) ? '<div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="' + soy.$$escapeHtml("") + '/secure/WikiRendererHelpAction.jspa?section=texteffects" target="_blank" title="' + soy.$$escapeHtml('\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0434\u043b\u044f \u043c\u0435\u043d\u044f \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0432\u0438\u043a\u0438-\u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438') + '">' + soy.$$escapeHtml('\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u043c\u0443 \u0440\u0435\u0436\u0438\u043c\u0443') + '</a></li><li><a href="' + soy.$$escapeHtml(opt_data.helpData.editorDocumentationUrl) + '" target="_blank" title="' + soy.$$escapeHtml(opt_data.helpData.editorDocumentationTitle) + '">' + soy.$$escapeHtml('\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u043e \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0440\u0435\u0436\u0438\u043c\u0443') + '</a></li></ul></div>' : '') + '</div><div class="wiki-edit-toolbar" id="wiki-edit-' + soy.$$escapeHtml(opt_data.editorId) + '"><button type="button" class="aui-button aui-button-subtle aui-button-compact wiki-edit-visible-toggle wiki-edit-tooltip" title="' + soy.$$escapeHtml('\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432') + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-double-down">' + soy.$$escapeHtml('\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432') + '</span></button><div class="aui-toolbar2"><div class="aui-toolbar2-inner" role="toolbar"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" ' + soy.$$escapeHtml(auiAlignmentContainer__soy3) + '>' + soy.$$escapeHtml('\u0421\u0442\u0438\u043b\u044c') + '</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" role="button" aria-pressed="false" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="' + soy.$$escapeHtml('\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">' + soy.$$escapeHtml('\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)</span></a><a href="#" role="button" aria-pressed="false" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="' + soy.$$escapeHtml('\u041a\u0443\u0440\u0441\u0438\u0432') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">' + soy.$$escapeHtml('\u041a\u0443\u0440\u0441\u0438\u0432') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)</span></a><a href="#" role="button" aria-pressed="false" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="' + soy.$$escapeHtml('\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044c') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">' + soy.$$escapeHtml('\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044c') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)</span></a><a href="#" role="button" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="' + soy.$$escapeHtml('\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">' + soy.$$escapeHtml('\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430') + '</span><span class="wiki-edit-color-indicator"></span></a><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" title="' + soy.$$escapeHtml('\u0411\u043e\u043b\u044c\u0448\u0435 \u0446\u0432\u0435\u0442\u043e\u0432') + '"><span class="visually-hidden">' + soy.$$escapeHtml('\u0411\u043e\u043b\u044c\u0448\u0435 \u0446\u0432\u0435\u0442\u043e\u0432') + '</span></a><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">' + soy.$$escapeHtml('\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f') + '</span></a></div><div class="aui-buttons"><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('\u0421\u0441\u044b\u043b\u043a\u0430') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)" ' + soy.$$escapeHtml(auiAlignmentContainer__soy3) + '><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml('\u0421\u0441\u044b\u043b\u043a\u0430') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)</span></a><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '" ' + soy.$$escapeHtml(auiAlignmentContainer__soy3) + '><span class="aui-icon aui-icon-small aui-iconfont-file-generic">' + soy.$$escapeHtml('\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u0435') + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" role="button" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="' + soy.$$escapeHtml('\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">' + soy.$$escapeHtml('\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)</span></a><a href="#" role="button" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="' + soy.$$escapeHtml('\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">' + soy.$$escapeHtml('\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)</span></a></div><div class="aui-buttons"><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('\u0417\u043d\u0430\u0447\u043a\u0438') + '" ' + soy.$$escapeHtml(auiAlignmentContainer__soy3) + '><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">' + soy.$$escapeHtml('\u0417\u043d\u0430\u0447\u043a\u0438') + '</span></a><a href="#" role="button" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-operation-dropdown wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('\u0414\u0440\u0443\u0433\u043e\u0435') + '" ' + soy.$$escapeHtml(auiAlignmentContainer__soy3) + '><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml('\u0414\u0440\u0443\u0433\u043e\u0435') + '</span></a></div></div></div><!-- .aui-toolbar-inner --><div class="aui-buttons wiki-edit-toolbar-last"><button type="button" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-hide-toolbar wiki-edit-tooltip" title="' + soy.$$escapeHtml('\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432') + '"><span class="aui-icon aui-icon-small aui-iconfont-chevron-double-up">' + soy.$$escapeHtml('\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432') + '</span></button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderEditor.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderEditor';
}


JIRA.Templates.Plugins.WikiEditor.renderListItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" ' + soy.$$escapeHtml(opt_data.attachmentType ? 'data-attachment-type=' + opt_data.attachmentType : '') + ' ' + soy.$$escapeHtml(opt_data.attachmentHref ? 'data-attachment-href=' + opt_data.attachmentHref : '') + ' data-attachment-thumbnail=' + soy.$$escapeHtml(opt_data.attachmentThumbnailable ? true : false) + '><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small ' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) : 'aui-iconfont-file-txt') + '" title="' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) : '\u0424\u0430\u0439\u043b') + '"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">' + soy.$$escapeHtml(opt_data.text) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderListItem.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderListItem';
}


JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml("") + '/secure/temporaryattachment/' + soy.$$escapeHtml(opt_data.formToken) + '/' + soy.$$escapeHtml(opt_data.temporaryAttachmentId) + '_' + soy.$$escapeHtml(opt_data.filename);
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster.js' */
(function(k){function t(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function A(a){var b,c;var d=a.keyCode;-1==t(q,d)&&q.push(d);if(93==d||224==d)d=91;if(d in e)for(b in e[d]=!0,p)p[b]==d&&(r[b]=!0);else{for(f in e)e[f]=a[B[f]];if(r.filter.call(this,a)&&d in l){var m=v();for(c=0;c<l[d].length;c++){var g=l[d][c];if(g.scope==m||"all"==g.scope){var h=0<g.mods.length;for(b in e)if(!e[b]&&-1<t(g.mods,+b)||e[b]&&-1==t(g.mods,+b))h=!1;(0!=g.mods.length||e[16]||e[18]||e[17]||e[91])&&!h||!1!==
g.method(a,g)||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}}}function r(a,b,c){var d=x(a);void 0===c&&(c=b,b="all");for(var m=0;m<d.length;m++){var g=[];a=d[m].split("+");1<a.length&&(g=y(a),a=[a[a.length-1]]);a=a[0];a=u[a]||a.toUpperCase().charCodeAt(0);a in l||(l[a]=[]);l[a].push({shortcut:d[m],scope:b,method:c,key:d[m],mods:g})}}function v(){return z||"all"}function x(a){a=a.replace(/\s/g,"");a=a.split(",");
""==a[a.length-1]&&(a[a.length-2]+=",");return a}function y(a){a=a.slice(0,a.length-1);for(var b=0;b<a.length;b++)a[b]=p[a[b]];return a}function w(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}var f,l={},e={16:!1,18:!1,17:!1,91:!1},z="all",p={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},u={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,
del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"\x3d":187,";":186,"'":222,"[":219,"]":221,"\\":220},q=[];for(f=1;20>f;f++)u["f"+f]=111+f;var B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(f in p)r[f]=!1;w(document,"keydown",function(a){A(a)});w(document,"keyup",function(a){a=a.keyCode;var b,c=t(q,a);0<=c&&q.splice(c,1);if(93==a||224==a)a=91;if(a in e)for(b in e[a]=!1,p)p[b]==a&&(r[b]=!1)});w(window,"focus",function(){for(f in e)e[f]=!1;
for(f in p)r[f]=!1});var C=k.key;k.key=r;k.key.setScope=function(a){z=a||"all"};k.key.getScope=v;k.key.deleteScope=function(a){var b,c;for(b in l){var d=l[b];for(c=0;c<d.length;)d[c].scope===a?d.splice(c,1):c++}};k.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};k.key.isPressed=function(a){"string"==typeof a&&(a=u[a]||a.toUpperCase().charCodeAt(0));return-1!=t(q,a)};k.key.getPressedKeyCodes=function(){return q.slice(0)};k.key.noConflict=function(){var a=
k.key;k.key=C;return a};k.key.unbind=function(a,b){var c=[],d,m;var g=x(a);for(m=0;m<g.length;m++){var h=g[m].split("+");1<h.length&&(c=y(h),a=h[h.length-1]);a=u[a]||a.toUpperCase().charCodeAt(0);void 0===b&&(b=v());if(!l[a])break;for(d in l[a]){h=l[a][d];var n;if(n=h.scope===b)a:if(h=h.mods,h.length!=c.length)n=!1;else{for(n=0;n<h.length;n++)if(h[n]!==c[n]){n=!1;break a}n=!0}n&&(l[a][d]={})}}};"undefined"!==typeof module&&(module.exports=key)})(this);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/amd-wrappers.js' */
(function(){var a=window.key.noConflict();define("wiki-edit/keymaster",["jira/util/data/meta"],function(b){return!1===b.get("keyboard-shortcuts-enabled")?function(){}:a})})();define("wiki-edit/editor/templates",[],function(){return window.JIRA.Templates.Plugins.WikiEditor});define("wiki-edit/viewissue/templates",[],function(){return window.JIRA.Templates.ViewIssue});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/AttachmentListUtil.js' */
define("wiki-edit/attachment-list-util","wiki-edit/WikiEnabledTextarea jquery underscore wiki-edit/keymaster wiki-edit/analytics wiki-edit/WikiEditorUtil wiki-edit/editor/templates wiki-edit/thumbnails".split(" "),function(A,d,B,C,D,f,p,z){return{buildAttachmentLinks:function(l,m,q,r,t){var h=[],k=[];q&&d(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function(a,b){h.push(b)});var u=function(){d("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").each(function(a,
b){h.push(b)})};!r&&t&&u();var v=function(a,b){if(!a)return null;var e=f.getFileExtension(a);return{name:a,type:b,icon:f.translateFileExtensionToAttachmentTypeIcon(e)}},n=d("#ghx-tab-attachments .ghx-container"),w=0<n.length;w?(n.find("#file_attachments li.attachment-content \x3e dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function(a,b){(a=v(b.textContent,"file"))&&k.push(a)}),n.find("#attachment_thumbnails a.attachment-title").each(function(a,b){(a=v(b.textContent,
"image"))&&k.push(a)})):0<d("#ghx-detail-issue").length&&u();l.empty();m.addClass("hidden");(q||t||!w)&&h.length?(m.removeClass("hidden"),d(h).each(function(){var a=d(this),b=a.is("span.upload-progress-bar__file-name")?a.text():a.find("a.attachment-title, .attachment-title a").first().text(),e=a.attr("data-attachment-type");void 0===e&&(e=b.match(/\.(bmp|gif|jpg|jpeg|pjpeg|png|tiff|webp)$/i)?"image":"file");var g=f.defaultAttachmentTypeIcon,c=a.attr("data-downloadurl");void 0===c&&(c=a.find("[data-downloadurl]").attr("data-downloadurl"));
void 0!==c&&"string"===typeof c&&f.canTranslateMimeTypeToAttachmentTypeIcon()?(c=c.split(":"),0<c.length&&(g=f.translateMimeTypeToAttachmentTypeIcon(c[0]))):void 0!==b&&"string"===typeof b&&(c=b.match(/\.(\w{1,5})$/i))&&1<c.length&&(g=f.translateFileExtensionToAttachmentTypeIcon(c[1]));c=a.find("a.attachment-title, .attachment-title\x3ea").attr("href");if(!c&&a.is("span.upload-progress-bar__file-name")){var x=a.parents("[data-file-id]").attr("data-file-id"),y=a.parents("form").find('input[name\x3d"formToken"]').attr("value")||
"undefined";x&&y&&(c=JIRA.Templates.Plugins.WikiEditor.temporaryAttachmentViewUrl({formToken:y,temporaryAttachmentId:x,filename:encodeURIComponent(b)}))}a=z.isThumbnailable(b,a);l.append(d(p.renderListItem({text:b,attachmentType:e,attachmentTypeIcon:g,attachmentThumbnailable:a,attachmentHref:c})))})):!r&&0<k.length&&(m.removeClass("hidden"),k.forEach(function(a){if(null!=a&&null!=a.name){var b=a.name,e=a.type?a.type:"file";a=a.icon?a.icon:{cssClass:"aui-iconfont-devtools-file",title:""};var g=_isThumbnailable(b);
l.append(d(p.renderListItem({text:b,attachmentType:e,attachmentThumbnailable:g,attachmentTypeIcon:a})))}}))}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/Analytics.js' */
define("wiki-edit/analytics",["jira/analytics"],function(d){return{trigger:function(b,a){d.send({name:"jira.wikieditor."+b,data:a||{}})},hashCode:function(b){var a=0;if(!b)return"";for(var c=0;c<b.length;c+=1){var e=b.charCodeAt(c);a=32*a-a+e;a|=0}return a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/KeyTester.js' */
define("wiki-edit/KeyTester",function(){return{getActionType:function(a){if(this.isNavigation(a))return"navigating";if(this.isDeleting(a))return"deleting";if(this.isReturn(a))return"newline";if(this.isEscape(a))return"escape";if(this.isTyping(a))return"typing"},isNavigation:function(a){return 33<=a&&40>=a||63232<=a&&63235>=a},isDeleting:function(a){return 8==a||46==a||127==a},isReturn:function(a){return 13==a},isEscape:function(a){return 27==a},isTyping:function(a){return 47<a&&58>a||95<a&&112>a||
64<a&&91>a||185<a&&193>a||218<a&&223>a||32==a||13==a}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoManager.js' */
define("wiki-edit/UndoManager",["jira/backbone-1.3.3","underscore-1.8.3"],function(d,c){var b=function(){this._undoStack=[];this._redoStack=[];this._current=void 0;c.extend(this,d.Events)};b.EventTypes=b.prototype.EventTypes={UNDO:"UndoManager:undo",REDO:"UndoManager:redo",CLEAR:"UndoManager:clear",PUSH:"UndoManager:push",UPDATE_CURRENT:"UndoManager:updateCurrent"};b.prototype.MAX_STACK=1E3;b.prototype.updateCurrent=function(a,e){a!=this._current&&(this._current=a,e||(this._redoStack.length=0),this.trigger(this.EventTypes.UPDATE_CURRENT))};
b.prototype.push=function(a){this._redoStack.length=0;this._undoStack.length&&c.isEqual(a,this._undoStack[this._undoStack.length-1])||(this._undoStack.push(a),this._current=a);this._undoStack.length>this.MAX_STACK&&this._undoStack.splice(0,this._undoStack.length-this.MAX_STACK);this.trigger(this.EventTypes.PUSH)};b.prototype.undo=function(){if(this.canUndo()){do var a=this._undoStack.pop();while(c.isEqual(a,this._current)&&this.canUndo());this._redoStack.push(this._current);this._current=a;this.trigger(this.EventTypes.UNDO);
return a}};b.prototype.redo=function(){if(this.canRedo()){var a=this._redoStack.pop();this._undoStack.push(this._current);this._current=a;this.trigger(this.EventTypes.REDO);return a}};b.prototype.canUndo=function(){return!!this._undoStack.length};b.prototype.canRedo=function(){return!!this._redoStack.length};b.prototype.clear=function(){this._undoStack=[];this._redoStack=[];this.trigger(this.EventTypes.CLEAR)};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/UndoableTextarea.js' */
define("wiki-edit/UndoableTextarea",["wiki-edit/UndoManager","wiki-edit/KeyTester","jquery"],function(h,k,l){function d(b,a){if("cut-paste"===a||e!=a)"newline"!=e&&b.recordHistoryItem(),e=a}function g(b,a){b.undoManager["can"+a[0].toUpperCase()+a.substring(1)]()&&(a=b.undoManager[a](),b.element.value=a.value,b.element.selectionStart=a.selectionStart,b.element.selectionEnd=a.selectionEnd)}var e="",c=function(b){this.element=b;this.$el=l(b);this.undoManager=new h;this.undoManager.updateCurrent(this.getValue());
this.undoManager.push(this.getValue());b=function(a){var f=a.keyCode,m=String.fromCharCode(f);if(f)if(!a.ctrlKey&&!a.metaKey)this.undoManager.updateCurrent(this.getValue()),d(this,k.getActionType(f));else{if((a.ctrlKey||a.metaKey)&&!a.altKey)switch(m.toLowerCase()){case "y":this.undoManager.updateCurrent(this.getValue(),!0);this.redo();a.preventDefault();break;case "z":this.undoManager.updateCurrent(this.getValue(),!0),a.shiftKey?this.redo():this.undo(),a.preventDefault()}}else this.undoManager.updateCurrent(this.getValue()),
d(this,"other")}.bind(this);this.$el.on("keydown",b);this.$el.on("paste cut",function(){this.undoManager.updateCurrent(this.getValue());d(this,"cut-paste")}.bind(this))};c.prototype.getValue=function(){return{value:this.element.value,selectionStart:this.element.selectionStart,selectionEnd:this.element.selectionEnd}};c.prototype.updateCurrent=function(){this.undoManager.updateCurrent(this.getValue())};c.prototype.recordHistoryItem=function(){this.undoManager.push(this.getValue())};c.prototype.undo=
function(){d(this,"undo");g(this,"undo");this.element.scrollTop=this.element.scrollHeight};c.prototype.redo=function(){g(this,"redo");this.element.scrollTop=this.element.scrollHeight};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/TextareaManipulator.js' */
define("wiki-edit/TextareaManipulator",function(){var e=function(a){this.el=a};e.prototype.NEW_LINE_TOKEN="\n";e.prototype.getSelection=function(){return{start:this.el.selectionStart,end:this.el.selectionEnd,length:this.el.selectionEnd-this.el.selectionStart,text:this.el.value.substring(this.el.selectionStart,this.el.selectionEnd)}};e.prototype.setSelection=function(a,d){1===arguments.length&&(d=a);this.el.selectionStart=a;this.el.selectionEnd=d};e.prototype.replaceSelectionWith=function(a,d){var c=
this.el.selectionStart,b=this.el.value;this.el.value=b.substring(0,this.el.selectionStart)+a+b.substring(this.el.selectionEnd,b.length);this.el.selectionEnd=c+a.length;this.el.selectionStart=d?c:this.el.selectionEnd};e.prototype.wrapSelectionWith=function(a,d,c){3>arguments.length&&(c="");1===arguments.length&&(d=a);var b=this.getSelection(),f=this.el.value;if(f.substring(b.start-a.length,b.start)!==a||f.substring(b.end,b.end+d.length)!==d){var g=f.substring(b.start,b.end);0==g.length&&(g=c);this.el.value=
f.substring(0,b.start)+a+g+d+f.substring(b.end,f.length);b=b.start+a.length;this.setSelection(b,b+g.length)}};e.prototype._getSelectedLines=function(){var a=this.el.value,d=this.getSelection(),c=a.substring(0,d.start).split(this.NEW_LINE_TOKEN).length-1;d=c+a.substring(d.start,d.end).split(this.NEW_LINE_TOKEN).length-1;return{lines:a.split(this.NEW_LINE_TOKEN),start:c,end:d}};e.prototype.getLineAtCursor=function(){var a=this._getSelectedLines();return a.lines[a.end]};e.prototype.getFirstLineMatch=
function(a){var d=this._getSelectedLines();if(a=d.lines[d.start].match(a))return a[0]};e.prototype.areSelectedLinesPrefixed=function(a){var d=this._getSelectedLines(),c;for(c=d.start;c<=d.end;c++)if(0==d.lines[c].indexOf(a))return!0;return!1};e.prototype.prefixSelectedLines=function(a){var d=this.getSelection(),c=this._getSelectedLines(),b,f=0,g=!0;for(b=c.start;b<=c.end;b++)0==c.lines[b].indexOf(a)?b==c.start&&(g=!1):(f+=1,c.lines[b]=a+c.lines[b]);this.el.value=c.lines.join(this.NEW_LINE_TOKEN);
this.setSelection(d.start+(g?a.length:0),d.end+a.length*f)};e.prototype.unprefixSelectedLines=function(a){var d=this.getSelection(),c=this._getSelectedLines(),b,f=!1,g=0;for(b=c.start;b<=c.end;b++)0==c.lines[b].indexOf(a)&&(g+=1,c.lines[b]=c.lines[b].substring(a.length),b==c.start&&(f=!0));this.el.value=c.lines.join(this.NEW_LINE_TOKEN);this.setSelection(d.start-(f?a.length:0),d.end-a.length*g)};return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/keymaster-setup.js' */
define("wiki-edit/keymaster-setup",["jquery","wiki-edit/keymaster"],function(c,b){return{init:function(){b.filter=function(a){return(a=a.target||a.srcElement||!1)&&-1<(" "+a.className+" ").indexOf(" wiki-textfield ")&&(a=c(a).data("wikiEditor"))?(b.setScope(a.id),!0):!1}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEnabledTextarea.js' */
(k=>{k.set('jira.wiki.editor.operation.bold.placeholder','\u0430\u043a\u0446\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.cite.placeholder','\u0446\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435');k.set('jira.wiki.editor.operation.color.placeholder','\u0446\u0432\u0435\u0442\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.italic.placeholder','\u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.link.anchor.placeholder','\u044f\u043a\u043e\u0440\u044c');k.set('jira.wiki.editor.operation.link.external.placeholder','\u043f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a');k.set('jira.wiki.editor.operation.noFormat.placeholder','\u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0435 _\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435_ *\u043d\u0435* \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f');k.set('jira.wiki.editor.operation.panel.placeholder','\u041d\u0435\u043a\u0438\u0439 \u0442\u0435\u043a\u0441\u0442 \u0441 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c');k.set('jira.wiki.editor.operation.panel.placeholder.title','\u041c\u043e\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a');k.set('jira.wiki.editor.operation.preformatted.placeholder','\u043c\u043e\u043d\u043e\u0448\u0438\u0440\u0438\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.quote.block.placeholder','\u0446\u0438\u0442\u0438\u0440\u0443\u0435\u043c\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.strikethrough.placeholder','\u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.subscript.placeholder','\u043f\u043e\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.superscript.placeholder','\u043d\u0430\u0434\u0441\u0442\u0440\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.table.placeholder.column','\u0421\u0442\u043e\u043b\u0431\u0435\u0446');k.set('jira.wiki.editor.operation.table.placeholder.heading','\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a');k.set('jira.wiki.editor.operation.underline.placeholder','\u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439 \u0442\u0435\u043a\u0441\u0442');k.set('jira.wiki.editor.operation.userMention.placeholder','\u0423\u043f\u043e\u043c\u044f\u043d\u0438\u0442\u0435 \u043a\u043e\u0433\u043e-\u043d\u0438\u0431\u0443\u0434\u044c, \u043d\u0430\u0431\u0440\u0430\u0432 \u0435\u0433\u043e \u0438\u043c\u044f\u2026');})(WRM.I18n.km);
define("wiki-edit/WikiEnabledTextarea","jira/util/formatter underscore wiki-edit/TextareaManipulator wiki-edit/UndoableTextarea wiki-edit/keymaster wiki-edit/keymaster-setup wiki-edit/SpeechRecognition jquery".split(" "),function(a,p,q,r,t,k,u,v){k.init();var n=0,w=/^[#\*]+ /;k=function(b){this.el=b;this.$el=v(b);if(this.$el.data("wikiEditor"))return this.$el.data("wikiEditor");this.id="wikiEdit"+n;n+=1;this.manipulationEngine=new q(this.el);this.undoRedoEl=new r(b);var f=this;t("enter",f.id,function(l){var c=
f.manipulationEngine.getSelection(),e=f.manipulationEngine.getFirstLineMatch(w);e&&(0==c.length&&f.manipulationEngine.getLineAtCursor()===e?f.manipulationEngine.unprefixSelectedLines(e):f.manipulationEngine.replaceSelectionWith("\n"+e),l.preventDefault())});this.$el.data("wikiEditor",this);this.$el.addClass("wiki-editor-initialised")};a={bold:["*","*",a.I18n.getText("jira.wiki.editor.operation.bold.placeholder")],italic:["_","_",a.I18n.getText("jira.wiki.editor.operation.italic.placeholder")],underline:["+",
"+",a.I18n.getText("jira.wiki.editor.operation.underline.placeholder")],"delete":["-","-",a.I18n.getText("jira.wiki.editor.operation.strikethrough.placeholder")],superscript:["^","^",a.I18n.getText("jira.wiki.editor.operation.superscript.placeholder")],subscript:["~","~",a.I18n.getText("jira.wiki.editor.operation.subscript.placeholder")],monospace:["{{","}}",a.I18n.getText("jira.wiki.editor.operation.preformatted.placeholder")],cite:["??","??",a.I18n.getText("jira.wiki.editor.operation.cite.placeholder")],
"block-quote":["{quote}","{quote}",a.I18n.getText("jira.wiki.editor.operation.quote.block.placeholder")],color:["{color:$1}","{color}",a.I18n.getText("jira.wiki.editor.operation.color.placeholder"),"red"],link:["[","|http://example.com]",a.I18n.getText("jira.wiki.editor.operation.link.external.placeholder")],"link-anchor":["[#","]",a.I18n.getText("jira.wiki.editor.operation.link.anchor.placeholder")],"link-mail":["[mailto:","]","mail@example.com"],image:["!","!","http://example.com/image.png"],mention:["@",
"",a.I18n.getText("jira.wiki.editor.operation.userMention.placeholder")],code:["\n{code:java}\n","\n{code}\n","// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],noformat:["\n{noformat}\n","\n{noformat}\n",a.I18n.getText("jira.wiki.editor.operation.noFormat.placeholder")],panel:["\n{panel:title\x3d"+a.I18n.getText("jira.wiki.editor.operation.panel.placeholder.title")+"}\n","\n{panel}\n",a.I18n.getText("jira.wiki.editor.operation.panel.placeholder")],table:["\n||"+a.I18n.getText("jira.wiki.editor.operation.table.placeholder.heading")+
" 1||"+a.I18n.getText("jira.wiki.editor.operation.table.placeholder.heading")+" 2||\n|","|"+a.I18n.getText("jira.wiki.editor.operation.table.placeholder.column")+" A2|\n",a.I18n.getText("jira.wiki.editor.operation.table.placeholder.column")+" A1"]};a["monospace-inline"]=a.monospace;for(var h in a)k.prototype[h]=function(b,f){var l=0;3<b.length&&(l=b.length-3);return function(){var c=b[0],e=b[1],x=b[2],d;for(d=1;d<=l;d++)c=c.replace("$"+d,arguments[d-1]||b[2+d]),e=e.replace("$"+d,arguments[d-1]||b[2+
d]);d=this.el.value;var g=this.manipulationEngine.getSelection();this.undoRedoEl.recordHistoryItem();d.substring(g.start-c.length,g.start)===c&&d.substring(g.end,g.end+e.length)===e?(this.el.value=d.substring(0,g.start-c.length)+d.substring(g.start,g.end)+d.substring(g.end+e.length,d.length),this.manipulationEngine.setSelection(g.start-c.length,g.end-c.length)):this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine,c,e,x);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}}(a[h],
h);var m={paragraph:"","bullet-list":"* ","numbered-list":"# ",h1:"h1. ",h2:"h2. ",h3:"h3. ",h4:"h4. ",h5:"h5. ",h6:"h6. ","paragraph-quote":"bq. "};for(h in m)k.prototype[h]=function(b){return function(){this.undoRedoEl.recordHistoryItem();for(var f in m)this.manipulationEngine.areSelectedLinesPrefixed(m[f])&&this.manipulationEngine.unprefixSelectedLines(m[f]);this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine,b);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}}(m[h]);
a={hr:"\n----\n",":)":":)",":(":":(",":P":":P",":D":":D",";)":";)","(y)":"(y)","(n)":"(n)","(i)":"(i)","(/)":"(/)","(x)":"(x)","(!)":"(!)","(+)":"(+)","(-)":"(-)","(?)":"(?)","(on)":"(on)","(off)":"(off)","(*)":"(*)","(*r)":"(*r)","(*g)":"(*g)","(*b)":"(*b)","(*y)":"(*y)","(flag)":"(flag)","(flagoff)":"(flagoff)","image-attachment":[" !$1|thumbnail! ","attachment-name.jpg"],"image-attachment-full":[" !$1! ","attachment-name.gif"],"link-attachment":[" [^$1] ","attachment-name.zip"]};for(h in a)k.prototype[h]=
function(b){var f=0;if(p.isArray(b)){f=b.length-1;var l=b.slice(1);b=b[0]}return function(){var c,e=b;for(c=1;c<=f;c++)e=b.replace("$"+c,arguments[c-1]||l[c-1]);this.undoRedoEl.recordHistoryItem();this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine,e,!1);this.undoRedoEl.recordHistoryItem();this.$el.trigger("input")}}(a[h]);k.prototype.speech=function(){u.start(this)};return k});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditor.js' */
define("wiki-edit/WikiEditor","wiki-edit/WikiEnabledTextarea jquery underscore wiki-edit/keymaster wiki-edit/analytics wiki-edit/WikiEditorUtil wiki-edit/editor/templates jira/util/assistive jira/util/navigator jira/util/events jira/util/events/types jira/editor/constants jira/editor/height-helper-heights wrm/data wiki-edit/thumbnails wiki-edit/attachment-list-util wiki-edit/TextareaManipulator wiki-edit/PhantomCaret".split(" "),function(O,e,P,I,m,Q,R,S,T,E,U,x,V,W,C,X,Y,F){function A(f){f=e(f).closest(".aui-dropdown2");
f.length&&f[0].hide()}function Z(f){var k=document.createElement("div");k.setAttribute("id","dummy-node");const c=window.getComputedStyle(f,"");if(""!==c.cssText)k.style.cssText=c.cssText;else{const g="width max-width font-size font-weight line-height letter-spacing white-space padding padding-top padding-left padding-right box-sizing".split(" ");k.style.cssText=Object.values(c).reduce((n,p)=>g.includes(p)?`${n}${p}:${c.getPropertyValue(p)};`:n,"")}var h=(new Y(f)).getSelection();k.textContent=f.value.slice(0,
h.start===h.end?h.end:h.start);document.body.appendChild(k);h=k.getBoundingClientRect();k.remove();k=0===f.value.length?0:parseInt(c.lineHeight);return{top:h.height-f.scrollTop-k,height:k}}var aa=W.claim("com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"),J="Ctrl";T.isMac()&&(J="");var K=function(f){return f.match(/\.(bmp|gif|jpg|jpeg|pjpeg|png|tiff|webp)$/i)?"image":"file"},L=function(f,k,c,h,g){if(!f.$el.triggerHandler(x.EVENT_OPERATION_ATTACHMENT,{name:k,type:c,thumbnailable:h,
href:g}))if("image"==c){if(h)f["image-attachment"](k);else f["image-attachment-full"](k);m.trigger("operation.attachment.image")}else f["link-attachment"](k),m.trigger("operation.attachment.link")};return{_isThumbnailable:C.isThumbnailable,create:function(f){function k(a){a.preventDefault();a.stopPropagation();y=!y;n.toggleClass("wiki-edit-toolbar-compact",y);M.filter(":visible").focus();localStorage.setItem("jira.wikieditor.visibility"+f.name+"."+f.id,y?"true":"false");m.trigger(y?"hide":"show")}
var c=e(f);if(!c.data("wikiEditor")){m.trigger("initialized");var h=new O(f);this.wikiEditor=h;var g=c.parents().toArray().find(function(a){return a.id});g=e(R.renderEditor({editorId:h.id,controlKey:J,helpData:aa,containerSelector:g&&"#"+g.getAttribute("id")}));var n=g.filter(".wiki-edit-toolbar");"webkitSpeechRecognition"in window&&g.find(".wiki-edit-speech-item").removeClass("hidden");c.parent().before(g);var p=0<c.closest(".jira-dialog-core").length||0<c.closest("form#issue-create").length,q=0<
c.closest("#create-issue-dialog").length,t=0<e("#issue-content").length,G=0<c.closest("#addcomment").length,B=g.find(".wiki-edit-operation[title], .aui-dropdown2-trigger[title], .wiki-edit-tooltip");B.each(function(){var a=e(this),b={aria:!1,hideOnClick:!0,hoverable:!1};a.parent().is("li")&&(b.gravity="w");a.tooltip(b)});var D=function(){B.each(function(){e(this).tooltip("hide")})},z=!1;g.filter(".aui-dropdown2").on({"aui-dropdown2-show":function(){z=!0;var a=(a=e(this).closest("#addcomment")[0])?
a.dataset.stickyCommentEnabled:void 0;if("true"===a){{a=V.BOARD_BACKLOG_COMMENT_STICKY_FOOTER.min;const b=c.parent().height(),d=e(this).height();this.dataset.auiAlignment=b<=a&&b<d?"top auto":"bottom auto"}}c.hasClass(x.CLASS_COVER)||c.focus()},"aui-dropdown2-hide":function(){z=!1;D()}});c.on("keydown",function(a){if(z&&a.keyCode===AJS.keyCode.ESCAPE)if(p)E.one("Dialog.beforeHide",function(b){b.preventDefault()});else if(t&&!G)E.one(U.BEFORE_INLINE_EDIT_CANCEL,function(b){b.preventDefault()})});c.on("input click",
function(a){a=a.target;if("true"!==a.dataset.richEditorActive){var {top:b,height:d}=Z(a);F.setPhantomCaretPosition(b);F.setCaretHeight(d);F.mountPhantomCaret(a.closest(".wiki-edit-content"))}});var l=g.filter(".wiki-edit-dropdown-image, .wiki-edit-dropdown-attachment"),u=l.find(".wiki-edit-insert-image, .wiki-edit-insert-attachment"),r=l.find(".wiki-edit-insert-image ul, .wiki-edit-insert-attachment ul");r.on("click","a",function(a){a.preventDefault();A(a.target);a=e(this).attr("data-attachment-type");
"undefined"===typeof a&&(a="file");var b=e(this).find(".wiki-edit-attachment-name").text(),d=C.isThumbnailable(b,e(this));L(h,b,a,d,e(this).attr("data-attachment-href"))});l.on("aui-dropdown2-show",function(){X.buildAttachmentLinks(r,u,p,q,t)});if(0>Q.compareVersion(AJS.version,"5.8.0"))l.on("aui-dropdown2-item-selected",function(){var a=e(this).find(".aui-dropdown2-active");if("object"===typeof a){var b=a.closest("div");if("object"===typeof b){var d=b.offset().top,N=d+b.height(),H=a.offset().top;
a=H+a.height();H<d&&b.scrollTop(b.scrollTop()-(d-H));a>N&&b.scrollTop(b.scrollTop()+(a-N))}}});g.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown",function(a){a.preventDefault()});g.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function(){var a=e(this),b=function(d){d&&(d.preventDefault&&d.preventDefault(),A(d.target),h.$el.triggerHandler(x.EVENT_OPERATION,a.data("operation"))||(c.focus(),h[a.data("operation")](),m.trigger("operation",{name:a.data("operation"),nameHash:m.hashCode(a.data("operation")),
trigger:d.type}),m.trigger("operation."+a.data("operation"),{trigger:d.type})))};a.click(b);a.keydown(function(d){if("Enter"===d.key||" "===d.key)b(d),a.focus()});a.data("shortcut")&&I(a.data("shortcut"),h.id,b)});g.find(".wiki-edit-operation-color").each(function(){var a=e(this),b=function(d){d&&(d.preventDefault&&d.preventDefault(),A(d.target),h.$el.triggerHandler(x.EVENT_OPERATION_COLOR,a.data("color"))||(c.focus(),h[a.data("operation")](a.data("color")),m.trigger("operation",{name:a.data("operation"),
nameHash:m.hashCode(a.data("operation")),trigger:d.type}),m.trigger("operation."+a.data("operation"),{trigger:d.type})))};a.click(b);a.keydown(function(d){if("Enter"===d.key||" "===d.key)b(d),a.focus()});a.data("shortcut")&&I(a.data("shortcut"),h.id,b)});l=window.localStorage.getItem("jira.wikieditor.last.color")?window.localStorage.getItem("jira.wikieditor.last.color"):"red";var v=g.find(".wiki-edit-operation-color");v.data("color",l);var w=n.find(".wiki-edit-color-indicator");w.css("background-color",
l);l=g.filter(".wiki-edit-color-picker");l.on("click","a",function(a){a.preventDefault();A(a.target);a=e(this).data("color");v.data("color",a);w.css("background-color",a);window.localStorage.setItem("jira.wikieditor.last.color",a);h.$el.triggerHandler(x.EVENT_OPERATION_COLOR,a)||(c.focus(),h.color(a),m.trigger("operation",{name:"color"}),m.trigger("operation.color.picked",{color:a}))});l.on("aui-dropdown2-show",function(){v.addClass("active")});l.on("aui-dropdown2-hide",function(){v.removeClass("active")});
var M=g.find(".wiki-edit-visible-toggle"),y="true"===localStorage.getItem("jira.wikieditor.visibility"+f.name+"."+f.id);y&&n.addClass("wiki-edit-toolbar-compact");M.on("click",k);n.parent().on("click",".wiki-edit-toolbar-compact",k);e(document).on("showWikiPreview",function(a,b){e(b).find(f).length&&n.addClass("hidden")});e(document).on("showWikiInput",function(a,b){e(b).find(f).length&&n.removeClass("hidden")});g=g.find(".aui-toolbar2-inner");S.configureRovingTabindex(g[0])}},initBrowseLink:function(f){var k=
this.wikiEditor,c=this,h=k.$el.parent().parent();e(".wiki-edit-attachment-picker-trigger",h).one("click",function(){c.initBrowseLinkImpl(f,k,h)})},initBrowseLinkImpl:function(f,k,c){var h=k.$el,g=c.find(".wiki-attachment-browse"),n=e("#dnd-metadata-webpanel").data("can-attach"),p=0<h.closest(".jira-dialog-core").length||0<h.closest("form#issue-create").length;if(p){var q=e('#create-issue-dialog:visible,#create-subtask-dialog:visible,#edit-issue-dialog:visible,#create-linked-issue-dialog:visible,#edit-comment:visible,*[id^\x3d"workflow-transition-"][id$\x3d"-dialog"]'),
t=0<q.length;n=0<e(".jira-dialog-core fieldset .file-input-list").length;t||(q=h.closest(".dialog-can-receive-files:visible"),t=0<q.length,n=q.data("can-attach"));var G=q.data("insert-markup-on-browse")}c=c.find(".wiki-edit-attachment-picker-trigger");n&&(p?t:1)?(g.closest("div").removeClass("hidden"),c.removeClass("hidden"),g.data("initialised")||(g.on("click",function(B){B.preventDefault();const D=e("#description-wiki-edit iframe");D&&D.focus();A(B.target);var z=function(){e("#wikiEditorUpload").remove()};
z();var l=e("\x3cinput tabindex\x3d'-1' id\x3d'wikiEditorUpload' type\x3d'file' style\x3d'position: fixed; top: -1px; left: -1px; width: 1px; height: 1px; opacity: 0;' multiple /\x3e");l.appendTo(e("body"));l.change(function(u){z();u=l[0].files;if(p){var r=e.Event("drop");r.dataTransfer={files:u};q.find(".issue-drop-zone__target").trigger(r)}else E.trigger("attachmentForPageReceived",{files:u,isWikiTextfieldFocused:!1,wikiTextfield:f});if(!k.$el.triggerHandler(x.EVENT_OPERATION_ATTACHMENT,P.map(u,
function(w){return{name:w.name,type:K(w.name),thumbnailable:C.isThumbnailable(w.name),href:window.URL.createObjectURL(w)}}))&&(p?G:1))for(r=0;r<u.length;r++){var v=u[r].name;L(k,v,K(v),C.isThumbnailable(v),window.URL.createObjectURL(u[r]))}});l.click();m.trigger("attachment.dropdown.button.clicked.browse")}),g.data("initialised",!0))):(g.closest("div").addClass("hidden"),g=0<e("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content").length,t=p&&t&&("create-issue-dialog"===
q.attr("id")||"create-subtask-dialog"===q.attr("id")),g&&!t||c.addClass("hidden"))}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/WikiEditorUtil.js' */
(k=>{k.set('icons.gif.file','GIF \u0444\u0430\u0439\u043b');k.set('icons.gzip.archive','GZip \u0430\u0440\u0445\u0438\u0432');k.set('icons.html.file','HTML \u0444\u0430\u0439\u043b');k.set('icons.java.archive.file','\u0424\u0430\u0439\u043b \u0430\u0440\u0445\u0438\u0432\u0430 Java');k.set('icons.java.source.file','\u0424\u0430\u0439\u043b \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430 Java');k.set('icons.jpeg.file','JPEG \u0444\u0430\u0439\u043b');k.set('icons.microsoft.excel','Microsoft Excel');k.set('icons.microsoft.powerpoint','Microsoft PowerPoint');k.set('icons.microsoft.word','Microsoft Word');k.set('icons.pdf.file','PDF \u0444\u0430\u0439\u043b');k.set('icons.png.file','PNG \u0444\u0430\u0439\u043b');k.set('icons.text.file','\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b');k.set('icons.xml.file','XML \u0444\u0430\u0439\u043b');k.set('icons.zip.archive','ZIP \u0430\u0440\u0445\u0438\u0432');k.set('jira.wiki.editor.operation.attachment.icon.file','\u0424\u0430\u0439\u043b');})(WRM.I18n.km);
define("wiki-edit/WikiEditorUtil",["wiki-edit/viewissue/templates","jira/util/formatter","jquery","underscore"],function(h,b,l,m){var k={cssClass:"aui-iconfont-devtools-file",title:b.I18n.getText("jira.wiki.editor.operation.attachment.icon.file")},n={pdf:"aui-iconfont-file-pdf",gif:"aui-iconfont-image",png:"aui-iconfont-image",jpeg:"aui-iconfont-image",jpg:"aui-iconfont-image",xml:"aui-iconfont-file-code",html:"aui-iconfont-file-code",htm:"aui-iconfont-file-code",txt:"aui-iconfont-file-txt",zip:"aui-iconfont-file-zip",
gz:"aui-iconfont-file-zip",tar:"aui-iconfont-file-zip",rar:"aui-iconfont-file-zip","7z":"aui-iconfont-file-zip",doc:"aui-iconfont-file-doc",docx:"aui-iconfont-file-doc",xls:"aui-iconfont-file-xls",xlsx:"aui-iconfont-file-xls",xlsm:"aui-iconfont-file-xls",ppt:"aui-iconfont-file-ppt",pptx:"aui-iconfont-file-ppt",java:"aui-iconfont-file-code",c:"aui-iconfont-file-code",h:"aui-iconfont-file-code",cpp:"aui-iconfont-file-code",hpp:"aui-iconfont-file-code",scala:"aui-iconfont-file-code",php:"aui-iconfont-file-code",
css:"aui-iconfont-file-code",less:"aui-iconfont-file-code",soy:"aui-iconfont-file-code",js:"aui-iconfont-file-code",jar:"aui-iconfont-file-zip",war:"aui-iconfont-file-zip",obr:"aui-iconfont-file-zip"},p={pdf:b.I18n.getText("icons.pdf.file"),gif:b.I18n.getText("icons.gif.file"),png:b.I18n.getText("icons.png.file"),jpeg:b.I18n.getText("icons.jpeg.file"),jpg:b.I18n.getText("icons.jpeg.file"),xml:b.I18n.getText("icons.xml.file"),html:b.I18n.getText("icons.html.file"),htm:b.I18n.getText("icons.html.file"),
txt:b.I18n.getText("icons.text.file"),zip:b.I18n.getText("icons.zip.archive"),gz:b.I18n.getText("icons.gzip.archive"),doc:b.I18n.getText("icons.microsoft.word"),docx:b.I18n.getText("icons.microsoft.word"),xls:b.I18n.getText("icons.microsoft.excel"),xlsx:b.I18n.getText("icons.microsoft.excel"),xlsm:b.I18n.getText("icons.microsoft.excel"),ppt:b.I18n.getText("icons.microsoft.powerpoint"),pptx:b.I18n.getText("icons.microsoft.powerpoint"),java:b.I18n.getText("icons.java.source.file"),jar:b.I18n.getText("icons.java.archive.file"),
war:b.I18n.getText("icons.java.archive.file")};return{defaultAttachmentTypeIcon:k,canTranslateMimeTypeToAttachmentTypeIcon:function(){return!!h},translateMimeTypeToAttachmentTypeIcon:function(a){return{cssClass:h.matchFileClass({mimetype:a}),title:h.matchFileIconAlt({mimetype:a})}},translateFileExtensionToAttachmentTypeIcon:function(a){var d=m.clone(k);if("string"!==typeof a)return d;a=a.toLowerCase();a=a.replace(/^\.+/,"");var c=n[a];"string"===typeof c&&(d.cssClass=c);a=p[a];"string"===typeof a&&
(d.title=a);return d},compareVersion:function(a,d){a=a.split(".");var c=d.split("."),e=NaN;l(a).each(function(f,g){if(f>=c.length)return!1;g=Number(g);f=Number(c[f]);if(isNaN(g)||isNaN(f))return e=NaN,!1;if(g<f)return e=-1,!1;if(g>f)return e=1,!1;e=0});return 0==e&&a.length!=c.length?a.length>c.length?1:-1:e},getFileExtension:function(a){return"string"!==typeof a?"":(a=a.match(/\.(\w{1,5})$/i))&&1<a.length?a[1]:""}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = '/js/SpeechRecognition.js' */
(k=>{k.set('jira.wiki.editor.operation.speech.error.general','\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u044f \u0432\u0430\u0441 \u043d\u0435 \u0441\u043b\u044b\u0448\u0443 :(');k.set('jira.wiki.editor.operation.speech.error.network','\u041d\u0435\u0442 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f');k.set('jira.wiki.editor.operation.speech.error.network.body','\u0414\u043b\u044f \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u044f \u0440\u0435\u0447\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435.');k.set('jira.wiki.editor.operation.speech.error.no-speech','\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u044f \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0440\u0430\u0441\u0441\u043b\u044b\u0448\u0430\u043b :(');k.set('jira.wiki.editor.operation.speech.error.no-speech.body','\u0412\u0430\u0448 \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d?');k.set('jira.wiki.editor.operation.speech.error.not-allowed','\u0420\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0447\u0438 \u0432 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u043e');k.set('jira.wiki.editor.operation.speech.error.not-allowed.body','\u0427\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0443, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0435\u0435 \u0437\u043d\u0430\u0447\u043e\u043a \u0432 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430');k.set('jira.wiki.editor.operation.speech.start','\u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c \u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c :)');})(WRM.I18n.km);
define("wiki-edit/SpeechRecognition",["jira/util/formatter","jira/util/data/meta","aui/flag"],function(f,k,l){return{start:function(c,g){var d=this,e=new webkitSpeechRecognition;e.continuous=!1;e.interimResults=!0;e.lang=k.get("user-locale").replace("_","-");e.stop();e.start();e.onstart=function(){d.showTimedMessage({title:f.I18n.getText("jira.wiki.editor.operation.speech.start")},"info",10);c?d.selectionStart=c.manipulationEngine.getSelection().start:g&&(d.selectionStart=g.getSelectionStart(),d.startOffset=
d.selectionStart.startOffset)};e.onresult=function(a){d.dismissCurrentMessage();var b=(b=a.results)&&b[0]&&b[0].isFinal;a=(a=a.results)&&a[0]&&a[0][0]&&a[0][0].transcript||"";a=a.charAt(0).toUpperCase()+a.slice(1);if(c){b&&c.undoRedoEl.recordHistoryItem();c.manipulationEngine.replaceSelectionWith.call(c.manipulationEngine,a,!1);var h=d.selectionStart+a.length;b?(c.manipulationEngine.setSelection(h),c.undoRedoEl.recordHistoryItem(),c.$el.trigger("input")):c.manipulationEngine.setSelection(d.selectionStart,
h)}g&&(g.replaceSelection(a),b||g.setSelectionStartWithOffset(d.selectionStart,d.startOffset));b&&e.stop()};e.onerror=function(a){e.stop();var b={title:f.I18n.getText("jira.wiki.editor.operation.speech.error.general"),body:""};switch(a.error){case "not-allowed":b.title=f.I18n.getText("jira.wiki.editor.operation.speech.error.not-allowed");b.body=f.I18n.getText("jira.wiki.editor.operation.speech.error.not-allowed.body");break;case "network":b.title=f.I18n.getText("jira.wiki.editor.operation.speech.error.network");
b.body=f.I18n.getText("jira.wiki.editor.operation.speech.error.network.body");break;case "no-speech":b.title=f.I18n.getText("jira.wiki.editor.operation.speech.error.no-speech");b.body=f.I18n.getText("jira.wiki.editor.operation.speech.error.no-speech.body");break;case "aborted":return}d.showTimedMessage(b,"warning",5)};e.onend=function(){e.stop()}},showTimedMessage:function(c,g,d){this.dismissCurrentMessage();this.speakFlag=l({type:g,title:c.title,body:c.body,persistent:!0});clearTimeout(this.flagTimer);
this.flagTimer=setTimeout(this.dismissCurrentMessage.bind(this),1E3*d)},dismissCurrentMessage:function(){this.speakFlag&&this.speakFlag.close&&(this.speakFlag.close(),this.speakFlag=null)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = '/js/lib/skate.js' */
define("wiki-edit/skate",["jira/skate"],function(a){return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = '/js/wiki-editor-init.js' */
require("jira/dialog/dialog-register wiki-edit/WikiEditor wiki-edit/skate wiki-edit/PhantomCaret jquery underscore-1.8.3 jira/backbone-1.3.3".split(" "),function(d,g,e,l,b,f,m){function n(a){f.extend(a,m.Events);a=this instanceof Element?this:a;var h=function(c){g.create(c);g.initBrowseLink(c);c.wikiEnabled=!0;b(c).trigger("wiki-editor-initialized");l.mountPhantomCaret(c.closest(".wiki-edit-content"))};!1===a.wikiEnabled&&(b(a).is(":hidden")?f.defer(h,a):h(a))}function p(a){b.contains(document,a)||
f.isFunction(a.trigger)&&a.trigger("detached",a)}function k(){return{type:e.type.CLASSNAME,attached:n,detached:p,prototype:{wikiEnabled:!1}}}e("wiki-textfield",k());e("wiki-enabled-textfield",k());b(function(){0<b("#gh").length&&(d.comment.options.width=810,d.assignIssue.options.width=810,d.attachFile.options.width=810,d.logWork.options.width=810)})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-frontend-plugin:jira-frontend-plugin-runtime', location = 'jira-frontend-plugin.runtime.js' */
!function(e){function r(r){for(var t,i,u=r[0],f=r[1],l=r[2],s=0,p=[];s<u.length;s++)i=u[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(t in f)Object.prototype.hasOwnProperty.call(f,t)&&(e[t]=f[t]);for(c&&c(r);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,r=0;r<a.length;r++){for(var n=a[r],t=!0,u=1;u<n.length;u++){var f=n[u];0!==o[f]&&(t=!1)}t&&(a.splice(r--,1),e=i(i.s=n[0]))}return e}var t={},o={2:0},a=[];function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var r=[];return 0===o[e]?Promise.resolve():o[e]?o[e][2]:(r.push(new Promise((function(r,n){o[e]=[r,n]})),new Promise((function(r,n){WRM.require("wrc!com.atlassian.jira.jira-frontend-plugin:"+e).then(r,n)}))),o[e][2]=Promise.all(r))},i.m=e,i.c=t,i.d=function(e,r,n){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)i.d(n,t,function(r){return e[r]}.bind(null,t));return n},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="",i.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(i.p=AJS.contextPath()+"/download/resources/com.atlassian.jira.jira-frontend-plugin:assets-5f43c26a-23f0-4e1b-aec4-80c7b0fb4b76/");var u=window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb=window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb||[],f=u.push.bind(u);u.push=r,u=u.slice();for(var l=0;l<u.length;l++)r(u[l]);var c=f;n()}([]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-frontend-plugin:split_4', location = '4.6a59abb2598f990acfbc.js' */
(window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb=window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb||[]).push([[4],{24:function(e,n){e.exports=function(e){if(!e.webpackPolyfill){var n=Object.create(e);n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,"exports",{enumerable:!0}),n.webpackPolyfill=1}return n},function(){var e="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(e){var o="undefined"!=typeof __webpack_exports__?__webpack_exports__:n;if(o)if("function"!=typeof o){for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)){var a=void 0;try{a=o[r]}catch(e){continue}e.register(a,r,"/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/node_modules/webpack/buildin/harmony-module.js")}}else e.register(o,"module.exports","/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/node_modules/webpack/buildin/harmony-module.js")}}()}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-frontend-plugin:split_createIssueFormWindowMode', location = 'createIssueFormWindowMode.5a16355c5735c736fdc8.js' */
(window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb=window.atlassianWebpackJsonp79f4a9917f6e490b3932d28908705efb||[]).push([[63],{422:function(e,t,o){"use strict";(function(e){var a;o.d(t,"a",(function(){return i})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var n,r,i=function(e){return e instanceof HTMLElement&&e.classList.contains("aui-button")};(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(i,"isAuiButtonElement","/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/src/main/frontend-features/types/guards/isAuiButtonElement.ts"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}).call(this,o(24)(e))},433:function(e,t,o){"use strict";var a=o(422);o.d(t,"a",(function(){return a.a}));"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;!function(){var e="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(e){var o=void 0!==t?t:exports;if(o)if("function"!=typeof o){for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var n=void 0;try{n=o[a]}catch(e){continue}e.register(n,a,"/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/src/main/frontend-features/types/guards/index.ts")}}else e.register(o,"module.exports","/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/src/main/frontend-features/types/guards/index.ts")}}()},918:function(e,t,o){"use strict";o.r(t);var a=o(433);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;resourcePhaseCheckpoint.interaction.then((function(){var e=document.getElementById("issue-create-submit"),t=document.getElementById("issue-create");t&&Object(a.a)(e)&&t.addEventListener("submit",(function(t){return e.isBusy()?(t.preventDefault(),!1):(e.busy(),!0)}))})),function(){var e="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(e){var o=void 0!==t?t:exports;if(o)if("function"!=typeof o){for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var n=void 0;try{n=o[a]}catch(e){continue}e.register(n,a,"/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/src/main/frontend-features/createIssueFormWindowMode/createIssueForm.ts")}}else e.register(o,"module.exports","/buildeng/bamboo-agent-home/xml-data/build-dir/J914REL-RELEASEFINAL-FBUILDJIRACORE/jira-components/jira-plugins/jira-frontend-plugin/src/main/frontend-features/createIssueFormWindowMode/createIssueForm.ts")}}()}},[[918,2,4]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:analytics', location = 'js/editor-analytics.js' */
define("jira/editor/analytics",["jira/analytics","jira/util/logger"],function(l,g){function h(a,c,b,f){a=c-a;b=b||{};b.time=a;k.sendEvent("editor.instance.perf."+f,b);return a}var k={sendEvent:function(a,c){l.send({name:a,properties:c||{}})},mark:function(a){window.performance.mark&&window.performance.mark(a)},measure:function(a,c,b){window.performance.measure&&window.performance.measure(a,c,b)},oneShotMeasure:function(a,c,b,f){var e=window.performance;if(!e.mark)return g.debug("The browser does not support User Timing API"),
-1;var m=e.now(),d=e.getEntriesByName(a);d=d.length&&d[d.length-1];if(!(d instanceof window.PerformanceMark))return g.debug("The mark has not been found"),-1;"string"!==typeof b&&(b=a.replace(/^rte\-/,""));c=h(d.startTime,m,c,b);f||e.clearMarks(a);return c},startMeasure:function(){var a=window.performance.now();return{measure:function(c,b){return h(a,window.performance.now(),b,c)}}}};return k});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:analytics', location = 'js/editor-analytics-shortcuts.js' */
define("jira/editor/analytics-shortcuts",["jira/editor/analytics","jira/editor/tinymce"],function(a,e){var c=function(b){this.editor=b;b.on("keydown",this._handle.bind(this))};c.prototype._handle=function(b){var d=String.fromCharCode(b.keyCode);if(e.util.VK.metaKeyPressed(b))switch(d){case "B":a.sendEvent("editor.instance.shortcut.bold");break;case "I":a.sendEvent("editor.instance.shortcut.italic");break;case "U":a.sendEvent("editor.instance.shortcut.underline");break;case "Z":a.sendEvent("editor.instance.shortcut.undo");
break;case "Y":a.sendEvent("editor.instance.shortcut.redo");break;case "0":a.sendEvent("editor.instance.shortcut.paragraph");break;case "1":a.sendEvent("editor.instance.shortcut.heading1");break;case "2":a.sendEvent("editor.instance.shortcut.heading2");break;case "8":a.sendEvent("editor.instance.shortcut.code");break;case "9":a.sendEvent("editor.instance.shortcut.quote");break;case "K":a.sendEvent("editor.instance.shortcut.links")}if(b.shiftKey)switch(d){case "2":a.sendEvent("editor.instance.shortcut.mention")}};
return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:registry', location = 'js/api/editor-registry-entry.js' */
define("jira/editor/registry/entry",["underscore-1.8.3","jquery","jira/editor/constants"],function(f,g,h){function d(a,c,k){var e=g.Deferred();this._rteInstance=e;this._editorRegistry=k;this.id=a;this.currentMode=void 0;this.textArea=c;this.toolbar=this._findToolbar(c);this.rteInstance=e.promise()}var b=h.Modes;f.extend(d.prototype,{isVisualMode:function(){return this.currentMode===b.VISUAL},isTextMode:function(){return this.currentMode===b.TEXT},applyIfTextMode:function(a){return this._applyIfMode(b.TEXT,
a)},applyIfVisualMode:function(a){return this._applyIfMode(b.VISUAL,a)},onSwitch:function(a){this._editorRegistry.on("switch::"+this.id,a);return this},onUnregister:function(a){this._editorRegistry.once("unregister::"+this.id,a);return this},onSwitchToText:function(a){this._editorRegistry.on("switch:"+b.TEXT+":"+this.id,a);return this},onSwitchToVisual:function(a){this._editorRegistry.on("switch:"+b.VISUAL+":"+this.id,a);return this},_applyIfMode:function(a,c){this.currentMode===a&&c(this);return this},
_findToolbar:function(a){return a.parentNode.parentNode.querySelector("div.wiki-edit-toolbar")}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:registry', location = 'js/api/editor-registry.js' */
define("jira/editor/registry",["underscore-1.8.3","jira/backbone-1.3.3","jira/editor/constants","jira/editor/registry/entry"],function(e,k,l,f){function g(){this._instances={}}var d=l.Modes;e.extend(g.prototype,k.Events,{getEntry:function(a){return this._instances[a]},_registerTextMode:function(a){if(a){var b=this._getTextAreaId(a);a=new f(b,a,this);this._register(a,d.TEXT)}},_registerVisualMode:function(a){if(a){var b=this._findTextArea(a),h=this._getTextAreaId(b),c=this.getEntry(h);c?(this._resolveRTEInstance(c,
a),this._switchMode(b,d.VISUAL)):(c=new f(h,b,this),this._resolveRTEInstance(c,a),this._register(c,d.VISUAL))}},_findTextArea:function(a){return a.element.getContainer().parent().get(0).querySelector("textarea:last-of-type")},_getTextAreaId:function(a){var b=a.getAttribute("data-editor-id");if(b)return b;b=e.uniqueId((new Date).getTime()+"-");a.setAttribute("data-editor-id",b);return b},_register:function(a,b){a.currentMode=b;this._instances[a.id]=a;this._triggerEvents("register",a)},_resolveRTEInstance:function(a,
b){"resolved"!==a._rteInstance.state()&&b&&a._rteInstance.resolve(b)},_switchMode:function(a,b){a=this._getTextAreaId(a);(a=this.getEntry(a))&&a.currentMode!==b&&(a.currentMode=b,this._triggerEvents("switch",a))},_unregister:function(a){a=this._getTextAreaId(a);var b=this.getEntry(a);b&&(delete this._instances[a],this._triggerEvents("unregister",b))},_triggerEvents:function(a,b){this.trigger(a,b);this.trigger(a+":"+b.currentMode,b);this.trigger(a+":"+b.currentMode+":"+b.id,b);this.trigger(a+"::"+
b.id,b)}});return new g});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.component.nav', location = 'aui.chunk.0b53ee273654dad3b25f--13007772beb360a0b324.js' */
"use strict";(self.webpackChunk_auiRuntime=self.webpackChunk_auiRuntime||[]).push([[8370],{},u=>{u.O(0,[7224,7035,8196,3469,3039,2276,713,4678,7981,4544,113,5260,5192,372],(()=>{return e=4627,u(u.s=e);var e}));u.O()}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:editor-tabs', location = 'js/ui/editor-tabs-soy-amd.js' */
define("jira/editor/ui/editor-tabs-soy-amd",[],function(){return JIRA.Editor.Tabs.Templates});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:editor-tabs', location = 'soy/ui/editor-tabs.soy' */
// This file was automatically generated from editor-tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Tabs.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Tabs == 'undefined') { JIRA.Editor.Tabs = {}; }
if (typeof JIRA.Editor.Tabs.Templates == 'undefined') { JIRA.Editor.Tabs.Templates = {}; }


JIRA.Editor.Tabs.Templates.tabs = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-navgroup aui-navgroup-horizontal editor-toggle-tabs"><div class="aui-navgroup-inner"><div class="aui-navgroup-primary"><ul class="aui-nav">';
  var tabList4 = opt_data.tabs;
  var tabListLen4 = tabList4.length;
  for (var tabIndex4 = 0; tabIndex4 < tabListLen4; tabIndex4++) {
    var tabData4 = tabList4[tabIndex4];
    output += '<li data-mode="' + soy.$$escapeHtml(tabData4.mode) + '"' + ((opt_data.currentMode == tabData4.mode) ? ' class="aui-nav-selected"' : '') + '><button type="button" class="aui-button" aria-pressed="' + ((opt_data.currentMode == tabData4.mode) ? 'true' : 'false') + '" >' + soy.$$escapeHtml(tabData4.text) + '</button></li>';
  }
  output += '</ul></div></div></nav>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Editor.Tabs.Templates.tabs.soyTemplateName = 'JIRA.Editor.Tabs.Templates.tabs';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:editor-tags', location = 'soy/editor-tags.soy' */
// This file was automatically generated from editor-tags.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Tags.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Tags == 'undefined') { JIRA.Editor.Tags = {}; }
if (typeof JIRA.Editor.Tags.Templates == 'undefined') { JIRA.Editor.Tags.Templates = {}; }


JIRA.Editor.Tags.Templates.image = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.source) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '" ' + ((opt_data.width) ? 'width="' + soy.$$escapeHtml(opt_data.width) + '"' : '') + ' ' + ((opt_data.height) ? 'height="' + soy.$$escapeHtml(opt_data.height) + '"' : '') + ' ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.vspace) ? 'vspace="' + soy.$$escapeHtml(opt_data.vspace) + '"' : '') + ' />';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.image.soyTemplateName = 'JIRA.Editor.Tags.Templates.image';
}


JIRA.Editor.Tags.Templates.mentionlink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeUri(opt_data.username) + '" class="user-hover" rel="' + soy.$$escapeHtml(opt_data.username) + '" title="' + soy.$$escapeHtml('\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435') + '">' + soy.$$escapeHtml(opt_data.displayname) + '</a> ';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.mentionlink.soyTemplateName = 'JIRA.Editor.Tags.Templates.mentionlink';
}


JIRA.Editor.Tags.Templates.attachedImage = function(opt_data, opt_ignored) {
  return '<img style="border: 0px solid black" src="' + soy.$$escapeHtml(opt_data.source) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '">';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.attachedImage.soyTemplateName = 'JIRA.Editor.Tags.Templates.attachedImage';
}


JIRA.Editor.Tags.Templates.attachedFile = function(opt_data, opt_ignored) {
  return '<span class="nobr"><a title="' + soy.$$escapeHtml(opt_data.title) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" data-filename="' + soy.$$escapeHtml(opt_data.filename) + '">' + soy.$$escapeHtml(opt_data.filename) + '<sup><img class="rendericon" width="7" height="7" border="0" align="absmiddle" alt="" src="/jira/images/icons/link_attachment_7.gif"></sup></a></span>';
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.attachedFile.soyTemplateName = 'JIRA.Editor.Tags.Templates.attachedFile';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toggle', location = 'js/ui/editor-toggle-tabs.js' */
(k=>{k.set('jira.editor.toggle.mode.text','\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439 \u0440\u0435\u0436\u0438\u043c');k.set('jira.editor.toggle.mode.visual','\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c');k.set('jira.editor.toggle.text','\u0422\u0435\u043a\u0441\u0442');k.set('jira.editor.toggle.visual','\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439');})(WRM.I18n.km);
define("jira/editor/ui/toggle-tabs","jira/editor/constants jira/editor/analytics jira/editor/toggle jira/editor/ui/editor-tabs-soy-amd jira/lib/class jira/backbone-1.3.3 underscore jquery".split(" "),function(h,f,g,k,l,m,n,b){var d=h.Modes;return l.extend({init:function(a){this.$parent=b(a).parent(".wiki-edit-content");this.rendered=new b.Deferred;g.getMode().always(function(c){this.renderTabs(c)}.bind(this));this.hideTooltip=n.debounce(this.hideTooltip,750)},renderTabs:function(a){this.activeMode=
a;this.$tabs=b(k.tabs({tabs:[{text:AJS.I18n.getText("jira.editor.toggle.visual"),url:"#",mode:d.VISUAL},{text:AJS.I18n.getText("jira.editor.toggle.text"),url:"#",mode:d.TEXT}],currentMode:a}));this.$tabs.appendTo(this.$parent).find("button").on("click",this.onTabSelect.bind(this));this.$tooltip=b(aui.labels.label({text:"",extraClasses:"editor-toggle-tooltip"})).appendTo(this.$parent);this.rendered.resolve(this.$tabs);a=document.querySelector("span.aui-label.editor-toggle-tooltip");a.role="status";
a.ariaLive="polite"},onTabSelect:function(a){a.preventDefault();(a=b(a.target).parent().data("mode"))&&a!==this.activeMode&&(this._setModeInternal(a),this.trigger("change",a),g.setMode(a),f.sendEvent("editor.instance.switch.change"),f.sendEvent("bundled.editor.instance.switch.change"))},getMode:function(){var a=new b.Deferred;this.rendered.done(function(c){(c=c.find(".aui-nav-selected").data("mode"))?a.resolve(c):a.reject()}.bind(this));return a.promise()},setMode:function(a){this.rendered.done(function(){this._setModeInternal(a)}.bind(this))},
enable:function(){this.$tabs.removeClass("rte-tabs-disabled").find("button").removeAttr("tabindex")},disable:function(){this.$tabs.addClass("rte-tabs-disabled").find("button").attr("tabindex",-1)},showTooltip:function(a){a=a===d.VISUAL?AJS.I18n.getText("jira.editor.toggle.mode.visual"):AJS.I18n.getText("jira.editor.toggle.mode.text");this.$tooltip.text(a).addClass("visible")},hideTooltip:function(){this.$tooltip.removeClass("visible")},isVisible:function(){if(this.$tabs){var a=this.$tabs[0].getBoundingClientRect();
return a&&b(document.elementFromPoint(a.left+a.width/2,a.top+a.height/2)).parents().is(this.$tabs)}},_setModeInternal:function(a){this.$tabs.find("li").each(function(c,e){b(e).data("mode")===a?b(e).addClass("aui-nav-selected").find("button").attr("aria-pressed","true"):b(e).removeClass("aui-nav-selected").find("button").attr("aria-pressed","false")});this.activeMode=a;this.showTooltip(a);this.hideTooltip()}}).extend(m.Events)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toggle', location = 'js/editor-toggle.js' */
define("jira/editor/toggle",["jira/featureflags/feature-manager","jira/editor/constants","jira/data/session-storage","jquery"],function(k,l,g,f){var m=!k.isFeatureEnabled("jira.richeditor.enable-rte.optional"),h=l.Modes,e={setProperty:function(a,c){if(c===g.getItem(a))return(new f.Deferred).resolve(c);g.setItem(a,c);var b=new f.Deferred;e.fetchProperty(a).always(function(d){if(c===d)b.resolve(d);else return f.ajax({url:AJS.contextPath()+"/rest/api/2/mypreferences?key\x3d"+a,type:"PUT",contentType:"application/json",
dataType:"json",data:JSON.stringify(c)}).done(b.resolve.bind(b,d)).fail(b.resolve.bind(b,d))});return b},getProperty:function(a,c){var b=new f.Deferred;if(g.getItem(a))return b.resolve(g.getItem(a)).promise();e.fetchProperty(a).done(function(d){b.resolve(d)}).fail(function(){b.reject(c)});c&&b.always(function(d){e.setProperty(a,d)});return b.promise()},fetchProperty:function(a){return f.ajax({url:AJS.contextPath()+"/rest/api/2/mypreferences?key\x3d"+a,type:"GET",contentType:"application/json",dataType:"json"})},
getMode:function(){return e.getProperty("jira.editor.user.mode",m?h.VISUAL:h.TEXT)},setMode:function(a){return e.setProperty("jira.editor.user.mode",a)}};return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:marionette-4.1.2-factory', location = 'factories/marionette/4.1.2/marionette-4.1.2-factory.js' */
/*

 MarionetteJS (Backbone.Marionette)
 ----------------------------------
 v4.1.2

 Copyright (c)2019 Derick Bailey, Muted Solutions, LLC.
 Distributed under MIT license

 http://marionettejs.com
*/
'use strict';(function(f){define("atlassian/libs/factories/marionette-4.1.2",function(){return function(g,c,p){var y={};f(y,c,g,p);return y}})})(function(f,g,c,p){function y(a,b){if(!c.isObject(b))throw new k({message:"Bindings must be an object.",url:"common.html#bindevents"});return C.call(a,b)}function S(a,b){if(!a||!b)return this;this.listenTo(a,y(this,b));return this}function T(a,b){if(!a)return this;if(!b)return this.stopListening(a),this;this.stopListening(a,y(this,b));return this}function U(a,
b){if(!c.isObject(b))throw new k({message:"Bindings must be an object.",url:"common.html#bindrequests"});return C.call(a,b)}function V(a,b){if(!a||!b)return this;a.reply(U(this,b),this);return this}function W(a,b){if(!a)return this;if(!b)return a.stopReplying(null,null,this),this;a.stopReplying(U(this,b));return this}function D(a,b,d){a._getImmediateChildren&&c.each(a._getImmediateChildren(),function(a){d(a)&&a.triggerMethod(b,a)})}function ka(a){return!a._isAttached}function la(a){return a._isAttached?
!1:a._isAttached=!0}function ma(a){return a._isAttached}function na(a){a._isAttached=!1;return!0}function X(a){a._isAttached&&a._isRendered&&a.triggerMethod("dom:refresh",a)}function Y(a){a._isAttached&&a._isRendered&&a.triggerMethod("dom:remove",a)}function oa(){D(this,"before:attach",ka)}function pa(){D(this,"attach",la);X(this)}function qa(){D(this,"before:detach",ma);Y(this)}function ra(){D(this,"detach",na)}function sa(){Y(this)}function ta(){X(this)}function w(a){a._areViewEventsMonitored||
!1===a.monitorViewEvents||(a._areViewEventsMonitored=!0,a.on({"before:attach":oa,attach:pa,"before:detach":qa,detach:ra,"before:render":sa,render:ta}))}function ua(a,b,d){return d.toUpperCase()}function M(a){var b=a;N[b]||(N[b]="on"+b.replace(va,ua));b=O.call(this,N[b]);var d;c.isFunction(b)&&(d=b.apply(this,c.drop(arguments)));this.trigger.apply(this,arguments);return d}function Z(a,b,d){return c.reduce(b,function(b,d){if(d.behaviorClass)var e=d.behaviorClass;else if(c.isFunction(d))e=d,d={};else throw new k({message:"Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options",
url:"marionette.behavior.html#defining-and-attaching-behaviors"});e=new e(d,a);b.push(e);return Z(a,c.result(e,"behaviors"),b)},d)}function z(a){return!!aa[a]}function ba(a,b){return aa[a]=b}function wa(a,b){c.isString(b)&&(b={event:b});var d=b.event,e=!!b.preventDefault;z("triggersPreventDefault")&&(e=!1!==b.preventDefault);var h=!!b.stopPropagation;z("triggersStopPropagation")&&(h=!1!==b.stopPropagation);return function(b){e&&b.preventDefault();h&&b.stopPropagation();for(var c=arguments.length,
f=Array(1<c?c-1:0),g=1;g<c;g++)f[g-1]=arguments[g];a.triggerMethod.apply(a,[d,a,b].concat(f))}}function t(a){return a instanceof g.$?a:g.$(a)}function P(a){this.prototype.Dom=c.extend({},this.prototype.Dom,a);return this}function ca(a){a._isRendered||(a.supportsRenderLifecycle||a.triggerMethod("before:render",a),a.render(),a._isRendered=!0,a.supportsRenderLifecycle||a.triggerMethod("render",a))}function da(a,b){a.destroy?(a._disableDetachEvents=b,a.destroy()):(a.supportsDestroyLifecycle||a.triggerMethod("before:destroy",
a),(b=a._isAttached&&!b)&&a.triggerMethod("before:detach",a),a.remove(),b&&(a._isAttached=!1,a.triggerMethod("detach",a)),a._isDestroyed=!0,a.supportsDestroyLifecycle||a.triggerMethod("destroy",a))}function ea(a,b){if(a instanceof m)return a;if(c.isString(a))return Q(b,{el:a});if(c.isFunction(a))return Q(b,{regionClass:a});if(c.isObject(a))return Q(b,a);throw new k({message:"Improper region configuration type.",url:"marionette.region.html#defining-regions"});}function Q(a,b){a=c.extend({},a,b);b=
a.regionClass;delete a.regionClass;return new b(a)}function fa(a){this.prototype._renderHtml=a;return this}function xa(a,b){b.currentView&&a.push(b.currentView);return a}function ya(a,b){return b.model&&b.model.get(a)}g=g&&g.hasOwnProperty("default")?g["default"]:g;c=c&&c.hasOwnProperty("default")?c["default"]:c;p=p&&p.hasOwnProperty("default")?p["default"]:p;var n=function(a){return function(b){for(var d=arguments.length,c=Array(1<d?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return a.apply(b,c)}},u=
g.Model.extend,C=function(a){var b=this;if(a)return c.reduce(a,function(a,e,h){c.isFunction(e)||(e=b[e]);e&&(a[h]=e);return a},{})},ha="description fileName lineNumber name message number url".split(" "),k=u.call(Error,{urlRoot:"http://marionettejs.com/docs/v".concat("4.1.2","/"),url:"",constructor:function(a){var b=Error.call(this,a.message);c.extend(this,c.pick(b,ha),c.pick(a,ha));Error.captureStackTrace&&this.captureStackTrace();this.url=this.urlRoot+this.url},captureStackTrace:function(){Error.captureStackTrace(this,
k)},toString:function(){return"".concat(this.name,": ").concat(this.message," See: ").concat(this.url)}}),O=function(a){if(a)return this.options&&void 0!==this.options[a]?this.options[a]:this[a]},E=function(a,b){var d=this;a&&c.each(b,function(b){var c=a[b];void 0!==c&&(d[b]=c)})},va=/(^|:)(\w)/gi,N={},ia={triggerMethod:M},q={normalizeMethods:C,_setOptions:function(a,b){this.options=c.extend({},c.result(this,"options"),a);this.mergeOptions(a,b)},mergeOptions:E,getOption:O,bindEvents:S,unbindEvents:T,
bindRequests:V,unbindRequests:W,triggerMethod:M};c.extend(q,g.Events);var F={_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(a){if(this._isDestroyed)return this;this.triggerMethod("before:destroy",this,a);this._isDestroyed=!0;this.triggerMethod("destroy",this,a);this.stopListening();return this}},G={_initRadio:function(){var a=c.result(this,"channelName");if(a){if(!p)throw new k({message:'The dependency "backbone.radio" is missing.',url:"backbone.radio.html#marionette-integration"});
a=this._channel=p.channel(a);var b=c.result(this,"radioEvents");this.bindEvents(a,b);b=c.result(this,"radioRequests");this.bindRequests(a,b);this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel}},za=["channelName","radioEvents","radioRequests"],A=function(a){this._setOptions(a,za);this.cid=c.uniqueId(this.cidPrefix);this._initRadio();this.initialize.apply(this,arguments)};A.extend=u;c.extend(A.prototype,
q,F,G,{cidPrefix:"mno",initialize:function(){}});var l=c.invokeMap||c.invoke,v={_delegateEntityEvents:function(a,b){a&&(this._modelEvents=c.result(this,"modelEvents"),this.bindEvents(a,this._modelEvents));b&&(this._collectionEvents=c.result(this,"collectionEvents"),this.bindEvents(b,this._collectionEvents))},_undelegateEntityEvents:function(a,b){this._modelEvents&&(this.unbindEvents(a,this._modelEvents),delete this._modelEvents);this._collectionEvents&&(this.unbindEvents(b,this._collectionEvents),
delete this._collectionEvents)},_deleteEntityEventHandlers:function(){delete this._modelEvents;delete this._collectionEvents}},Aa=/^(\S+)\s*(.*)$/,ja=function(a,b){a=a.match(Aa);return"".concat(a[1],".").concat(b," ").concat(a[2])},aa={childViewEventPrefix:!1,triggersStopPropagation:!0,triggersPreventDefault:!0,DEV_MODE:!1},H={_getViewTriggers:function(a,b){var d=this;return c.reduce(b,function(b,c,f){f=ja(f,"trig".concat(d.cid));b[f]=wa(a,c);return b},{})}},Ba=function(a,b){return c.reduce(a,function(a,
c,h){h=I(h,b);a[h]=c;return a},{})},Ca=/@ui\.[a-zA-Z-_$0-9]*/g,I=function(a,b){return a.replace(Ca,function(a){return b[a.slice(4)]})},Da=function(a,b,d){c.each(a,function(e,h){c.isString(e)?a[h]=I(e,b):e&&(h=e[d],c.isString(h)&&(e[d]=I(h,b)))});return a},J={normalizeUIKeys:function(a){var b=this._getUIBindings();return Ba(a,b)},normalizeUIString:function(a){var b=this._getUIBindings();return I(a,b)},normalizeUIValues:function(a,b){var c=this._getUIBindings();return Da(a,c,b)},_getUIBindings:function(){return c.result(this,
"_uiBindings")||c.result(this,"ui")},_bindUIElements:function(){var a=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var b=c.result(this,"_uiBindings");this._ui={};c.each(b,function(b,c){a._ui[c]=a.$(b)});this.ui=this._ui}},_unbindUIElements:function(){var a=this;this.ui&&this._uiBindings&&(c.each(this.ui,function(b,c){delete a.ui[c]}),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(a){return this._ui[a]}},K={createBuffer:function(){return document.createDocumentFragment()},
getDocumentEl:function(a){return a.ownerDocument.documentElement},getEl:function(a){return t(a)},findEl:function(a,b){return t(a).find(b)},hasEl:function(a,b){return a.contains(b&&b.parentNode)},detachEl:function(a){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:t(a)).detach()},replaceEl:function(a,b){if(a!==b){var c=b.parentNode;c&&c.replaceChild(a,b)}},swapEl:function(a,b){if(a!==b){var c=a.parentNode,e=b.parentNode;if(c&&e){var h=b.nextSibling;c.insertBefore(b,a.nextSibling);e.insertBefore(a,
h)}}},setContents:function(a,b){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:t(a)).html(b)},appendContents:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c._$el;e=void 0===e?t(a):e;c=c._$contents;c=void 0===c?t(b):c;e.append(c)},hasContents:function(a){return!!a&&a.hasChildNodes()},detachContents:function(a){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:t(a)).contents().detach()}},r={Dom:K,_isElAttached:function(){return!!this.el&&this.Dom.hasEl(this.Dom.getDocumentEl(this.el),
this.el)},supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(a){this._proxyBehaviorViewProperties();this._buildEventProxies();a=c.extend({},this._getBehaviorEvents(),this._getEvents(a),this._getBehaviorTriggers(),this._getTriggers());g.View.prototype.delegateEvents.call(this,a);return this},
_getEvents:function(a){if(a)return this.normalizeUIKeys(a);if(this.events)return this.normalizeUIKeys(c.result(this,"events"))},_getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return this._getViewTriggers(this,a)}},delegateEntityEvents:function(){this._delegateEntityEvents(this.model,this.collection);this._delegateBehaviorEntityEvents();return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.model,this.collection);this._undelegateBehaviorEntityEvents();
return this},destroy:function(a){if(this._isDestroyed||this._isDestroying)return this;this._isDestroying=!0;var b=this._isAttached&&!this._disableDetachEvents;this.triggerMethod("before:destroy",this,a);b&&this.triggerMethod("before:detach",this);this.unbindUIElements();this._removeElement();b&&(this._isAttached=!1,this.triggerMethod("detach",this));this._removeChildren();this._isDestroyed=!0;this._isRendered=!1;this._destroyBehaviors(a);this._deleteEntityEventHandlers();this.triggerMethod("destroy",
this,a);this._triggerEventOnBehaviors("destroy",this,a);this.stopListening();return this},_removeElement:function(){this.$el.off().removeData();this.Dom.detachEl(this.el,this.$el)},bindUIElements:function(){this._bindUIElements();this._bindBehaviorUIElements();return this},unbindUIElements:function(){this._unbindUIElements();this._unbindBehaviorUIElements();return this},getUI:function(a){return this._getUI(a)},_buildEventProxies:function(){this._childViewEvents=this.normalizeMethods(c.result(this,
"childViewEvents"));this._childViewTriggers=c.result(this,"childViewTriggers");this._eventPrefix=this._getEventPrefix()},_getEventPrefix:function(){var a=z("childViewEventPrefix")?"childview":!1;a=c.result(this,"childViewEventPrefix",a);return!1===a?a:a+":"},_proxyChildViewEvents:function(a){(this._childViewEvents||this._childViewTriggers||this._eventPrefix)&&this.listenTo(a,"all",this._childViewEventHandler)},_childViewEventHandler:function(a){for(var b=this._childViewEvents,c=arguments.length,e=
Array(1<c?c-1:0),h=1;h<c;h++)e[h-1]=arguments[h];b&&b[a]&&b[a].apply(this,e);(b=this._childViewTriggers)&&b[a]&&this.triggerMethod.apply(this,[b[a]].concat(e));this._eventPrefix&&this.triggerMethod.apply(this,[this._eventPrefix+a].concat(e))}};c.extend(r,{_initBehaviors:function(){this._behaviors=Z(this,c.result(this,"behaviors"),[])},_getBehaviorTriggers:function(){var a=l(this._behaviors,"_getTriggers");return c.reduce(a,function(a,d){return c.extend(a,d)},{})},_getBehaviorEvents:function(){var a=
l(this._behaviors,"_getEvents");return c.reduce(a,function(a,d){return c.extend(a,d)},{})},_proxyBehaviorViewProperties:function(){l(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){l(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){l(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(a){l(this._behaviors,"destroy",a)},_removeBehavior:function(a){this._isDestroyed||(this.undelegate(".trig".concat(a.cid," .").concat(a.cid)),
this._behaviors=c.without(this._behaviors,a))},_bindBehaviorUIElements:function(){l(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){l(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(a,b,c){l(this._behaviors,"triggerMethod",a,b,c)}},q,v,{_renderTemplate:function(a){var b=this.mixinTemplateContext(this.serializeData())||{};a=this._renderHtml(a,b);"undefined"!==typeof a&&this.attachElContent(a)},getTemplate:function(){return this.template},mixinTemplateContext:function(a){var b=
c.result(this,"templateContext");return b?a?c.extend({},a,b):b:a},serializeData:function(){if(this.model)return this.serializeModel();if(this.collection)return{items:this.serializeCollection()}},serializeModel:function(){return this.model.attributes},serializeCollection:function(){return c.map(this.collection.models,function(a){return a.attributes})},_renderHtml:function(a,b){return a(b)},attachElContent:function(a){this.Dom.setContents(this.el,a,this.$el)}},H,J);var Ea=["allowMissingEl","parentEl",
"replaceElement"],m=function(a){this._setOptions(a,Ea);this.cid=c.uniqueId(this.cidPrefix);this._initEl=this.el=this.getOption("el");this.el=this.el instanceof g.$?this.el[0]:this.el;this.$el=this._getEl(this.el);this.initialize.apply(this,arguments)};m.extend=u;m.setDomApi=P;c.extend(m.prototype,q,{Dom:K,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,initialize:function(){},show:function(a,b){if(this._ensureElement(b)){a=this._getView(a,b);if(a===this.currentView)return this;
if(a._isShown)throw new k({name:"RegionError",message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});this._isSwappingView=!!this.currentView;this.triggerMethod("before:show",this,a,b);!this.currentView&&a._isAttached||this.empty(b);this._setupChildView(a);this.currentView=a;ca(a);this._attachView(a,b);this.triggerMethod("show",this,a,b);this._isSwappingView=!1;return this}},_getEl:function(a){if(!a)throw new k({name:"RegionError",message:'An "el" must be specified for a region.',
url:"marionette.region.html#additional-options"});return this.getEl(a)},_setEl:function(){this.$el=this._getEl(this.el);this.$el.length&&(this.el=this.$el[0]);1<this.$el.length&&(this.$el=this.Dom.getEl(this.el))},_setElement:function(a){if(a===this.el)return this;var b=this._isReplaced;this._restoreEl();this.el=a;this._setEl();this.currentView&&(a=this.currentView,b?this._replaceEl(a):this.attachHtml(a));return this},_setupChildView:function(a){w(a);this._proxyChildViewEvents(a);a.on("destroy",this._empty,
this)},_proxyChildViewEvents:function(a){var b=this._parentView;b&&b._proxyChildViewEvents(a)},_shouldDisableMonitoring:function(){return this._parentView&&!1===this._parentView.monitorViewEvents},_isElAttached:function(){return this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},_attachView:function(a){var b=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).replaceElement,d=!a._isAttached&&this._isElAttached()&&!this._shouldDisableMonitoring();b="undefined"===typeof b?!!c.result(this,
"replaceElement"):!!b;d&&a.triggerMethod("before:attach",a);b?this._replaceEl(a):this.attachHtml(a);d&&(a._isAttached=!0,a.triggerMethod("attach",a));a._isShown=!0},_ensureElement:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c.isObject(this.el)||this._setEl();if(!this.$el||0===this.$el.length){if("undefined"===typeof a.allowMissingEl?c.result(this,"allowMissingEl"):a.allowMissingEl)return!1;throw new k({name:"RegionError",message:'An "el" must exist in DOM for this region '.concat(this.cid),
url:"marionette.region.html#additional-options"});}return!0},_getView:function(a){if(!a)throw new k({name:"RegionError",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show.",url:"marionette.region.html#showing-a-view"});if(a._isDestroyed)throw new k({name:"RegionError",message:'View (cid: "'.concat(a.cid,'") has already been destroyed and cannot be used.'),url:"marionette.region.html#showing-a-view"});if(a instanceof g.View)return a;a=this._getViewOptions(a);
return new x(a)},_getViewOptions:function(a){return c.isFunction(a)?{template:a}:c.isObject(a)?a:{template:function(){return a}}},getEl:function(a){var b=c.result(this,"parentEl");return b&&c.isString(a)?this.Dom.findEl(b,a):this.Dom.getEl(a)},_replaceEl:function(a){this._restoreEl();a.on("before:destroy",this._restoreEl,this);this.Dom.replaceEl(a.el,this.el);this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var a=this.currentView;a&&(this._detachView(a),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},
isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(a){this.Dom.appendContents(this.el,a.el,{_$el:this.$el,_$contents:a.$el})},empty:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},b=this.currentView;if(!b)return this._ensureElement(a)&&this.detachHtml(),this;this._empty(b,!0);return this},_empty:function(a,b){a.off("destroy",this._empty,this);this.triggerMethod("before:empty",this,a);this._restoreEl();delete this.currentView;a._isDestroyed||
(b?this.removeView(a):this._detachView(a),a._isShown=!1,this._stopChildViewEvents(a));this.triggerMethod("empty",this,a)},_stopChildViewEvents:function(a){this._parentView&&this._parentView.stopListening(a)},destroyView:function(a){if(a._isDestroyed)return a;da(a,this._shouldDisableMonitoring());return a},removeView:function(a){this.destroyView(a)},detachView:function(){var a=this.currentView;if(a)return this._empty(a),a},_detachView:function(a){var b=a._isAttached&&!this._shouldDisableMonitoring(),
c=this._isReplaced;b&&a.triggerMethod("before:detach",a);c?this.Dom.replaceEl(this.el,a.el):this.detachHtml();b&&(a._isAttached=!1,a.triggerMethod("detach",a))},detachHtml:function(){this.Dom.detachContents(this.el,this.$el)},hasView:function(){return!!this.currentView},reset:function(a){this.empty(a);this.el=this._initEl;delete this.$el;return this},_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(a){if(this._isDestroyed)return this;this.triggerMethod("before:destroy",
this,a);this._isDestroyed=!0;this.reset(a);this._name&&this._parentView._removeReferences(this._name);delete this._parentView;delete this._name;this.triggerMethod("destroy",this,a);this.stopListening();return this}});var R={regionClass:m,_initRegions:function(){this.regions=this.regions||{};this._regions={};this.addRegions(c.result(this,"regions"))},_reInitRegions:function(){l(this._regions,"reset")},addRegion:function(a,b){var c={};c[a]=b;return this.addRegions(c)[a]},addRegions:function(a){if(!c.isEmpty(a))return a=
this.normalizeUIValues(a,"el"),this.regions=c.extend({},this.regions,a),this._addRegions(a)},_addRegions:function(a){var b=this,d={regionClass:this.regionClass,parentEl:c.partial(c.result,this,"el")};return c.reduce(a,function(a,c,f){a[f]=ea(c,d);b._addRegion(a[f],f);return a},{})},_addRegion:function(a,b){this.triggerMethod("before:add:region",this,b,a);a._parentView=this;a._name=b;this._regions[b]=a;this.triggerMethod("add:region",this,b,a)},removeRegion:function(a){var b=this._regions[a];this._removeRegion(b,
a);return b},removeRegions:function(){var a=this._getRegions();c.each(this._regions,this._removeRegion.bind(this));return a},_removeRegion:function(a,b){this.triggerMethod("before:remove:region",this,b,a);a.destroy();this.triggerMethod("remove:region",this,b,a)},_removeReferences:function(a){delete this.regions[a];delete this._regions[a]},emptyRegions:function(){var a=this.getRegions();l(a,"empty");return a},hasRegion:function(a){return!!this.getRegion(a)},getRegion:function(a){this._isRendered||
this.render();return this._regions[a]},_getRegions:function(){return c.clone(this._regions)},getRegions:function(){this._isRendered||this.render();return this._getRegions()},showChildView:function(a,b,c){this.getRegion(a).show(b,c);return b},detachChildView:function(a){return this.getRegion(a).detachView()},getChildView:function(a){return this.getRegion(a).currentView}},Fa="behaviors childViewEventPrefix childViewEvents childViewTriggers collectionEvents events modelEvents regionClass regions template templateContext triggers ui".split(" "),
x=g.View.extend({constructor:function(a){this._setOptions(a,Fa);w(this);this._initBehaviors();this._initRegions();g.View.prototype.constructor.apply(this,arguments);this.delegateEntityEvents();this._triggerEventOnBehaviors("initialize",this,a)},setElement:function(){g.View.prototype.setElement.apply(this,arguments);this._isRendered=this.Dom.hasContents(this.el);this._isAttached=this._isElAttached();this._isRendered&&this.bindUIElements();return this},render:function(){var a=this.getTemplate();if(!1===
a||this._isDestroyed)return this;this.triggerMethod("before:render",this);this._isRendered&&this._reInitRegions();this._renderTemplate(a);this.bindUIElements();this._isRendered=!0;this.triggerMethod("render",this);return this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return c.reduce(this._regions,xa,[])}},{setRenderer:fa,setDomApi:P});c.extend(x.prototype,r,R);var L=function(){this._init()};c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce partition".split(" "),
function(a){L.prototype[a]=function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return c[a].apply(c,[this._views].concat(d))}});c.extend(L.prototype,{_init:function(){this._views=[];this._viewsByCid={};this._indexByModel={};this._updateLength()},_add:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._views.length;this._addViewIndexes(a);this._views.splice(b,0,a);this._updateLength()},_addViewIndexes:function(a){this._viewsByCid[a.cid]=a;a.model&&
(this._indexByModel[a.model.cid]=a)},_sort:function(a,b){return"string"===typeof a?(a=c.partial(ya,a),this._sortBy(a)):1===a.length?this._sortBy(a.bind(b)):this._views.sort(a.bind(b))},_sortBy:function(a){a=c.sortBy(this._views,a);this._set(a);return a},_set:function(a,b){this._views.length=0;this._views.push.apply(this._views,a.slice(0));b&&(this._viewsByCid={},this._indexByModel={},c.each(a,this._addViewIndexes.bind(this)),this._updateLength())},_swap:function(a,b){a=this.findIndexByView(a);b=this.findIndexByView(b);
if(-1!==a&&-1!==b){var c=this._views[a];this._views[a]=this._views[b];this._views[b]=c}},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this._indexByModel[a]},findByIndex:function(a){return this._views[a]},findIndexByView:function(a){return this._views.indexOf(a)},findByCid:function(a){return this._viewsByCid[a]},hasView:function(a){return!!this.findByCid(a.cid)},_remove:function(a){this._viewsByCid[a.cid]&&(a.model&&delete this._indexByModel[a.model.cid],
delete this._viewsByCid[a.cid],a=this.findIndexByView(a),this._views.splice(a,1),this._updateLength())},_updateLength:function(){this.length=this._views.length}});var Ga="behaviors childView childViewContainer childViewEventPrefix childViewEvents childViewOptions childViewTriggers collectionEvents emptyView emptyViewOptions events modelEvents sortWithCollection template templateContext triggers ui viewComparator viewFilter".split(" "),B=g.View.extend({sortWithCollection:!0,constructor:function(a){this._setOptions(a,
Ga);w(this);this._initChildViewStorage();this._initBehaviors();g.View.prototype.constructor.apply(this,arguments);this.getEmptyRegion();this.delegateEntityEvents();this._triggerEventOnBehaviors("initialize",this,a)},_initChildViewStorage:function(){this._children=new L;this.children=new L},getEmptyRegion:function(){var a=this.$container||this.$el;if(this._emptyRegion&&!this._emptyRegion.isDestroyed())return this._emptyRegion._setElement(a[0]),this._emptyRegion;this._emptyRegion=new m({el:a[0],replaceElement:!1});
this._emptyRegion._parentView=this;return this._emptyRegion},_initialEvents:function(){this._isRendered||this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(a,b){a=b.merge;var c=b.remove;this.sortWithCollection&&!1!==this.viewComparator&&(b.add||c||a||this.sort())},_onCollectionReset:function(){this._destroyChildren();this._addChildModels(this.collection.models);this.sort()},_onCollectionUpdate:function(a,
b){a=b.changes;b=a.removed.length&&this._removeChildModels(a.removed);this._addedViews=a.added.length&&this._addChildModels(a.added);this._detachChildren(b);this.sort();this._removeChildViews(b)},_removeChildModels:function(a){var b=this;return c.reduce(a,function(a,c){(c=b._removeChildModel(c))&&a.push(c);return a},[])},_removeChildModel:function(a){(a=this._children.findByModel(a))&&this._removeChild(a);return a},_removeChild:function(a){this.triggerMethod("before:remove:child",this,a);this.children._remove(a);
this._children._remove(a);this.triggerMethod("remove:child",this,a)},_addChildModels:function(a){return c.map(a,this._addChildModel.bind(this))},_addChildModel:function(a){a=this._createChildView(a);this._addChild(a);return a},_createChildView:function(a){var b=this._getChildView(a),c=this._getChildViewOptions(a);return this.buildChildView(a,b,c)},_addChild:function(a,b){this.triggerMethod("before:add:child",this,a);this._setupChildView(a);this._children._add(a,b);this.children._add(a,b);this.triggerMethod("add:child",
this,a)},_getChildView:function(a){var b=this.childView;if(!b)throw new k({name:"CollectionViewError",message:'A "childView" must be specified',url:"marionette.collectionview.html#collectionviews-childview"});b=this._getView(b,a);if(!b)throw new k({name:"CollectionViewError",message:'"childView" must be a view class or a function that returns a view class',url:"marionette.collectionview.html#collectionviews-childview"});return b},_getView:function(a,b){if(a.prototype instanceof g.View||a===g.View)return a;
if(c.isFunction(a))return a.call(this,b)},_getChildViewOptions:function(a){return c.isFunction(this.childViewOptions)?this.childViewOptions(a):this.childViewOptions},buildChildView:function(a,b,d){a=c.extend({model:a},d);return new b(a)},_setupChildView:function(a){w(a);a.on("destroy",this.removeChildView,this);this._proxyChildViewEvents(a)},_getImmediateChildren:function(){return this.children._views},setElement:function(){g.View.prototype.setElement.apply(this,arguments);this._isAttached=this._isElAttached();
return this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this);this._destroyChildren();this.collection&&(this._addChildModels(this.collection.models),this._initialEvents());var a=this.getTemplate();a&&(this._renderTemplate(a),this.bindUIElements());this._getChildViewContainer();this.sort();this._isRendered=!0;this.triggerMethod("render",this);return this},_getChildViewContainer:function(){var a=c.result(this,"childViewContainer");this.$container=a?this.$(a):
this.$el;if(!this.$container.length)throw new k({name:"CollectionViewError",message:'The specified "childViewContainer" was not found: '.concat(a),url:"marionette.collectionview.html#defining-the-childviewcontainer"});},sort:function(){this._sortChildren();this.filter();return this},_sortChildren:function(){if(this._children.length){var a=this.getComparator();a&&(delete this._addedViews,this.triggerMethod("before:sort",this),this._children._sort(a,this),this.triggerMethod("sort",this))}},setComparator:function(a){var b=
(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,c=this.viewComparator!==a;this.viewComparator=a;c&&!b&&this.sort();return this},removeComparator:function(a){return this.setComparator(null,a)},getComparator:function(){return this.viewComparator?this.viewComparator:this.sortWithCollection&&!1!==this.viewComparator&&this.collection?this._viewComparator:!1},_viewComparator:function(a){return this.collection.indexOf(a.model)},filter:function(){if(this._isDestroyed)return this;
this._filterChildren();this._renderChildren();return this},_filterChildren:function(){var a=this;if(this._children.length){var b=this._getFilter();if(b){delete this._addedViews;this.triggerMethod("before:filter",this);var d=[],e=[];c.each(this._children._views,function(c,f,g){(b.call(a,c,f,g)?d:e).push(c)});this._detachChildren(e);this.children._set(d,!0);this.triggerMethod("filter",this,d,e)}else this.children._set(this._children._views,this.children.length!==this._children.length)}},_getFilter:function(){var a=
this.getFilter();if(!a)return!1;if(c.isFunction(a))return a;if(c.isObject(a)){var b=c.matches(a);return function(a){return b(a.model&&a.model.attributes)}}if(c.isString(a))return function(b){return b.model&&b.model.get(a)};throw new k({name:"CollectionViewError",message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy',url:"marionette.collectionview.html#defining-the-viewfilter"});},getFilter:function(){return this.viewFilter},setFilter:function(a){var b=
(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).preventRender,c=this.viewFilter!==a;this.viewFilter=a;c&&!b&&this.filter();return this},removeFilter:function(a){return this.setFilter(null,a)},_detachChildren:function(a){c.each(a,this._detachChildView.bind(this))},_detachChildView:function(a){var b=a._isAttached&&!1!==this.monitorViewEvents;b&&a.triggerMethod("before:detach",a);this.detachHtml(a);b&&(a._isAttached=!1,a.triggerMethod("detach",a));a._isShown=!1},detachHtml:function(a){this.Dom.detachEl(a.el,
a.$el)},_renderChildren:function(){this._hasUnrenderedViews&&(delete this._addedViews,delete this._hasUnrenderedViews);var a=this._addedViews||this.children._views;this.triggerMethod("before:render:children",this,a);if(this.isEmpty())this._showEmptyView();else{this._destroyEmptyView();var b=this._getBuffer(a);this._attachChildren(b,a)}delete this._addedViews;this.triggerMethod("render:children",this,a)},_getBuffer:function(a){var b=this,d=this.Dom.createBuffer();c.each(a,function(a){ca(a);a._isShown=
!0;b.Dom.appendContents(d,a.el,{_$contents:a.$el})});return d},_attachChildren:function(a,b){b=this._isAttached&&!1!==this.monitorViewEvents?b:[];c.each(b,function(a){a._isAttached||a.triggerMethod("before:attach",a)});this.attachHtml(a,this.$container);c.each(b,function(a){a._isAttached||(a._isAttached=!0,a.triggerMethod("attach",a))})},attachHtml:function(a,b){this.Dom.appendContents(b[0],a,{_$el:b})},isEmpty:function(){return!this.children.length},_showEmptyView:function(){var a=this._getEmptyView();
if(a){var b=this._getEmptyViewOptions();this.getEmptyRegion().show(new a(b))}},_getEmptyView:function(){var a=this.emptyView;if(a)return this._getView(a)},_destroyEmptyView:function(){var a=this.getEmptyRegion();a.hasView()&&a.empty()},_getEmptyViewOptions:function(){var a=this.emptyViewOptions||this.childViewOptions;return c.isFunction(a)?a.call(this):a},swapChildViews:function(a,b){if(!this._children.hasView(a)||!this._children.hasView(b))throw new k({name:"CollectionViewError",message:"Both views must be children of the collection view to swap.",
url:"marionette.collectionview.html#swapping-child-views"});this._children._swap(a,b);this.Dom.swapEl(a.el,b.el);this.children.hasView(a)!==this.children.hasView(b)?this.filter():this.children._swap(a,b);return this},addChildView:function(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!a||a._isDestroyed)return a;if(a._isShown)throw new k({name:"CollectionViewError",message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});
c.isObject(b)&&(d=b);null!=d.index&&(b=d.index);this._isRendered||this.render();this._addChild(a,b);if(d.preventRender)return this._hasUnrenderedViews=!0,a;d="undefined"!==typeof b;d&&!(b>=this._children.length)||this._hasUnrenderedViews||(this._addedViews=[a]);d?this._renderChildren():this.sort();return a},detachChildView:function(a){this.removeChildView(a,{shouldDetach:!0});return a},removeChildView:function(a,b){if(!a)return a;this._removeChildView(a,b);this._removeChild(a);this.isEmpty()&&this._showEmptyView();
return a},_removeChildViews:function(a){c.each(a,this._removeChildView.bind(this))},_removeChildView:function(a){var b=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shouldDetach;a.off("destroy",this.removeChildView,this);b?this._detachChildView(a):this._destroyChildView(a);this.stopListening(a)},_destroyChildView:function(a){a._isDestroyed||da(a,!1===this.monitorViewEvents)},_removeChildren:function(){this._destroyChildren();this.getEmptyRegion().destroy();delete this._addedViews},_destroyChildren:function(){this._children.length&&
(this.triggerMethod("before:destroy:children",this),!1===this.monitorViewEvents&&this.Dom.detachContents(this.el,this.$el),this._removeChildViews(this._children._views),this._children._init(),this.children._init(),this.triggerMethod("destroy:children",this))}},{setDomApi:P,setRenderer:fa});c.extend(B.prototype,r);var Ha=["collectionEvents","events","modelEvents","triggers","ui"];r=function(a,b){this.view=b;this._setOptions(a,Ha);this.cid=c.uniqueId(this.cidPrefix);this.ui=c.extend({},c.result(this,
"ui"),c.result(b,"ui"));this.listenTo(b,"all",this.triggerMethod);this.initialize.apply(this,arguments)};r.extend=u;c.extend(r.prototype,q,v,H,J,{cidPrefix:"mnb",initialize:function(){},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();this.view._removeBehavior(this);this._deleteEntityEventHandlers();return this},proxyViewProperties:function(){this.$el=this.view.$el;this.el=this.view.el;return this},bindUIElements:function(){this._bindUIElements();
return this},unbindUIElements:function(){this._unbindUIElements();return this},getUI:function(a){return this._getUI(a)},delegateEntityEvents:function(){this._delegateEntityEvents(this.view.model,this.view.collection);return this},undelegateEntityEvents:function(){this._undelegateEntityEvents(this.view.model,this.view.collection);return this},_getEvents:function(){var a=this;if(this.events){var b=this.normalizeUIKeys(c.result(this,"events"));return c.reduce(b,function(b,e,f){c.isFunction(e)||(e=a[e]);
if(!e)return b;f=ja(f,a.cid);b[f]=e.bind(a);return b},{})}},_getTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return this._getViewTriggers(this.view,a)}}});var Ia=["channelName","radioEvents","radioRequests","region","regionClass"];v=function(a){this._setOptions(a,Ia);this.cid=c.uniqueId(this.cidPrefix);this._initRegion();this._initRadio();this.initialize.apply(this,arguments)};v.extend=u;c.extend(v.prototype,q,F,G,{cidPrefix:"mna",initialize:function(){},
start:function(a){this.triggerMethod("before:start",this,a);this.triggerMethod("start",this,a);return this},regionClass:m,_initRegion:function(){var a=this.region;a&&(this._region=ea(a,{regionClass:this.regionClass}))},getRegion:function(){return this._region},showView:function(a){for(var b=this.getRegion(),c=arguments.length,e=Array(1<c?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];b.show.apply(b,[a].concat(e));return a},getView:function(){return this.getRegion().currentView}});q=n(S);F=n(T);G=n(V);H=n(W);
E=n(E);J=n(O);R=n(C);n=n(M);var Ja={View:x,CollectionView:B,MnObject:A,Object:A,Region:m,Behavior:r,Application:v,isEnabled:z,setEnabled:ba,monitorViewEvents:w,Events:ia,extend:u,DomApi:K,VERSION:"4.1.2"};f.Application=v;f.Behavior=r;f.CollectionView=B;f.DomApi=K;f.Events=ia;f.MnObject=A;f.Region=m;f.VERSION="4.1.2";f.View=x;f.bindEvents=q;f.bindRequests=G;f.default=Ja;f.extend=u;f.getOption=J;f.isEnabled=z;f.mergeOptions=E;f.monitorViewEvents=w;f.normalizeMethods=R;f.setDomApi=function(a){B.setDomApi(a);
m.setDomApi(a);x.setDomApi(a)};f.setEnabled=ba;f.setRenderer=function(a){B.setRenderer(a);x.setRenderer(a)};f.triggerMethod=n;f.unbindEvents=F;f.unbindRequests=H;Object.defineProperty(f,"__esModule",{value:!0})});this&&this.Marionette&&(this.Mn=this.Marionette);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:marionette', location = 'js/amd/marionette-amd.js' */
define("jira/editor/marionette",["jira/backbone-1.3.3","underscore-1.8.3","jira/backbone.radio-2.0","atlassian/libs/factories/marionette-4.1.2"],function(a,b,c,d){return d(b,a,c)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'js/ui/button-bar-decorator.js' */
define("jira/editor/ui/button-bar-decorator",["jira/lib/class","jquery"],function(f,c){return f.extend({init:function(){},decorateButtonBars:function(a){var e=function(){var d=c(this);if(!d.find(".wiki-button-bar-content").length){var b=c('\x3cdiv class\x3d"wiki-button-bar-content"\x3e\x3c/div\x3e');d.wrapInner(b);b=c('\x3cdiv class\x3d"tabs-placeholder"\x3e\x3c/div\x3e');b.width(a.width());b.height(a.height());d.prepend(b);d.append(c("\x3cdiv\x3e\x3c/div\x3e").css("clear","both"))}};a.closest(".jira-wikifield").next(".wiki-button-bar").each(e);
a.closest(".inline-edit-fields").nextAll(".save-options").each(e);a.prevAll(".sd-rte-bar").first().each(e);a.parent(".wiki-edit-content").siblings(".sd-rte-bar").each(e)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'js/ui/undo-redo-buttons.js' */
define("jira/editor/ui/undo-redo-buttons",["jira/editor/constants","jira/editor/marionette","jira/util/logger","jira/util/navigator","jquery"],function(d,e,f,g,c){return e.View.extend({tagName:"div",template:function(a){return JIRA.Editor.Tags.Templates.undoRedoButtons({isMac:g.isMac()})},ui:{undo:".wiki-operation-undo",redo:".wiki-operation-redo"},events:{"click @ui.undo":"onUndo","click @ui.redo":"onRedo"},initialize:function(a){this.$container=this.determineButtonsContainer(a.textarea);null===
this.$container?f.warn("Could not attach undo/redo buttons to the editor"):this.undoManager=a.undoManager},enable:function(a){this.undoManager&&(a=a||c([this.ui.undo,this.ui.redo]),a.attr("aria-disabled","false"))},disable:function(a){this.undoManager&&(a=a||c([this.ui.undo,this.ui.redo]),a.attr("aria-disabled","true"))},highlight:function(a){this.undoManager&&(a.addClass("active"),setTimeout(function(){a.removeClass("active")},100))},updateUI:function(a,b){this.undoManager&&(this.updateButton(this.ui.undo,
this.undoManager.hasUndo()),this.updateButton(this.ui.redo,this.undoManager.hasRedo()),d.EventSources.SHORTCUT===b&&(d.EventTypes.UNDO===a?this.highlight(this.ui.undo):d.EventTypes.REDO===a&&this.highlight(this.ui.redo)))},updateButton:function(a,b){b?this.enable(a):this.disable(a)},onRender:function(){if(this.undoManager&&!this.$container.children().hasClass("wiki-edit-undo-redo-buttons aui-buttons")){this.$el.addClass("wiki-edit-undo-redo-buttons aui-buttons");this.shouldUseDivider()&&this.$el.addClass("wiki-edit-separate-section");
var a={aria:!0,hideOnClick:!0,hoverable:!1};this.ui.undo.tooltip(a);this.ui.redo.tooltip(a);this.updateUI();this.$el.prependTo(this.$container);this.attachHandlers()}},onBeforeDestroy:function(){this.ui.undo.tooltip("destroy");this.ui.redo.tooltip("destroy")},attachHandlers:function(){this.listenTo(this.undoManager,"editor:historychanged",function(a,b){this.updateUI(a,b)});this.listenTo(this.undoManager,"destroy",function(){this.destroy()})},determineButtonsContainer:function(a){var b=c(a).closest("div.inline-edit-fields").nextAll(".save-options").find(".wiki-button-bar-content");
b.length||(b=c(a).closest("div.jira-wikifield").next(".save-options").find(".wiki-button-bar-content"));b.length||(b=c(a).siblings(".sd-rte-bar").find(".wiki-button-bar-content"));b.length||(b=c(a).parent(".wiki-edit-content").siblings(".sd-rte-bar").find(".wiki-button-bar-content"));return b.length?b:null},shouldUseDivider:function(){var a=this.$container.children(":visible");return 0<a.length&&!a.eq(0).is("button, input")},onUndo:function(){this.isUndoEnabled()&&(this.undoManager.undo(),this._focusTextarea())},
onRedo:function(){this.isRedoEnabled()&&(this.undoManager.redo(),this._focusTextarea())},isUndoEnabled:function(){return"true"!==this.ui.undo.attr("aria-disabled")},isRedoEnabled:function(){return"true"!==this.ui.redo.attr("aria-disabled")},_focusTextarea:function(){this.options.textarea.focus()}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-ui', location = 'soy/ui/undo-redo-buttons.soy' */
// This file was automatically generated from undo-redo-buttons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Tags.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Tags == 'undefined') { JIRA.Editor.Tags = {}; }
if (typeof JIRA.Editor.Tags.Templates == 'undefined') { JIRA.Editor.Tags.Templates = {}; }


JIRA.Editor.Tags.Templates.undoRedoButtons = function(opt_data, opt_ignored) {
  var output = '';
  var undoShortcut__soy3 = ((opt_data.isMac) ? '\u2318' : 'Ctrl') + '+Z';
  var redoShortcut__soy10 = '' + ((opt_data.isMac) ? '\u2318+Shift+Z' : 'Ctrl+Y');
  output += '<button type="button" class="aui-button aui-button-subtle wiki-operation-undo" title="' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c') + ' (' + soy.$$escapeHtml(undoShortcut__soy3) + ')" aria-disabled="true"><span class="aui-icon aui-icon-small aui-iconfont-undo">' + soy.$$escapeHtml('\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c') + '</span></button><button type="button" class="aui-button aui-button-subtle wiki-operation-redo" title="' + soy.$$escapeHtml('\u0412\u0435\u0440\u043d\u0443\u0442\u044c') + ' (' + soy.$$escapeHtml(redoShortcut__soy10) + ')" aria-disabled="true"><span class="aui-icon aui-icon-small aui-iconfont-redo">' + soy.$$escapeHtml('\u0412\u0435\u0440\u043d\u0443\u0442\u044c') + '</span></button>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Editor.Tags.Templates.undoRedoButtons.soyTemplateName = 'JIRA.Editor.Tags.Templates.undoRedoButtons';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:history-store', location = 'js/editor-undo-history-store.js' */
define("jira/editor/undo-history-store",[],function(){var c=[],a=function(){};a.prototype.put=function(b,d){b&&(c["jira.richeditor.history."+b]=d)};a.prototype.get=function(b){return c["jira.richeditor.history."+b]};a=new a;return{get:a.get,put:a.put}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/editor-undo-redo-analytics.js' */
define("jira/editor/undo-redo-analytics",["jira/editor/analytics","jira/editor/constants","jira/lib/class"],function(d,e,g){return g.extend({init:function(c){c.on("editor:historychanged",function(a,b,f){e.EventTypes.UNDO===a?this.logUndo(a,b,f):e.EventTypes.REDO===a&&this.logRedo(a,b,f);e.EventTypes.ADD===a?(0<this.countAddEvents&&(this.isFirstEditorAction=!1),++this.countAddEvents):this.isFirstEditorAction=!1},this)},logUndo:function(c,a,b){d.sendEvent("editor.instance.action."+c,{firstAction:this.isFirstEditorAction,
source:a,mode:b});d.sendEvent("editor.instance.action",{name:c,mode:b})},logRedo:function(c,a,b){d.sendEvent("editor.instance.action."+c,{source:a,mode:b});d.sendEvent("editor.instance.action",{name:c,mode:b})},clearCounters:function(){this.isFirstEditorAction=!0;this.countAddEvents=0},countAddEvents:0,isFirstEditorAction:!0})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/text-adapter.js' */
define("jira/editor/undomanager-adapter/text-adapter",["jira/editor/constants","jira/editor/marionette","jira/util/logger","jquery"],function(b,e,f,g){return e.MnObject.extend({initialize:function(a){this.textEditor=g(a.textarea);a=this.textEditor.data("wikiEditor");if(!a)throw f.error("Wiki-editor should be already initialised. Could not find 'wikiEditor' instance in given textarea element",this.textEditor),Error("Wiki-editor should be already initialised. Could not find 'wikiEditor' instance in given textarea element");
this.textUndoableTextarea=a.undoRedoEl;this.textUndoManager=this.textUndoableTextarea.undoManager;this.ongoingInternalOperation=!1;this.attachEvents(this.textUndoManager)},undo:function(){try{this.ongoingInternalOperation=!0,this.textUndoableTextarea.undo()}finally{this.ongoingInternalOperation=!1}},redo:function(){try{this.ongoingInternalOperation=!0,this.textUndoableTextarea.redo()}finally{this.ongoingInternalOperation=!1}},hasUndo:function(){return this.textUndoManager.canUndo()},hasRedo:function(){return this.textUndoManager.canRedo()},
clear:function(){this.textUndoManager.clear()},attachEvents:function(a){var c=a.EventTypes;a.on([c.PUSH,c.UPDATE_CURRENT].join(" "),function(d){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.ADD,b.EventSources.UNKNOWN)}.bind(this));a.on(c.UNDO,function(d){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.UNDO,b.EventSources.SHORTCUT)}.bind(this));a.on(c.REDO,function(d){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.REDO,b.EventSources.SHORTCUT)}.bind(this));
a.on(c.CLEAR,function(d){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.CLEAR,b.EventSources.UNKNOWN)}.bind(this))}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/visual-adapter.js' */
define("jira/editor/undomanager-adapter/visual-adapter",["jira/editor/constants","jira/editor/marionette","jquery"],function(b,d,e){return d.MnObject.extend({initialize:function(a){this.id=this.determineId(a.richEditorEl);this.visualEditorInstance=a.richEditorEl.getInstance();this.visualEditor=this.visualEditorInstance.editor;this.visualUndoManager=this.visualEditor.undoManager;this.ongoingInternalOperation=!1;this.attachEvents(this.visualEditor)},undo:function(){try{this.ongoingInternalOperation=
!0,this.visualUndoManager.undo()}finally{this.ongoingInternalOperation=!1}},redo:function(){try{this.ongoingInternalOperation=!0,this.visualUndoManager.redo()}finally{this.ongoingInternalOperation=!1}},hasUndo:function(){return this.visualUndoManager.hasUndo()},hasRedo:function(){return this.visualUndoManager.hasRedo()},clear:function(){this.visualUndoManager.clear()},add:function(a){this.visualEditorInstance.setContent(a.content,null,!0);this.visualUndoManager.add(a)},getData:function(){return this.visualUndoManager.data},
getId:function(){return this.id},attachEvents:function(a){a.on("AddUndo",function(c){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.ADD,b.EventSources.UNKNOWN)}.bind(this));a.on("Undo",function(c){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.UNDO,b.EventSources.SHORTCUT)}.bind(this));a.on("Redo",function(c){this.ongoingInternalOperation||this.triggerMethod("action",b.EventTypes.REDO,b.EventSources.SHORTCUT)}.bind(this));a.on("ClearUndos",function(c){this.ongoingInternalOperation||
this.triggerMethod("action",b.EventTypes.CLEAR,b.EventSources.UNKNOWN)}.bind(this))},determineId:function(a){var c=a.$textarea;a=e(a).data("renderParams").issueKey||"";var f=c.attr("name");c=c.attr("id");return[a,f,c].join(".")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo', location = 'js/undomanager-adapter/noop-adapter.js' */
define("jira/editor/undomanager-adapter/noop-adapter",["jira/editor/marionette"],function(a){return a.MnObject.extend({initialize:function(){},undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},clear:function(){},getId:function(){}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:undo-redo-manager', location = 'js/editor-undomanager.js' */
define("jira/editor/undomanager","jira/editor/undo-redo-analytics jira/editor/undomanager-adapter/text-adapter jira/editor/undomanager-adapter/visual-adapter jira/editor/undomanager-adapter/noop-adapter jira/editor/undo-history-store jira/editor/constants jira/util/logger jira/editor/marionette jira/dialog/dialog jquery".split(" "),function(g,h,k,d,f,b,l,m,n,p){var e=b.Modes;return m.MnObject.extend({initialize:function(a){this.context=this.determineContext(a.textarea);this.restoreHistory=!1;try{this.textUndoManager=
new h({textarea:a.textarea})}catch(c){this.textUndoManager=new d}this.visualUndoManager=new d;this.activeUndoManager=new d;this.analytics=new g(this);this.setActiveMode(a.mode);this.listenTo(this.textUndoManager,"action",this.notifyHistoryChanged)},undo:function(){this.activeUndoManager.undo();this.notifyHistoryChanged(b.EventTypes.UNDO,b.EventSources.BUTTON)},redo:function(){this.activeUndoManager.redo();this.notifyHistoryChanged(b.EventTypes.REDO,b.EventSources.BUTTON)},hasUndo:function(){return this.activeUndoManager.hasUndo()},
hasRedo:function(){return this.activeUndoManager.hasRedo()},setActiveMode:function(a){this.activeMode=a;this.activeUndoManager.clear();e.TEXT===a?this.activeUndoManager=this.textUndoManager:e.VISUAL===a?this.activeUndoManager=this.visualUndoManager:(this.activeUndoManager=new d,l.warn("UndoManager: incorrect mode",a));this.activeUndoManager.clear();this.analytics.clearCounters()},attachToVisualEditor:function(a){this.visualUndoManager=new k({richEditorEl:a});this.listenTo(this.visualUndoManager,"action",
this.notifyHistoryChanged)},restoreUndoHistory:function(){if(this.restoreHistory){if(e.VISUAL===this.activeMode&&b.Context.UNKNOWN===this.context){var a=f.get(this.visualUndoManager.getId());a&&(this.visualUndoManager.clear(),a.forEach(function(c){this.visualUndoManager.add(c)}.bind(this)),this.restoreHistory=!1)}this.analytics.clearCounters()}},shouldRestoreHistory:function(a){this.restoreHistory=!!a},onBeforeDestroy:function(){this.saveUndoHistory()},saveUndoHistory:function(){e.VISUAL===this.activeMode&&
b.Context.UNKNOWN===this.context&&f.put(this.visualUndoManager.getId(),this.visualUndoManager.getData().concat([]))},notifyHistoryChanged:function(a,c){c=c||this.EventSources.UNKNOWN;this.trigger("editor:historychanged",a,c,this.activeMode)},determineContext:function(a){return n.current?b.Context.DIALOG:p(a).parents("div.jira-wikifield[field-id\x3dcomment]").length?b.Context.COMMENT:b.Context.UNKNOWN}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:toolbar-ui', location = 'js/ui/toolbar/clear-formatting.js' */
define("jira/editor/ui/toolbar/clear-formatting",["jira/editor/analytics","jira/util/logger"],function(d,e){return{init:function(b){const c=b.getToolbarContainer().find('.wiki-edit-operation[data-operation\x3d"clear-format"]').parent();c.on("click",function(a){a.preventDefault();(a=(a=b.getInstance())&&a.editor)&&!a.isHidden()&&(a.undoManager.add(),a.execCommand("RemoveFormat"),e.trace("jira.editor.operation.executed"),d.sendEvent("editor.instance.operation.clear.formatting"),a.undoManager.add())});
c.parent().parent().attr("hidden",!1);b.getInstance().on("tabs:changed",function(a){c.parent().parent().attr("hidden",!!a)})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:temporaryAttachmentUtil', location = 'js/util/temporaryAttachment.js' */
define("jira/editor/util/temporaryAttachment",["jquery","exports"],function(b,c){c.getFormToken=function(a){if(a)return b(a).parents("form").find('input[name\x3d"formToken"]').attr("value")||"undefined"}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:controller', location = 'js/editor-controller.js' */
define("jira/editor/controller","jira/editor/analytics jira/editor/constants jira/editor/registry jira/editor/ui/toggle-tabs jira/editor/ui/undo-redo-buttons jira/editor/ui/toolbar/clear-formatting jira/editor/undomanager jira/editor/ui/button-bar-decorator jira/editor/height-helper wrm/require-lazily jquery underscore jira/editor/util/temporaryAttachment".split(" "),function(l,v,r,w,x,y,z,A,B,C,g,t,D){function E(a,c){c===m.TEXT&&r._registerTextMode(a);a.isListenedByRegistry||(r.listenTo(a,"detached",
r._unregister),a.isListenedByRegistry=!0)}function F(a,c,b){b=b.getInstance();r._registerVisualMode(b);c.on("change",function(d){r._switchMode(a,d)})}var m=v.Modes;return{init:function(){},initResources:function(){return this.webResources?this.webResources:this.webResources=C(["wrc!jira.rich.editor.api","wrc!jira.rich.editor"])},_createTabs:function(a,c){a=c[0];var b=c.data("toggleTabs");b||c.data("toggleTabs",b=new w(a));b.getMode().then(function(d){c.is(":visible")&&d===m.TEXT&&(l.sendEvent("editor.instance.init.source"),
l.sendEvent("bundled.editor.instance.init.source"))});return b},_createUndoManager:function(a,c,b,d){a=c[0];b=c.data("undoManager");b||(b=new z({textarea:a,mode:d}),c.data("undoManager",b));return b},_createUndoRedoButtons:function(a,c,b,d){(new A).decorateButtonBars(b.$tabs);a=new x({textarea:c[0],undoManager:d});a.render();return a},_initModes:function(a,c,b){var d=t.partial(F,c[0],b);b.getMode().then(function(h){E(c[0],h);var f=this._createUndoManager(a,c,b,h),k=this._createUndoRedoButtons(a,c,
b,f);h===m.VISUAL?(f.shouldRestoreHistory(!0),this.initResources(),this.initEditor(a,c,b,f,k,!0).done(d)):(b.once("change",function(p){b.disable();k.disable();p===m.VISUAL&&(l.sendEvent("editor.instance.switch.wysiwyg"),l.sendEvent("bundled.editor.instance.switch.wysiwyg"),this.initEditor(a,c,b,f,k).done(d).always(function(){b.enable();k.updateUI()}).done(function(e){e.focus()}))}.bind(this),this),k.updateUI())}.bind(this))},_renderMarkup:function(a,c,b){var d=c[0];c=d.value;d=this.getRenderParams(d);
return b&&a.data("content-present")?(b=a.html(),a.empty(),(new g.Deferred).resolve(this._postProcessRendered(g((new DOMParser).parseFromString(b,"text/html").body))).promise()):this.renderMarkup(c,d)},initEditor:function(a,c,b,d,h,f){var k=new g.Deferred,p=c[0],e=a[0];if(a.data("textarea")===p)return(new g.Deferred).reject().promise();var G=this._renderMarkup(a,c,f);(new B(p)).setHeights(a,-2);b.disable();f=this.getRenderParams(p);a.data("textarea",p).data("renderParams",f);return e.loadingStart()?
(this.require(["jira/editor/create","jira/editor/saving-kb-shortcuts"],function(H,I){H.builder().withElement(e).withMeta(e.$textarea.data()).withPlugin("jira/editor/plugins/mentions/jira-mentions").withPlugin("jira/editor/plugins/prevent-default").withPlugin("jira/editor/plugins/paste").withPlugin("jira/editor/plugins/wiki-autoformat").withPlugin("jira/editor/plugins/editor-content-postprocess").withPlugin("jira/editor/plugins/toolbar-sync").build().progress(function(n){e.setInstance(n)}).then(function(n){function u(q){d.attachToVisualEditor(q);
d.setActiveMode(m.VISUAL);d.restoreUndoHistory()}e.loadingStop();n.on("content",e.serialize,e);e.$textarea.is(document.activeElement)&&e.syncSelection(e.$textarea[0]);n.on("switchMode",function(q){e.setMode(q)});e.shouldFocus()&&setTimeout(function(){n.focus()});document.activeElement&&g.browser.safari&&document.activeElement.blur();n.relayEvent("blur",function(){e.$textarea.blur()});I.enable(e);var J=window.performance.now();G.done(function(q){u(e);n.setContent(q,null,!0)}).fail(function(){u(e);
n.setContent(c[0].value,null,!0)}).always(function(){e.hideMask();b.enable();h.updateUI();k.resolve(e);y.init(e);l.oneShotMeasure("rte-init",{},"init",!0);var q=window.performance.now()-J;l.sendEvent("editor.instance.init.perf",{time:q})});l.oneShotMeasure("rte-init",{},"init-bare",!0)})}),this._bindToggleTabsChange(b,h,d,e),k.promise()):(new g.Deferred).reject().promise()},_bindToggleTabsChange:function(a,c,b,d){a.on("change",function(h){a.disable();c.disable();var f=h===m.TEXT;d.setMode(f).done(function(){b.setActiveMode(h);
d.getInstance().trigger("tabs:changed",f)}).fail(function(){d.setMode(!f);a.setMode(f?m.VISUAL:m.TEXT)}).always(function(){a.enable();c.updateUI()})})},destroyEditor:function(a){var c=g(a);a=a.parentNode;var b=c.data("textarea");c.removeData(["textarea","renderParams"]);g(b).data("jiraEditorWrap",!1);(c=g(b).data("toggleTabs"))&&c.off("change");(b=b||a.querySelector("textarea"))&&r._unregister(b)},getRenderParams:function(a){a=g(a);var c=a.parents("form").find("#issuetype").val(),b=D.getFormToken(a);
return{issueKey:this.getIssueKey(a),projectId:a.parents("form").find("#pid").val(),issueType:t.isArray(c)?t.first(c):c,formToken:b}},getIssueKey:function(a){return a.attr("data-issuekey")?a.attr("data-issuekey"):JIRA&&JIRA.Issue&&JIRA.Issue.getIssueKey?JIRA.Issue.getIssueKey():AJS.Meta.get("issue-key")},renderMarkup:function(a,c){l.mark("rte-rendermarkup");var b=new g.Deferred,d=function(){b.reject(a.replace(/(?:\r\n|\r|\n)/g,"\x3cbr /\x3e"))};if(!a)return b.resolve("");this.require(["jira/editor/html-renderer"],
function(h){h.renderMarkup(a,c).then(function(f){try{var k=g((new DOMParser).parseFromString(f,"text/html").body);b.resolve(this._postProcessRendered(k))}catch(p){b.reject(a)}}.bind(this),d)}.bind(this),d);return b.promise().done(function(){l.oneShotMeasure("rte-rendermarkup")})},_postProcessRendered:function(a){a.find("span.image-wrap").replaceWith(function(b,d){b=g(d);b.is("img")&&(this.style.textAlign?b.css({"text-align":this.style.textAlign,display:"block",margin:"0 auto"}):this.style["float"]&&
b.css("float",this.style["float"]));return b});a.find("div.code.panel,div.preformatted.panel").html(function(b,d){b=g(d);b.find("pre:empty").html("\x3cbr\x3e");return b});var c=a.find("\x3ep:first-child:last-child");return 1!==c.length||c[0].previousSibling||c[0].nextSibling?a.html()||"":c.html()||""},require:function(a,c){this.initResources().then(function(){require(a,c)})},overrideWikiPreview:function(){var a=require("jira/wikipreview/wiki-preview"),c=function(b,d){var h=d.find("textarea.wiki-textfield");
if(!h.attr("data-issue-key")){var f=g(b).find('dt:contains("issueKey")+dd').text();f&&h.attr("data-issue-key",f)}return a.apply(this,arguments)};AJS.namespace("jira.app.wikiPreview",null,c);AJS.namespace("JIRA.wikiPreview",null,c)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state.js' */
define("jira/editor/fsm/states/state",["underscore"],function(d){var c=function(a,b){b.stateName=a;b.extend=e;return b},e=function(a){return c(this.stateName,d.compose(a,this))};return function(a,b){return c(a,b)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-attached.js' */
define("jira/editor/fsm/states/attached",["jira/editor/fsm/states/state","jira/editor/fsm/states/wrap","jira/editor/fsm/states/hidden","jira/editor/fsm/events","jquery"],function(h,f,k,c,d){return function(b){var l=require("jira/editor/fsm/states/init"),e=d(b);e.parent().hasClass("rte-container")||e.wrap(JIRA.Editor.Init.Templates.container());var a=e.parent().siblings('textarea[class*\x3d"wiki-textfield"]')[0];if(a){if(a.wikiEnabled)return f(b,a);d(a).one("wiki-editor-initialized",function(){b.FSM.triggerEvent(c.WIKI_EDITOR_INITIALIZED)}.bind(this))}return h("Attached",
function(g,m){if(g===c.DETACHED)return l(m);if(g===c.WIKI_EDITOR_INITIALIZED)return d(a).is(":visible")?f(b,a):k(b,a)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-detached.js' */
define("jira/editor/fsm/states/detached",["jira/editor/fsm/states/state","jira/editor/fsm/events","jira/editor/controller","jira/util/logger","jquery"],function(f,c,g,d,h){return function(a){var k=require("jira/editor/fsm/states/init"),l=require("jira/editor/fsm/states/attached");setTimeout(function(){a.FSM.triggerEvent(c.DESTROY_TIMEOUT)});return f("Detached",function(b,e){if(b===c.ATTACHED&&e===a)return l(e);if(b===c.DESTROY_TIMEOUT){a.undoManager&&(a.undoManager.destroy(),delete a.undoManager);
a.uncoverTextarea();if(a.richEditorInstance){try{a.richEditorInstance.destroy()}catch(m){d.debug("Editor destroy exception:",m)}delete a.richEditorInstance}delete a.richEditorInstance_loading;delete a.$textarea;"none"===a.style.display&&(a.style.display="");g.destroyEditor(a);b=h(a);b.removeAttr("id","aria-hidden","data-content-present");b.empty();d.trace("jira.editor.plugin.detached");return k(a)}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-init.js' */
define("jira/editor/fsm/states/init",["jira/editor/fsm/states/state","jira/editor/fsm/states/attached","jira/editor/fsm/events"],function(a,b,c){return function(){return a("Init",function(d,e){if(d===c.ATTACHED)return b(e)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-wrap.js' */
define("jira/editor/fsm/states/wrap","jira/editor/fsm/states/state jira/editor/fsm/states/detached jira/editor/fsm/states/mode-text jira/editor/fsm/states/mode-visual jira/editor/fsm/events jira/editor/constants jira/editor/controller jira/editor/height-helper jira/editor/analytics underscore jquery".split(" "),function(l,m,n,p,d,h,k,q,r,t,f){return function(a,c){var e=f(c);r.mark("rte-init");e.addClass("wiki-edit-wrapped");(new q(e)).setHeights();a.textarea=c;a.$textarea=e;c=k._createTabs(f(a),e);
k._initModes(f(a),e,c);c.on("change",function(b){a.FSM.triggerEvent(d.TABS_CHANGE,b)});c.getMode().then(t.debounce(function(b){a.FSM.triggerEvent(d.TABS_CHANGE,b)}));return l("Wrap",function(b,g){if(b===d.DETACHED&&g===a)return m(a);if(b===d.TABS_CHANGE&&g===h.Modes.VISUAL)return p(a);if(b===d.TABS_CHANGE&&g===h.Modes.TEXT)return n(a)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/util/state-hidden-intersection-observer.js' */
define("jira/editor/fsm/states/state-hidden-intersection-observer",["jira/editor/fsm/events"],function(d){var a=function(b,c){this.element=b;this.FSM=c};a.prototype.isIntersectionObserverSupported=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype};a.prototype.observe=function(){if(!this.isIntersectionObserverSupported())return!1;this.observer=new window.IntersectionObserver(function(b,c){b.forEach(function(e){e.isIntersecting&&
this.FSM.triggerEvent(d.VISIBLE)}.bind(this))}.bind(this),{root:null,rootMargin:"0px",threshold:0});this.observer.observe(this.element);return!0};a.prototype.cleanup=function(){this.observer&&(this.observer.disconnect(),delete this.observer)};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-hidden.js' */
define("jira/editor/fsm/states/hidden","jira/editor/fsm/states/state jira/editor/fsm/states/wrap jira/editor/fsm/events jquery underscore jira/editor/fsm/states/state-hidden-intersection-observer".split(" "),function(m,n,b,e,p,q){return function(c,f){var r=require("jira/editor/fsm/states/init"),g=e(f),l=new q(f,c.FSM);if(!l.observe()){var d=g.parents(".tabs-pane");if(0<d.length){d=e(d[0]).attr("id");var h=e('a[href\x3d"#'+d+'"]');h.on("click.rteHiddenState",function(){p.defer(function(){c.FSM.triggerEvent(b.VISIBLE)})})}}var k=
setInterval(function(){g.is(":visible")&&c.FSM.triggerEvent(b.VISIBLE)},100);return m("Hidden",function(a,t){if(a===b.DETACHED)return r(t);if((a===b.VISIBLE||a===b.ATTACHED)&&g.is(":visible"))return n(c,f)}).extend(function(a){a&&(k&&(clearInterval(k),k=void 0),h&&h.off("click.rteHiddenState"),l.cleanup());return a})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-mode-text.js' */
define("jira/editor/fsm/states/mode-text",["jira/editor/fsm/states/state","jira/editor/fsm/states/detached","jira/editor/fsm/events","jira/editor/analytics","jira/editor/constants"],function(e,f,c,g,h){return function(b){var k=require("jira/editor/fsm/states/mode-visual"),l=window.performance.now();return e("Text",function(a,d){if(a===c.DETACHED&&d===b)return f(b);if(a===c.TABS_CHANGE&&d===h.Modes.VISUAL)return k(b)}).extend(function(a){a&&g.sendEvent("editor.instance.tab.timing.text",{time:window.performance.now()-
l});return a})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/states/state-mode-visual.js' */
define("jira/editor/fsm/states/mode-visual","jira/editor/fsm/states/state jira/editor/fsm/states/detached jira/editor/fsm/events jira/editor/analytics jira/editor/constants underscore".split(" "),function(h,k,e,l,d,g){return function(a){var m=require("jira/editor/fsm/states/mode-text");[d.EVENT_OPERATION,d.EVENT_OPERATION_COLOR,d.EVENT_OPERATION_ATTACHMENT].forEach(function(b){a.$textarea.on(b+".stateVisual",function(c,f){a.FSM.triggerEvent(b,f);return!0})});a.$textarea.on("focus.stateVisual",function(){a.FSM.triggerEvent(e.TEXTAREA_FOCUS)});
a.$textarea.on("keydown.stateVisual",function(){a.FSM.triggerEvent(e.TEXTAREA_FOCUS)});a.$textarea.on(d.EVENT_CHANGE+".stateVisual",function(b,c){a.FSM.triggerEvent(d.EVENT_CHANGE,c)});var n=window.performance.now();return h("Visual",function(b,c){if(b===e.DETACHED&&c===a)return k(a);if(b===e.TABS_CHANGE&&c===d.Modes.TEXT)return m(a);b===d.EVENT_OPERATION&&a.getInstance().focus().executeOperation(c);b===d.EVENT_OPERATION_COLOR&&a.getInstance().focus().executeOperation("color",c);b===d.EVENT_OPERATION_ATTACHMENT&&
g.each(g.isArray(c)?c:[c],function(f){a.getInstance().focus().executeOperation("attachment",{attachment:f})});b===e.TEXTAREA_FOCUS&&a.getInstance().focus();b===d.EVENT_CHANGE&&a.changeHandler(c)}).extend(function(b){b&&(l.sendEvent("editor.instance.tab.timing.visual",{time:window.performance.now()-n}),a.$textarea.off(".stateVisual"));return b})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/events.js' */
define("jira/editor/fsm/events",[],function(){return"ATTACHED DETACHED WIKI_EDITOR_INITIALIZED DESTROY_TIMEOUT TABS_CHANGE TEXTAREA_FOCUS VISIBLE".split(" ").reduce(function(a,b){a[b]=b;return a},{})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:fsm', location = 'js/fsm/fsm.js' */
define("jira/editor/fsm",["jira/editor/fsm/states/init","jira/editor/fsm/events","jira/lib/class","jira/util/logger","underscore"],function(e,f,a,c,d){a=a.extend({init:function(){this.currentState=e()},triggerEvent:function(g){c.debug("JEP FSM - Event:",g,d.rest(arguments,1));c.debug("JEP FSM - Current state:",this.currentState.stateName);var b=this.currentState.apply(null,arguments);d.isFunction(b)&&b!==this.currentState&&(this.currentState=b,c.debug("JEP FSM - Next State:",b.stateName))}});a.Events=
f;return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:util', location = 'js/util/edit-distance.js' */
define("jira/editor/util/edit-distance",["exports"],function(f){f.getEditDistance=function(d,e){if(0===d.length)return e.length;if(0===e.length)return d.length;var c=[],a;for(a=0;a<=e.length;a++)c[a]=[a];var b;for(b=0;b<=d.length;b++)c[0][b]=b;for(a=1;a<=e.length;a++)for(b=1;b<=d.length;b++)e.charAt(a-1)===d.charAt(b-1)?c[a][b]=c[a-1][b-1]:c[a][b]=Math.min(c[a-1][b-1]+1,Math.min(c[a][b-1]+1,c[a-1][b]+1));return c[e.length][d.length]}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:util', location = 'js/util/strings.js' */
define("jira/editor/util/strings",["exports"],function(b){b.getFilenameFromError=function(a){return a&&(a.match(/^Unable to render embedded object: File \(([^)]+)\) not found\.$/)||a.match(/^No usable issue stored in the context, unable to resolve filename '([^']+)'$/)||[])[1]}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:round-trip', location = 'js/round-trip.js' */
define("jira/editor/round-trip","jira/editor/analytics jira/editor/controller jira/editor/util/strings jira/data/local-storage jira/editor/util/edit-distance underscore jquery".split(" "),function(n,w,x,p,y,k,l){var q=JSON.stringify({count:0,average:0,lastReport:0}),r=function(){try{return JSON.parse(p.getItem("jira.editor.score")||q)}catch(d){return JSON.parse(q)}},t=function(d){try{return p.setItem("jira.editor.score",JSON.stringify(d)),!0}catch(e){return!1}},u=function(d,e){d=k(d.childNodes).toArray();
for(var f="";0<d.length;){var a=d.splice(0,1)[0],c=a.nodeName;a.nodeType===Node.TEXT_NODE?c+="#"+a.nodeValue:0<a.attributes.length&&(c+="@"+k(a.attributes).toArray().filter(function(b){return!/^(data-mce|style)/.test(b.name)}).map(function(b){return b.name+"\x3d"+b.value}).sort().join("@"));e[c]||(e[c]=String.fromCharCode(e._chars++));f+=e[c];d.push.apply(d,a.childNodes)}return f},v=function(d){try{var e=(new DOMParser).parseFromString(d,"text/html").body;l(e).find("\x3ep:first-child:last-child").contents().unwrap();
for(var f=k(e.childNodes).toArray();0<f.length;){var a=f.pop(),c=a;if(c.nodeType===Node.TEXT_NODE&&/^\s+$/.test(c.nodeValue)||c.nodeType===Node.COMMENT_NODE||"A"===c.nodeName&&!c.nodeValue)a.parentNode.removeChild(a);else{if("STRONG"===a.nodeName){var b=document.createElement("b");k(a.childNodes).toArray().forEach(b.appendChild,b);a.parentNode.replaceChild(b,a);a=b}else if("SPAN"===a.nodeName&&"error"===a.className){var h=l(a).text(),g=x.getFilenameFromError(h);g&&l(a).replaceWith(l("\x3cimg /\x3e").attr("data-filename",
g))}else"IMG"===a.nodeName&&a.getAttribute("data-filename")&&/^data:/.test(a.src)?a.removeAttribute("src"):"DIV"===a.nodeName&&"table-wrap"===a.className&&l(a).find("table:first-child:last-child").unwrap();f.push.apply(f,a.childNodes)}}return e.innerHTML}catch(m){return d}};return{verify:k.debounce(function(d,e,f){w.renderMarkup(e,f).done(function(a){var c=window.performance.now();var b=v(d);a=v(a);if(b===a)c=1;else if(0===b.length||0===a.length)c=0;else{var h={_chars:33},g=u((new DOMParser).parseFromString(b,
"text/html").body,h),m=u((new DOMParser).parseFromString(a,"text/html").body,h);h=y.getEditDistance(g,m);g=1-h/Math.max(g.length,m.length);n.sendEvent("editor.instance.roundtrip.score.raw",{distance:h,score:g,sourceLength:b.length,targetLength:a.length,time:window.performance.now()-c});c=g}b=r();b.average=(c+b.count*b.average)/(b.count+1);b.count+=1;864E5>Date.now()-b.lastReport||10>b.count||(b.lastReport=Date.now(),t(b)&&n.sendEvent("editor.instance.roundtrip.score",{average:b.average,count:b.count}));
100<b.count&&(b.count=1,b.average=c);t(b)}).fail(function(){})},3E4),get:r}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:rteInitElement', location = 'soy/editor-init.soy' */
// This file was automatically generated from editor-init.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Editor.Init.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Editor == 'undefined') { JIRA.Editor = {}; }
if (typeof JIRA.Editor.Init == 'undefined') { JIRA.Editor.Init = {}; }
if (typeof JIRA.Editor.Init.Templates == 'undefined') { JIRA.Editor.Init.Templates = {}; }


JIRA.Editor.Init.Templates.init = function(opt_data, opt_ignored) {
  return '' + JIRA.Editor.Init.Templates.container({content: '<rich-editor contenteditable="true" data-issue-key="' + soy.$$escapeHtml(opt_data.issueKey) + '" data-content-present="true" tabindex="-1">' + soy.$$filterNoAutoescape(opt_data.valueRendered) + '</rich-editor>'});
};
if (goog.DEBUG) {
  JIRA.Editor.Init.Templates.init.soyTemplateName = 'JIRA.Editor.Init.Templates.init';
}


JIRA.Editor.Init.Templates.container = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="rte-container">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Editor.Init.Templates.container.soyTemplateName = 'JIRA.Editor.Init.Templates.container';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:element', location = 'js/ui/rich-editor.js' */
define("jira/editor/ui/rich-editor","atlassian/libs/skate-0.12.6 jira/util/logger jira/util/navigator jira/editor/controller jira/editor/analytics jira/editor/round-trip jira/editor/fsm jira/editor/constants wiki-edit/PhantomCaret jquery underscore".split(" "),function(n,p,l,h,k,q,m,d,r,c,t){if(!(window.JIRA_EDITOR_CONNECT_PLUGIN_INSTALLED||l.isIE()&&!l.isEdge()&&11>l.majorVersion()))return window.JIRA_EDITOR_CONNECT_PLUGIN_INSTALLED=!0,c.valHooks.textarea={get:function(a){},set:function(a,b){c(a).trigger(d.EVENT_CHANGE,
b)}},h.overrideWikiPreview(),n("rich-editor",{type:n.types.TAG,prototype:{showMask:function(){c(this).addClass(d.CLASS_LOADING);this.getToolbar().addClass(d.CLASS_LOADING);this.getContainer().addClass(d.CLASS_LOADING);this.getInstance()&&this.getInstance().disable()},hideMask:function(){c(this).removeClass(d.CLASS_LOADING);this.getToolbar().removeClass(d.CLASS_LOADING);this.getContainer().removeClass(d.CLASS_LOADING);this.getInstance()&&this.getInstance().enable()},getToolbar:function(){return this.getToolbarContainer().find(".wiki-edit-toolbar")},
getContainer:function(){return c(this.parentNode)},getToolbarContainer:function(){return c(this).parents(".wiki-edit-content").parent()},coverTextarea:function(){this.$textarea.attr("tabindex",-1).attr("data-rich-editor-active",!0).addClass(d.CLASS_COVER).on("focus.rteCover",function(a){a.preventDefault()})},uncoverTextarea:function(){this.$textarea.removeAttr("tabindex").removeAttr("data-rich-editor-active").removeClass(d.CLASS_COVER).off(".rteCover");this.$textarea.expandOnInput&&(this.$textarea.css({height:""}),
this.$textarea.expandOnInput())},getRenderParams:function(){return c(this).data("renderParams")},replaceSelection:function(a){h.renderMarkup(a,this.getRenderParams()).done(function(b){this.getInstance().replaceSelection(b)}.bind(this))},syncSelection:function(a){var b=a.selectionStart,e=a.selectionEnd,f=a.value.length,g=this.getInstance();t.defer(function(){e===f&&(0===b?g.selectAll():b===e&&(g.selectAll(),g.editor.selection.collapse(!1)));g.focus()})},setContent:function(a){return h.renderMarkup(a,
this.getRenderParams()).done(function(b){this._setRawContent(b)}.bind(this))},_setRawContent:function(a,b){this.getInstance().setContent(a,null,b)},getContent:function(){return this.$textarea.val()},focus:function(){this.getInstance().focus()},setMode:function(a){var b=new c.Deferred;a?(k.sendEvent("editor.instance.switch.source"),k.sendEvent("bundled.editor.instance.switch.source")):(k.sendEvent("editor.instance.switch.wysiwyg"),k.sendEvent("bundled.editor.instance.switch.wysiwyg"));if(a)this.uncoverTextarea(),
this.getInstance()&&this.getInstance().hide(),setTimeout(function(){this.$textarea.setCaretToPosition(0);this.$textarea.focus();b.resolve()}.bind(this),25),this.$textarea.attr("originalValue",this.$textarea.val());else{var e=this.$textarea.attr("originalValue")!==this.$textarea.val();this.showMask();this.coverTextarea();var f=e?h.renderMarkup(this.$textarea.val(),this.getRenderParams()):(new c.Deferred).resolve();f.always(function(){this.hideMask();this.getInstance().show();this.getInstance().focus();
e?f.done(function(g){this.getInstance().setContent(g,null,!0);b.resolve()}.bind(this)).fail(function(){b.reject();this.$textarea.removeAttr("originalValue")}.bind(this)):b.resolve()}.bind(this))}return b},changeHandler:function(a){h.renderMarkup(a,this.getRenderParams()).done(function(b){this.getInstance().setContent(b)}.bind(this))},getInstance:function(){return this.richEditorInstance},loadingStart:function(){if("undefined"!==typeof this.richEditorInstance||this.richEditorInstance_loading)return!1;
this.undoManager=this.$textarea.data("undoManager");this.richEditorInstance_loading=!0;this.coverTextarea();this.showMask();return!0},setInstance:function(a){this.richEditorInstance=a},loadingStop:function(){delete this.richEditorInstance_loading;this.richEditorInstance.disable()},shouldFocus:function(){return 0<this.$textarea.parents("#addcomment, #comment-add, .issue-body-content").length},serialize:function(){var a=new c.Deferred,b=this.getInstance().getContent();require("jira/editor/converter").convert(b).then(function(e){p.trace("jira.editor.plugin.converted");
this.$textarea.attr("value",e);const f=new Event("input",{bubbles:!0,cancelable:!0});this.$textarea.get(0).dispatchEvent(f);q.verify(b,e,this.getRenderParams());a.resolve()}.bind(this));return a}},attached:function(a){a.FSM||(a.FSM=new m);document.body.contains(a)&&a.FSM.triggerEvent(m.Events.ATTACHED,a);r.mountPhantomCaret(a.closest(".wiki-edit-content"))},detached:function(a){!document.body.contains(a)&&a.FSM&&a.FSM.triggerEvent(m.Events.DETACHED,a)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:customization', location = 'js/editor-customizer.js' */
define("jira/editor/customizer",["jira/util/logger"],function(d){var b=[];return{customizeSettings:function(a,c){if("function"!==typeof a)return d.error("callback has to be a function"),!1;"object"===typeof c&&(a=a.bind(c));b.push(a);return!0},getCustomizeSettingCallbacks:function(){return b.slice(0)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:init', location = 'js/rich-editor-init.js' */
require(["jira/featureflags/feature-manager","jira/editor/ui/rich-editor","jira/editor/controller"],function(a,c,b){a.isFeatureEnabled("jira.richeditor.deferred.loading")||b.initResources()});
}catch(e){WRMCB(e)};